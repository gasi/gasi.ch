<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Application.as</title>
<link rel="stylesheet" type="text/css" href="../../../SourceStyles.css"/>
</head>

<body><pre><span class="ActionScriptComment">////////////////////////////////////////////////////////////////////////////////
</span><span class="ActionScriptComment">//
</span><span class="ActionScriptComment">//  tandem. explore your world.
</span><span class="ActionScriptComment">//  Copyright (c) 2007–2008 Daniel Gasienica (daniel@gasienica.ch)
</span><span class="ActionScriptComment">//
</span><span class="ActionScriptComment">//  tandem is free software: you can redistribute it and/or modify
</span><span class="ActionScriptComment">//  it under the terms of the GNU Affero General Public License as published by
</span><span class="ActionScriptComment">//  the Free Software Foundation, either version 3 of the License, or
</span><span class="ActionScriptComment">//  (at your option) any later version.
</span><span class="ActionScriptComment">//
</span><span class="ActionScriptComment">//  tandem is distributed in the hope that it will be useful,
</span><span class="ActionScriptComment">//  but WITHOUT ANY WARRANTY; without even the implied warranty of
</span><span class="ActionScriptComment">//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
</span><span class="ActionScriptComment">//  GNU Affero General Public License for more details.
</span><span class="ActionScriptComment">//
</span><span class="ActionScriptComment">//  You should have received a copy of the GNU Affero General Public License
</span><span class="ActionScriptComment">//  along with tandem. If not, see &lt;http://www.gnu.org/licenses/&gt;.
</span><span class="ActionScriptComment">//
</span><span class="ActionScriptComment">////////////////////////////////////////////////////////////////////////////////
</span><span class="ActionScriptpackage">package</span> <span class="ActionScriptDefault_Text">tandem</span>.<span class="ActionScriptDefault_Text">core</span>
<span class="ActionScriptBracket/Brace">{</span>

<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">caurina</span>.<span class="ActionScriptDefault_Text">transitions</span>.<span class="ActionScriptDefault_Text">Tweener</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">caurina</span>.<span class="ActionScriptDefault_Text">transitions</span>.<span class="ActionScriptDefault_Text">properties</span>.<span class="ActionScriptDefault_Text">ColorShortcuts</span>;

<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">adobe</span>.<span class="ActionScriptDefault_Text">webapis</span>.<span class="ActionScriptDefault_Text">flickr</span>.<span class="ActionScriptDefault_Text">FlickrService</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">adobe</span>.<span class="ActionScriptDefault_Text">webapis</span>.<span class="ActionScriptDefault_Text">flickr</span>.<span class="ActionScriptDefault_Text">PagedPhotoList</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">adobe</span>.<span class="ActionScriptDefault_Text">webapis</span>.<span class="ActionScriptDefault_Text">flickr</span>.<span class="ActionScriptDefault_Text">User</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">adobe</span>.<span class="ActionScriptDefault_Text">webapis</span>.<span class="ActionScriptDefault_Text">flickr</span>.<span class="ActionScriptDefault_Text">events</span>.<span class="ActionScriptDefault_Text">FlickrResultEvent</span>;

<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">display</span>.<span class="ActionScriptDefault_Text">DisplayObject</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">display</span>.<span class="ActionScriptDefault_Text">Sprite</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">display</span>.<span class="ActionScriptDefault_Text">StageAlign</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">display</span>.<span class="ActionScriptDefault_Text">StageScaleMode</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">events</span>.<span class="ActionScriptDefault_Text">Event</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">system</span>.<span class="ActionScriptDefault_Text">Security</span>;

<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">tandem</span>.<span class="ActionScriptDefault_Text">events</span>.<span class="ActionScriptDefault_Text">TandemEvent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">tandem</span>.<span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">ApplicationModel</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">tandem</span>.<span class="ActionScriptDefault_Text">ui</span>.<span class="ActionScriptDefault_Text">GlobalNavigation</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">tandem</span>.<span class="ActionScriptDefault_Text">ui</span>.<span class="ActionScriptDefault_Text">GlobalNavigationComponent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">tandem</span>.<span class="ActionScriptDefault_Text">ui</span>.<span class="ActionScriptDefault_Text">MemoryIndicator</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">tandem</span>.<span class="ActionScriptDefault_Text">ui</span>.<span class="ActionScriptDefault_Text">MemoryIndicatorComponent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">tandem</span>.<span class="ActionScriptDefault_Text">ui</span>.<span class="ActionScriptDefault_Text">NotificationOverlay</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">tandem</span>.<span class="ActionScriptDefault_Text">ui</span>.<span class="ActionScriptDefault_Text">NotificationOverlayComponent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">tandem</span>.<span class="ActionScriptDefault_Text">ui</span>.<span class="ActionScriptDefault_Text">Timeline</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">tandem</span>.<span class="ActionScriptDefault_Text">ui</span>.<span class="ActionScriptDefault_Text">ZoomNavigator</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">tandem</span>.<span class="ActionScriptDefault_Text">ui</span>.<span class="ActionScriptDefault_Text">ZoomViewport</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">tandem</span>.<span class="ActionScriptDefault_Text">ui</span>.<span class="ActionScriptDefault_Text">views</span>.<span class="ActionScriptDefault_Text">StreamView</span>;

<span class="ActionScriptReserved">public</span> <span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">Application</span> <span class="ActionScriptReserved">extends</span> <span class="ActionScriptDefault_Text">Sprite</span>
<span class="ActionScriptBracket/Brace">{</span>    
    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//  Constructor
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>    <span class="ActionScriptASDoc">/**
    * Constructor.
    */</span>
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">Application</span><span class="ActionScriptBracket/Brace">()</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">Event</span>.<span class="ActionScriptDefault_Text">ADDED_TO_STAGE</span>, <span class="ActionScriptDefault_Text">addedToStageHandler</span>, <span class="ActionScriptReserved">false</span>, 0, <span class="ActionScriptReserved">true</span> <span class="ActionScriptBracket/Brace">)</span>
    <span class="ActionScriptBracket/Brace">}</span>
       
    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//  Class Constants
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//--------------------------------------------------------------------------    
</span>    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">DEFAULT_USER_ADDRESS</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;gasi&quot;</span>
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">DEFAULT_USER_ID</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;72389028@N00&quot;</span>
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">DEFAULT_MINIMUM_ZOOM</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0.5
    
    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//  Children
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//--------------------------------------------------------------------------    
</span>    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">globalNavigation</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">GlobalNavigation</span>
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">memoryIndicator</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">MemoryIndicator</span>
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">notificationOverlay</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">NotificationOverlay</span>
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">timeline</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">Timeline</span>
    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">viewport</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">ZoomViewport</span>
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">navigator</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">ZoomNavigator</span> 
    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">view</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">DisplayObject</span>
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">initialized</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>
    

    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//  Variables
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">model</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">ApplicationModel</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ApplicationModel</span>.<span class="ActionScriptDefault_Text">getInstance</span><span class="ActionScriptBracket/Brace">()</span>
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">completed</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>

    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">numPhotos</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 363
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">page</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 1
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">pageSize</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 500
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">extras</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;date_taken&quot;</span>
     
       
    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//  Event Handler: Stage
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addedToStageHandler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">event</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">Event</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptComment">// Code in constructor is interpreted by
</span>        <span class="ActionScriptComment">// AVM, therefore move processing-intensive code
</span>        <span class="ActionScriptComment">// outside, so it can be processed by the JIT compiler
</span>        <span class="ActionScriptDefault_Text">initialize</span><span class="ActionScriptBracket/Brace">()</span>
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//  Methods: Initialization
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">initialize</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">stage</span>.<span class="ActionScriptDefault_Text">align</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">StageAlign</span>.<span class="ActionScriptDefault_Text">TOP_LEFT</span>
        <span class="ActionScriptDefault_Text">stage</span>.<span class="ActionScriptDefault_Text">scaleMode</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">StageScaleMode</span>.<span class="ActionScriptDefault_Text">NO_SCALE</span>
        
        <span class="ActionScriptDefault_Text">initializeLibraries</span><span class="ActionScriptBracket/Brace">()</span>
        <span class="ActionScriptDefault_Text">initializeSecurity</span><span class="ActionScriptBracket/Brace">()</span>
        <span class="ActionScriptDefault_Text">registerListeners</span><span class="ActionScriptBracket/Brace">()</span>
        <span class="ActionScriptDefault_Text">createChildren</span><span class="ActionScriptBracket/Brace">()</span>
        <span class="ActionScriptDefault_Text">updateDisplayList</span><span class="ActionScriptBracket/Brace">()</span>
                  
        <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">service</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">FlickrService</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">API_KEY</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">FlickrResultEvent</span>.<span class="ActionScriptDefault_Text">PEOPLE_GET_PUBLIC_PHOTOS</span>,
                                        <span class="ActionScriptDefault_Text">getPublicPhotosHandler</span> <span class="ActionScriptBracket/Brace">)</span>
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">initializeSecurity</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptComment">// TODO: Smells bad… =(
</span>        <span class="ActionScriptDefault_Text">Security</span>.<span class="ActionScriptDefault_Text">loadPolicyFile</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;http://static.flickr.com/crossdomain.xml&quot;</span> <span class="ActionScriptBracket/Brace">)</span>
        
        <span class="ActionScriptDefault_Text">Security</span>.<span class="ActionScriptDefault_Text">loadPolicyFile</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;http://farm1.static.flickr.com/crossdomain.xml&quot;</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">Security</span>.<span class="ActionScriptDefault_Text">loadPolicyFile</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;http://farm2.static.flickr.com/crossdomain.xml&quot;</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">Security</span>.<span class="ActionScriptDefault_Text">loadPolicyFile</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;http://farm3.static.flickr.com/crossdomain.xml&quot;</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">Security</span>.<span class="ActionScriptDefault_Text">loadPolicyFile</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;http://farm4.static.flickr.com/crossdomain.xml&quot;</span> <span class="ActionScriptBracket/Brace">)</span>

        <span class="ActionScriptDefault_Text">Security</span>.<span class="ActionScriptDefault_Text">loadPolicyFile</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;http://l.yimg.com/crossdomain.xml&quot;</span> <span class="ActionScriptBracket/Brace">)</span>
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">initializeLibraries</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptComment">// Tweener
</span>        <span class="ActionScriptDefault_Text">ColorShortcuts</span>.<span class="ActionScriptDefault_Text">init</span><span class="ActionScriptBracket/Brace">()</span>
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">registerListeners</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">stage</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">Event</span>.<span class="ActionScriptDefault_Text">RESIZE</span>, <span class="ActionScriptDefault_Text">resizeHandler</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">TandemEvent</span>.<span class="ActionScriptDefault_Text">APPLICATION_COMPLETE</span>, <span class="ActionScriptDefault_Text">applicationCompleteHandler</span> <span class="ActionScriptBracket/Brace">)</span>
        
        <span class="ActionScriptDefault_Text">SWFAddress</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">SWFAddressEvent</span>.<span class="ActionScriptDefault_Text">CHANGE</span>, <span class="ActionScriptDefault_Text">swfAddressChangeHandler</span> <span class="ActionScriptBracket/Brace">)</span>
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//  User Interface
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createChildren</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">createTimeline</span><span class="ActionScriptBracket/Brace">()</span>
        <span class="ActionScriptDefault_Text">createGlobalNavigation</span><span class="ActionScriptBracket/Brace">()</span>
        <span class="ActionScriptDefault_Text">createMemoryIndicator</span><span class="ActionScriptBracket/Brace">()</span>
        <span class="ActionScriptDefault_Text">createNotificationOverlay</span><span class="ActionScriptBracket/Brace">()</span>
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createViewport</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">completed</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>
        <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">photos</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[]</span>
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">view</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptDefault_Text">removeChild</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">view</span> <span class="ActionScriptBracket/Brace">)</span>
          
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">navigator</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptDefault_Text">removeChild</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">navigator</span> <span class="ActionScriptBracket/Brace">)</span>
        
        <span class="ActionScriptComment">// view
</span>        <span class="ActionScriptDefault_Text">initialized</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>
        <span class="ActionScriptDefault_Text">view</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">StreamView</span><span class="ActionScriptBracket/Brace">()</span>
        <span class="ActionScriptDefault_Text">view</span>.<span class="ActionScriptDefault_Text">alpha</span> <span class="ActionScriptOperator">=</span> 0
        
        <span class="ActionScriptComment">// container
</span>        <span class="ActionScriptDefault_Text">viewport</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ZoomViewport</span><span class="ActionScriptBracket/Brace">()</span>
        <span class="ActionScriptDefault_Text">viewport</span>.<span class="ActionScriptDefault_Text">minZoom</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">DEFAULT_MINIMUM_ZOOM</span>
        <span class="ActionScriptDefault_Text">viewport</span>.<span class="ActionScriptDefault_Text">view</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">view</span>
        
        <span class="ActionScriptComment">// navigator
</span>        <span class="ActionScriptDefault_Text">navigator</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ZoomNavigator</span><span class="ActionScriptBracket/Brace">()</span>
        <span class="ActionScriptDefault_Text">navigator</span>.<span class="ActionScriptDefault_Text">model</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">viewport</span>
        <span class="ActionScriptDefault_Text">navigator</span>.<span class="ActionScriptDefault_Text">alpha</span> <span class="ActionScriptOperator">=</span> 0
        
        <span class="ActionScriptComment">// add children to display list
</span>        <span class="ActionScriptDefault_Text">addChildAt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">viewport</span>, 0 <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">addChildAt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">view</span>, 1 <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptDefault_Text">addChildAt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">navigator</span>, 2 <span class="ActionScriptBracket/Brace">)</span>
        
        
        <span class="ActionScriptComment">// fade in notification overlay
</span>        <span class="ActionScriptDefault_Text">Tweener</span>.<span class="ActionScriptDefault_Text">addTween</span><span class="ActionScriptBracket/Brace">(</span>
                            <span class="ActionScriptDefault_Text">notificationOverlay</span>,
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptOperator">:</span> 1,
                                <span class="ActionScriptDefault_Text">time</span><span class="ActionScriptOperator">:</span> 1
                            <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptBracket/Brace">)</span>
        
        
        <span class="ActionScriptComment">// call service
</span>        <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">people</span>.<span class="ActionScriptDefault_Text">getPublicPhotos</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">nsid</span>, <span class="ActionScriptDefault_Text">extras</span>,
                                              <span class="ActionScriptDefault_Text">Math</span>.<span class="ActionScriptDefault_Text">min</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">pageSize</span>, <span class="ActionScriptDefault_Text">numPhotos</span> <span class="ActionScriptBracket/Brace">)</span>,
                                              <span class="ActionScriptDefault_Text">page</span> <span class="ActionScriptBracket/Brace">)</span>
        
        <span class="ActionScriptComment">// initial layout
</span>        <span class="ActionScriptDefault_Text">updateDisplayList</span><span class="ActionScriptBracket/Brace">()</span>
    <span class="ActionScriptBracket/Brace">}</span>
        
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createTimeline</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptComment">//timeline = new TimelineComponent()
</span>        <span class="ActionScriptComment">//addChild( timeline )
</span>    <span class="ActionScriptBracket/Brace">}</span>
        
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createGlobalNavigation</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">globalNavigation</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">GlobalNavigationComponent</span><span class="ActionScriptBracket/Brace">()</span>
        <span class="ActionScriptDefault_Text">addChild</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">globalNavigation</span> <span class="ActionScriptBracket/Brace">)</span>
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createMemoryIndicator</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">memoryIndicator</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">MemoryIndicatorComponent</span><span class="ActionScriptBracket/Brace">()</span>
        <span class="ActionScriptDefault_Text">addChild</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">memoryIndicator</span> <span class="ActionScriptBracket/Brace">)</span>
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createNotificationOverlay</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">notificationOverlay</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">NotificationOverlayComponent</span><span class="ActionScriptBracket/Brace">()</span>
        <span class="ActionScriptDefault_Text">notificationOverlay</span>.<span class="ActionScriptDefault_Text">alpha</span> <span class="ActionScriptOperator">=</span> 0
        <span class="ActionScriptDefault_Text">addChild</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">notificationOverlay</span> <span class="ActionScriptBracket/Brace">)</span>
        
        <span class="ActionScriptComment">// fade in notification overlay
</span>        <span class="ActionScriptDefault_Text">Tweener</span>.<span class="ActionScriptDefault_Text">addTween</span><span class="ActionScriptBracket/Brace">(</span>
                            <span class="ActionScriptDefault_Text">notificationOverlay</span>,
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptOperator">:</span> 1,
                                <span class="ActionScriptDefault_Text">time</span><span class="ActionScriptOperator">:</span> 1.5,
                                <span class="ActionScriptDefault_Text">delay</span><span class="ActionScriptOperator">:</span> 2
                            <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptBracket/Brace">)</span>
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//  SWFAdress
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">swfAddressChangeHandler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">event</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">SWFAddressEvent</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>    
        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">user</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">String</span>
        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">action</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">SWFAddress</span>.<span class="ActionScriptDefault_Text">getPathNames</span><span class="ActionScriptBracket/Brace">()[</span> 0 <span class="ActionScriptBracket/Brace">]</span>
        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">flickrNSIDPattern</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">RegExp</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">/[0-9]*@N[0-9]*/</span>
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">action</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;photos&quot;</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// Long URL, e.g. http://flickr.com/photos/gasi
</span>            <span class="ActionScriptComment">// or http://flickr.com/photos/72389028@N00
</span>            <span class="ActionScriptDefault_Text">user</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">SWFAddress</span>.<span class="ActionScriptDefault_Text">getPathNames</span><span class="ActionScriptBracket/Brace">()[</span> 1 <span class="ActionScriptBracket/Brace">]</span>
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">else</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// Short URL, e.g. http://flickr.com/gasi
</span>            <span class="ActionScriptDefault_Text">user</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">SWFAddress</span>.<span class="ActionScriptDefault_Text">getPathNames</span><span class="ActionScriptBracket/Brace">()[</span> 0 <span class="ActionScriptBracket/Brace">]</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">user</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// Default user
</span>            <span class="ActionScriptDefault_Text">SWFAddress</span>.<span class="ActionScriptDefault_Text">setValue</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;photos/&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">DEFAULT_USER_ADDRESS</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;/&quot;</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">}</span> 
        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">flickrNSIDPattern</span>.<span class="ActionScriptDefault_Text">test</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">user</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// Look up Flickr NSID, e.g. 72389028@N00
</span>            <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">people</span>.<span class="ActionScriptDefault_Text">getInfo</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">user</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">FlickrResultEvent</span>.<span class="ActionScriptDefault_Text">PEOPLE_GET_INFO</span>, <span class="ActionScriptDefault_Text">getInfoHandler</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">else</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// Look up Flickr URL
</span>            <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">urls</span>.<span class="ActionScriptDefault_Text">lookupUser</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;http://flickr.com/photos/&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">user</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;/&quot;</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">FlickrResultEvent</span>.<span class="ActionScriptDefault_Text">URLS_LOOKUP_USER</span>, <span class="ActionScriptDefault_Text">lookupUserHandler</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//  Event Handlers: Application
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>            
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">resizeHandler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">event</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">Event</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">updateDisplayList</span><span class="ActionScriptBracket/Brace">()</span>
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">applicationCompleteHandler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">event</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">Event</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptComment">// fade in view
</span>        <span class="ActionScriptDefault_Text">Tweener</span>.<span class="ActionScriptDefault_Text">addTween</span><span class="ActionScriptBracket/Brace">(</span>
                             <span class="ActionScriptDefault_Text">view</span>,
                             <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptOperator">:</span> 1,
                                <span class="ActionScriptDefault_Text">time</span><span class="ActionScriptOperator">:</span> 5
                             <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptBracket/Brace">)</span>
        
        <span class="ActionScriptComment">// fade in navigator
</span>        <span class="ActionScriptDefault_Text">Tweener</span>.<span class="ActionScriptDefault_Text">addTween</span><span class="ActionScriptBracket/Brace">(</span>
                           <span class="ActionScriptDefault_Text">navigator</span>,
                           <span class="ActionScriptBracket/Brace">{</span>
                               <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptOperator">:</span> 1,
                               <span class="ActionScriptDefault_Text">time</span><span class="ActionScriptOperator">:</span> 2,
                               <span class="ActionScriptDefault_Text">delay</span><span class="ActionScriptOperator">:</span> 2
                           <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptBracket/Brace">)</span>
        
        <span class="ActionScriptComment">// fade out notification
</span>        <span class="ActionScriptDefault_Text">Tweener</span>.<span class="ActionScriptDefault_Text">addTween</span><span class="ActionScriptBracket/Brace">(</span>
                           <span class="ActionScriptDefault_Text">notificationOverlay</span>,
                           <span class="ActionScriptBracket/Brace">{</span>
                               <span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptOperator">:</span> 0,
                               <span class="ActionScriptDefault_Text">time</span><span class="ActionScriptOperator">:</span> 0.8,
                               <span class="ActionScriptDefault_Text">delay</span><span class="ActionScriptOperator">:</span> 1.8
                           <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptBracket/Brace">)</span>
                         
       <span class="ActionScriptDefault_Text">updateDisplayList</span><span class="ActionScriptBracket/Brace">()</span>
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//  Event Handlers: Service
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getPublicPhotosHandler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">event</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">FlickrResultEvent</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">success</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>                
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">result</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">PagedPhotoList</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">PagedPhotoList</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">data</span>.<span class="ActionScriptDefault_Text">photos</span> <span class="ActionScriptBracket/Brace">)</span>
            
            <span class="ActionScriptComment">// add result data to view
</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">view</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">StreamView</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>                
                <span class="ActionScriptDefault_Text">result</span>.<span class="ActionScriptDefault_Text">photos</span>.<span class="ActionScriptDefault_Text">forEach</span><span class="ActionScriptBracket/Brace">(</span>
                                            <span class="ActionScriptfunction">function</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">item</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptOperator">*</span>,
                                                     ...<span class="ActionScriptDefault_Text">ignored</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
                                            <span class="ActionScriptBracket/Brace">{</span>
                                                <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">photos</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">item</span> <span class="ActionScriptBracket/Brace">)</span>
                                                <span class="ActionScriptDefault_Text">StreamView</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">view</span> <span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">addItem</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">item</span> <span class="ActionScriptBracket/Brace">)</span>                
                                            <span class="ActionScriptBracket/Brace">}</span>
                                     <span class="ActionScriptBracket/Brace">)</span>
                
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// we&apos;re done
</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">photos</span>.<span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&gt;=</span> <span class="ActionScriptDefault_Text">Math</span>.<span class="ActionScriptDefault_Text">min</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">numPhotos</span>, <span class="ActionScriptDefault_Text">result</span>.<span class="ActionScriptDefault_Text">total</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">completed</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">completed</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// fetch more data
</span>            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">result</span>.<span class="ActionScriptDefault_Text">page</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">result</span>.<span class="ActionScriptDefault_Text">pages</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">completed</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">page</span><span class="ActionScriptOperator">++</span>
                <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">people</span>.<span class="ActionScriptDefault_Text">getPublicPhotos</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">nsid</span>, <span class="ActionScriptDefault_Text">extras</span>, <span class="ActionScriptDefault_Text">pageSize</span>, <span class="ActionScriptDefault_Text">page</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">initialized</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">initialized</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>
                <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">TandemEvent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">TandemEvent</span>.<span class="ActionScriptDefault_Text">APPLICATION_COMPLETE</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>                
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>           
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">lookupUserHandler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">event</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">FlickrResultEvent</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">success</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">user</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">User</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">data</span>.<span class="ActionScriptDefault_Text">user</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptDefault_Text">createViewport</span><span class="ActionScriptBracket/Brace">()</span>
            <span class="ActionScriptDefault_Text">SWFAddress</span>.<span class="ActionScriptDefault_Text">setTitle</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;tandem — &quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">username</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot; (&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">nsid</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;)&quot;</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">else</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// Default
</span>            <span class="ActionScriptDefault_Text">SWFAddress</span>.<span class="ActionScriptDefault_Text">setValue</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;photos/&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">DEFAULT_USER_ADDRESS</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;/&quot;</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getInfoHandler</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">event</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">FlickrResultEvent</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">success</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">user</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">User</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">data</span>.<span class="ActionScriptDefault_Text">user</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptDefault_Text">createViewport</span><span class="ActionScriptBracket/Brace">()</span>
            <span class="ActionScriptDefault_Text">SWFAddress</span>.<span class="ActionScriptDefault_Text">setTitle</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;tandem — &quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">username</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot; (&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">model</span>.<span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">nsid</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;)&quot;</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">else</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// Default
</span>            <span class="ActionScriptDefault_Text">SWFAddress</span>.<span class="ActionScriptDefault_Text">setValue</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;photos/&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">DEFAULT_USER_ADDRESS</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;/&quot;</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//  Methods: Layout
</span>    <span class="ActionScriptComment">//
</span>    <span class="ActionScriptComment">//--------------------------------------------------------------------------
</span>    
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">updateDisplayList</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptComment">// Navigation
</span>        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">globalNavigation</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">globalNavigation</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> 0
            <span class="ActionScriptDefault_Text">globalNavigation</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> 0
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptComment">// Viewport
</span>        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">viewport</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">viewport</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> 0
            <span class="ActionScriptDefault_Text">viewport</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> 0
            <span class="ActionScriptDefault_Text">viewport</span>.<span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">stage</span>.<span class="ActionScriptDefault_Text">stageWidth</span>
            <span class="ActionScriptDefault_Text">viewport</span>.<span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">stage</span>.<span class="ActionScriptDefault_Text">stageHeight</span>
        <span class="ActionScriptBracket/Brace">}</span>
                
        <span class="ActionScriptComment">// Navigator
</span>        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">navigator</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">navigator</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">stage</span>.<span class="ActionScriptDefault_Text">stageWidth</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">navigator</span>.<span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">-</span> 12
            <span class="ActionScriptDefault_Text">navigator</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">globalNavigation</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">globalNavigation</span>.<span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">+</span> 12 <span class="ActionScriptOperator">:</span> 12
        <span class="ActionScriptBracket/Brace">}</span>
     
        <span class="ActionScriptComment">// Timeline
</span>        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">timeline</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">timeline</span>.<span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">stage</span>.<span class="ActionScriptDefault_Text">stageWidth</span>
            <span class="ActionScriptDefault_Text">timeline</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">stage</span>.<span class="ActionScriptDefault_Text">stageHeight</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">timeline</span>.<span class="ActionScriptDefault_Text">height</span>        
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptComment">// Memory Indicator
</span>        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">memoryIndicator</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">memoryIndicator</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">stage</span>.<span class="ActionScriptDefault_Text">stageWidth</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">memoryIndicator</span>.<span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">-</span> 10
            <span class="ActionScriptDefault_Text">memoryIndicator</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">stage</span>.<span class="ActionScriptDefault_Text">stageHeight</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">memoryIndicator</span>.<span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">-</span> 10
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptComment">// Notification Overlay
</span>        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">notificationOverlay</span> <span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">notificationOverlay</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">stage</span>.<span class="ActionScriptDefault_Text">stageWidth</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">notificationOverlay</span>.<span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">/</span> 2
            <span class="ActionScriptDefault_Text">notificationOverlay</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">stage</span>.<span class="ActionScriptDefault_Text">stageHeight</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">notificationOverlay</span>.<span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">/</span> 2
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptBracket/Brace">}</span></pre></body>
</html>
