if(typeof YAHOO=="undefined"||!YAHOO){var YAHOO={};}YAHOO.namespace=function(){var s=arguments,K=null,T,b,h;for(T=0;T<s.length;T=T+1){h=s[T].split(".");K=YAHOO;for(b=(h[0]=="YAHOO")?1:0;b<h.length;b=b+1){K[h[b]]=K[h[b]]||{};K=K[h[b]];}}return K;};YAHOO.log=function(h,s,T){var b=YAHOO.widget.Logger;if(b&&b.log){return b.log(h,s,T);}else{return false;}};YAHOO.register=function(s,t,K){var J=YAHOO.env.modules;if(!J[s]){J[s]={versions:[],builds:[]};}var T=J[s],a=K.version,o=K.build,z=YAHOO.env.listeners;T.name=s;T.version=a;T.build=o;T.versions.push(a);T.builds.push(o);T.mainClass=t;for(var h=0;h<z.length;h=h+1){z[h](T);}if(t){t.VERSION=a;t.BUILD=o;}else{YAHOO.log("mainClass is undefined for module "+s,"warn");}};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};YAHOO.env.getVersion=function(s){return YAHOO.env.modules[s]||null;};YAHOO.env.ua=function(){var T={ie:0,opera:0,gecko:0,webkit:0,mobile:null,air:0};var b=navigator.userAgent,s;if((/KHTML/).test(b)){T.webkit=1;}s=b.match(/AppleWebKit\/([^\s]*)/);if(s&&s[1]){T.webkit=parseFloat(s[1]);if(/ Mobile\//.test(b)){T.mobile="Apple";}else{s=b.match(/NokiaN[^\/]*/);if(s){T.mobile=s[0];}}s=b.match(/AdobeAIR\/([^\s]*)/);if(s){T.air=s[0];}}if(!T.webkit){s=b.match(/Opera[\s\/]([^\s]*)/);if(s&&s[1]){T.opera=parseFloat(s[1]);s=b.match(/Opera Mini[^;]*/);if(s){T.mobile=s[0];}}else{s=b.match(/MSIE\s([^;]*)/);if(s&&s[1]){T.ie=parseFloat(s[1]);}else{s=b.match(/Gecko\/([^\s]*)/);if(s){T.gecko=1;s=b.match(/rv:([^\s\)]*)/);if(s&&s[1]){T.gecko=parseFloat(s[1]);}}}}}return T;}();(function(){YAHOO.namespace("util","widget","example");if("undefined"!==typeof YAHOO_config){var b=YAHOO_config.listener,s=YAHOO.env.listeners,h=true,T;if(b){for(T=0;T<s.length;T=T+1){if(s[T]==b){h=false;break;}}if(h){s.push(b);}}}})();YAHOO.lang=YAHOO.lang||{isArray:function(b){if(b){var s=YAHOO.lang;return s.isNumber(b.length)&&s.isFunction(b.splice);}return false;},isBoolean:function(s){return typeof s==="boolean";},isFunction:function(s){return typeof s==="function";},isNull:function(s){return s===null;},isNumber:function(s){return typeof s==="number"&&isFinite(s);},isObject:function(s){return (s&&(typeof s==="object"||YAHOO.lang.isFunction(s)))||false;},isString:function(s){return typeof s==="string";},isUndefined:function(s){return typeof s==="undefined";},hasOwnProperty:function(s,b){if(Object.prototype.hasOwnProperty){return s.hasOwnProperty(b);}return !YAHOO.lang.isUndefined(s[b])&&s.constructor.prototype[b]!==s[b];},_IEEnumFix:function(h,T){if(YAHOO.env.ua.ie){var t=["toString","valueOf"],b;for(b=0;b<t.length;b=b+1){var z=t[b],K=T[z];if(YAHOO.lang.isFunction(K)&&K!=Object.prototype[z]){h[z]=K;}}}},extend:function(h,K,T){if(!K||!h){throw new Error("YAHOO.lang.extend failed, please check that "+"all dependencies are included.");}var b=function(){};b.prototype=K.prototype;h.prototype=new b();h.prototype.constructor=h;h.superclass=K.prototype;if(K.prototype.constructor==Object.prototype.constructor){K.prototype.constructor=K;}if(T){for(var s in T){h.prototype[s]=T[s];}YAHOO.lang._IEEnumFix(h.prototype,T);}},augmentObject:function(t,K){if(!K||!t){throw new Error("Absorb failed, verify dependencies.");}var b=arguments,h,z,T=b[2];if(T&&T!==true){for(h=2;h<b.length;h=h+1){t[b[h]]=K[b[h]];}}else{for(z in K){if(T||!t[z]){t[z]=K[z];}}YAHOO.lang._IEEnumFix(t,K);}},augmentProto:function(K,h){if(!h||!K){throw new Error("Augment failed, verify dependencies.");}var b=[K.prototype,h.prototype];for(var T=2;T<arguments.length;T=T+1){b.push(arguments[T]);}YAHOO.lang.augmentObject.apply(this,b);},dump:function(b,a){var h=YAHOO.lang,K,z,C=[],e="{...}",T="f(){...}",J=", ",t=" => ";if(!h.isObject(b)){return b+"";}else{if(b instanceof Date||("nodeType" in b&&"tagName" in b)){return b;}else{if(h.isFunction(b)){return T;}}}a=(h.isNumber(a))?a:3;if(h.isArray(b)){C.push("[");for(K=0,z=b.length;K<z;K=K+1){if(h.isObject(b[K])){C.push((a>0)?h.dump(b[K],a-1):e);}else{C.push(b[K]);}C.push(J);}if(C.length>1){C.pop();}C.push("]");}else{C.push("{");for(K in b){if(h.hasOwnProperty(b,K)){C.push(K+t);if(h.isObject(b[K])){C.push((a>0)?h.dump(b[K],a-1):e);}else{C.push(b[K]);}C.push(J);}}if(C.length>1){C.pop();}C.push("}");}return C.join("");},substitute:function(S,T,e){var a,z,t,O,M,q,K=YAHOO.lang,B=[],h,J="dump",F=" ",b="{",y="}";for(;;){a=S.lastIndexOf(b);if(a<0){break;}z=S.indexOf(y,a);if(a+1>=z){break;}h=S.substring(a+1,z);O=h;q=null;t=O.indexOf(F);if(t>-1){q=O.substring(t+1);O=O.substring(0,t);}M=T[O];if(e){M=e(O,M,q);}if(K.isObject(M)){if(K.isArray(M)){M=K.dump(M,parseInt(q,10));}else{q=q||"";var C=q.indexOf(J);if(C>-1){q=q.substring(4);}if(M.toString===Object.prototype.toString||C>-1){M=K.dump(M,parseInt(q,10));}else{M=M.toString();}}}else{if(!K.isString(M)&&!K.isNumber(M)){M="~-"+B.length+"-~";B[B.length]=h;}}S=S.substring(0,a)+M+S.substring(z+1);}for(a=B.length-1;a>=0;a=a-1){S=S.replace(new RegExp("~-"+a+"-~"),"{"+B[a]+"}","g");}return S;},trim:function(b){try{return b.replace(/^\s+|\s+$/g,"");}catch(T){return b;}},merge:function(){var h={},b=arguments;for(var T=0,s=b.length;T<s;T=T+1){YAHOO.lang.augmentObject(h,b[T],true);}return h;},later:function(a,b,J,h,K){a=a||0;b=b||{};var T=J,z=h,t,s;if(YAHOO.lang.isString(J)){T=b[J];}if(!T){throw new TypeError("method undefined");}if(!YAHOO.lang.isArray(z)){z=[h];}t=function(){T.apply(b,z);};s=(K)?setInterval(t,a):setTimeout(t,a);return {interval:K,cancel:function(){if(this.interval){clearInterval(s);}else{clearTimeout(s);}}};},isValue:function(b){var s=YAHOO.lang;return (s.isObject(b)||s.isString(b)||s.isNumber(b)||s.isBoolean(b));}};YAHOO.util.Lang=YAHOO.lang;YAHOO.lang.augment=YAHOO.lang.augmentProto;YAHOO.augment=YAHOO.lang.augmentProto;YAHOO.extend=YAHOO.lang.extend;YAHOO.register("yahoo",YAHOO,{version:"2.5.1",build:"984"});YAHOO.util.CustomEvent=function(k,C,U,V){this.type=k;this.scope=C||window;this.silent=U;this.signature=V||YAHOO.util.CustomEvent.LIST;this.subscribers=[];if(!this.silent){}var x="_YUICEOnSubscribe";if(k!==x){this.subscribeEvent=new YAHOO.util.CustomEvent(x,this,true);}this.lastError=null;};YAHOO.util.CustomEvent.LIST=0;YAHOO.util.CustomEvent.FLAT=1;YAHOO.util.CustomEvent.prototype={subscribe:function(C,U,V){if(!C){throw new Error("Invalid callback for subscriber to '"+this.type+"'");}if(this.subscribeEvent){this.subscribeEvent.fire(C,U,V);}this.subscribers.push(new YAHOO.util.Subscriber(C,U,V));},unsubscribe:function(k,L){if(!k){return this.unsubscribeAll();}var x=false;for(var C=0,V=this.subscribers.length;C<V;++C){var U=this.subscribers[C];if(U&&U.contains(k,L)){this._delete(C);x=true;}}return x;},fire:function(){var k=this.subscribers.length;if(!k&&this.silent){return true;}var a=[].slice.call(arguments,0),L=true,U,W=false;if(!this.silent){}var C=this.subscribers.slice();for(U=0;U<k;++U){var d=C[U];if(!d){W=true;}else{if(!this.silent){}var N=d.getScope(this.scope);if(this.signature==YAHOO.util.CustomEvent.FLAT){var V=null;if(a.length>0){V=a[0];}try{L=d.fn.call(N,V,d.obj);}catch(x){this.lastError=x;}}else{try{L=d.fn.call(N,this.type,a,d.obj);}catch(p){this.lastError=p;}}if(false===L){if(!this.silent){}return false;}}}return true;},unsubscribeAll:function(){for(var V=this.subscribers.length-1;V>-1;V--){this._delete(V);}this.subscribers=[];return V;},_delete:function(V){var C=this.subscribers[V];if(C){delete C.fn;delete C.obj;}this.subscribers.splice(V,1);},toString:function(){return "CustomEvent: "+"'"+this.type+"', "+"scope: "+this.scope;}};YAHOO.util.Subscriber=function(C,U,V){this.fn=C;this.obj=YAHOO.lang.isUndefined(U)?null:U;this.override=V;};YAHOO.util.Subscriber.prototype.getScope=function(V){if(this.override){if(this.override===true){return this.obj;}else{return this.override;}}return V;};YAHOO.util.Subscriber.prototype.contains=function(V,C){if(C){return (this.fn==V&&this.obj==C);}else{return (this.fn==V);}};YAHOO.util.Subscriber.prototype.toString=function(){return "Subscriber { obj: "+this.obj+", override: "+(this.override||"no")+" }";};if(!YAHOO.util.Event){YAHOO.util.Event=function(){var a=false;var W=[];var N=[];var p=[];var x=[];var U=0;var L=[];var C=[];var V=0;var k={63232:38,63233:40,63234:37,63235:39,63276:33,63277:34,25:9};return {POLL_RETRYS:2000,POLL_INTERVAL:20,EL:0,TYPE:1,FN:2,WFN:3,UNLOAD_OBJ:3,ADJ_SCOPE:4,OBJ:5,OVERRIDE:6,lastError:null,isSafari:YAHOO.env.ua.webkit,webkit:YAHOO.env.ua.webkit,isIE:YAHOO.env.ua.ie,_interval:null,_dri:null,DOMReady:false,startInterval:function(){if(!this._interval){var d=this;var I=function(){d._tryPreloadAttach();};this._interval=setInterval(I,this.POLL_INTERVAL);}},onAvailable:function(b,D,B,J,w){var d=(YAHOO.lang.isString(b))?[b]:b;for(var I=0;I<d.length;I=I+1){L.push({id:d[I],fn:D,obj:B,override:J,checkReady:w});}U=this.POLL_RETRYS;this.startInterval();},onContentReady:function(D,d,w,I){this.onAvailable(D,d,w,I,true);},onDOMReady:function(d,D,I){if(this.DOMReady){setTimeout(function(){var w=window;if(I){if(I===true){w=D;}else{w=I;}}d.call(w,"DOMReady",[],D);},0);}else{this.DOMReadyEvent.subscribe(d,D,I);}},addListener:function(D,d,E,B,I){if(!E||!E.call){return false;}if(this._isValidCollection(D)){var y=true;for(var t=0,A=D.length;t<A;++t){y=this.on(D[t],d,E,B,I)&&y;}return y;}else{if(YAHOO.lang.isString(D)){var b=this.getEl(D);if(b){D=b;}else{this.onAvailable(D,function(){YAHOO.util.Event.on(D,d,E,B,I);});return true;}}}if(!D){return false;}if("unload"==d&&B!==this){N[N.length]=[D,d,E,B,I];return true;}var Y=D;if(I){if(I===true){Y=B;}else{Y=I;}}var w=function(X){return E.call(Y,YAHOO.util.Event.getEvent(X,D),B);};var F=[D,d,E,w,Y,B,I];var q=W.length;W[q]=F;if(this.useLegacyEvent(D,d)){var J=this.getLegacyIndex(D,d);if(J==-1||D!=p[J][0]){J=p.length;C[D.id+d]=J;p[J]=[D,d,D["on"+d]];x[J]=[];D["on"+d]=function(X){YAHOO.util.Event.fireLegacyEvent(YAHOO.util.Event.getEvent(X),J);};}x[J].push(F);}else{try{this._simpleAdd(D,d,w,false);}catch(g){this.lastError=g;this.removeListener(D,d,E);return false;}}return true;},fireLegacyEvent:function(J,D){var B=true,d,q,t,A,b;q=x[D].slice();for(var I=0,w=q.length;I<w;++I){t=q[I];if(t&&t[this.WFN]){A=t[this.ADJ_SCOPE];b=t[this.WFN].call(A,J);B=(B&&b);}}d=p[D];if(d&&d[2]){d[2](J);}return B;},getLegacyIndex:function(I,D){var d=this.generateId(I)+D;if(typeof C[d]=="undefined"){return -1;}else{return C[d];}},useLegacyEvent:function(I,D){if(this.webkit&&("click"==D||"dblclick"==D)){var d=parseInt(this.webkit,10);if(!isNaN(d)&&d<418){return true;}}return false;},removeListener:function(I,d,A){var J,t,E;if(typeof I=="string"){I=this.getEl(I);}else{if(this._isValidCollection(I)){var g=true;for(J=I.length-1;J>-1;J--){g=(this.removeListener(I[J],d,A)&&g);}return g;}}if(!A||!A.call){return this.purgeElement(I,false,d);}if("unload"==d){for(J=N.length-1;J>-1;J--){E=N[J];if(E&&E[0]==I&&E[1]==d&&E[2]==A){N.splice(J,1);return true;}}return false;}var b=null;var B=arguments[3];if("undefined"===typeof B){B=this._getCacheIndex(I,d,A);}if(B>=0){b=W[B];}if(!I||!b){return false;}if(this.useLegacyEvent(I,d)){var w=this.getLegacyIndex(I,d);var D=x[w];if(D){for(J=0,t=D.length;J<t;++J){E=D[J];if(E&&E[this.EL]==I&&E[this.TYPE]==d&&E[this.FN]==A){D.splice(J,1);break;}}}}else{try{this._simpleRemove(I,d,b[this.WFN],false);}catch(q){this.lastError=q;return false;}}delete W[B][this.WFN];delete W[B][this.FN];W.splice(B,1);return true;},getTarget:function(D,I){var d=D.target||D.srcElement;return this.resolveTextNode(d);},resolveTextNode:function(I){try{if(I&&3==I.nodeType){return I.parentNode;}}catch(d){}return I;},getPageX:function(I){var d=I.pageX;if(!d&&0!==d){d=I.clientX||0;if(this.isIE){d+=this._getScrollLeft();}}return d;},getPageY:function(d){var I=d.pageY;if(!I&&0!==I){I=d.clientY||0;if(this.isIE){I+=this._getScrollTop();}}return I;},getXY:function(d){return [this.getPageX(d),this.getPageY(d)];},getRelatedTarget:function(I){var d=I.relatedTarget;if(!d){if(I.type=="mouseout"){d=I.toElement;}else{if(I.type=="mouseover"){d=I.fromElement;}}}return this.resolveTextNode(d);},getTime:function(D){if(!D.time){var I=new Date().getTime();try{D.time=I;}catch(d){this.lastError=d;return I;}}return D.time;},stopEvent:function(d){this.stopPropagation(d);this.preventDefault(d);},stopPropagation:function(d){if(d.stopPropagation){d.stopPropagation();}else{d.cancelBubble=true;}},preventDefault:function(d){if(d.preventDefault){d.preventDefault();}else{d.returnValue=false;}},getEvent:function(D,d){var I=D||window.event;if(!I){var w=this.getEvent.caller;while(w){I=w.arguments[0];if(I&&Event==I.constructor){break;}w=w.caller;}}return I;},getCharCode:function(I){var d=I.keyCode||I.charCode||0;if(YAHOO.env.ua.webkit&&(d in k)){d=k[d];}return d;},_getCacheIndex:function(J,b,w){for(var D=0,I=W.length;D<I;D=D+1){var d=W[D];if(d&&d[this.FN]==w&&d[this.EL]==J&&d[this.TYPE]==b){return D;}}return -1;},generateId:function(d){var I=d.id;if(!I){I="yuievtautoid-"+V;++V;d.id=I;}return I;},_isValidCollection:function(I){try{return (I&&typeof I!=="string"&&I.length&&!I.tagName&&!I.alert&&typeof I[0]!=="undefined");}catch(d){return false;}},elCache:{},getEl:function(d){return (typeof d==="string")?document.getElementById(d):d;},clearCache:function(){},DOMReadyEvent:new YAHOO.util.CustomEvent("DOMReady",this),_load:function(I){if(!a){a=true;var d=YAHOO.util.Event;d._ready();d._tryPreloadAttach();}},_ready:function(I){var d=YAHOO.util.Event;if(!d.DOMReady){d.DOMReady=true;d.DOMReadyEvent.fire();d._simpleRemove(document,"DOMContentLoaded",d._ready);}},_tryPreloadAttach:function(){if(L.length===0){U=0;clearInterval(this._interval);this._interval=null;return ;}if(this.locked){return ;}if(this.isIE){if(!this.DOMReady){this.startInterval();return ;}}this.locked=true;var B=!a;if(!B){B=(U>0&&L.length>0);}var b=[];var t=function(A,g){var q=A;if(g.override){if(g.override===true){q=g.obj;}else{q=g.override;}}g.fn.call(q,g.obj);};var I,d,J,w,D=[];for(I=0,d=L.length;I<d;I=I+1){J=L[I];if(J){w=this.getEl(J.id);if(w){if(J.checkReady){if(a||w.nextSibling||!B){D.push(J);L[I]=null;}}else{t(w,J);L[I]=null;}}else{b.push(J);}}}for(I=0,d=D.length;I<d;I=I+1){J=D[I];t(this.getEl(J.id),J);}U--;if(B){for(I=L.length-1;I>-1;I--){J=L[I];if(!J||!J.id){L.splice(I,1);}}this.startInterval();}else{clearInterval(this._interval);this._interval=null;}this.locked=false;},purgeElement:function(J,b,t){var D=(YAHOO.lang.isString(J))?this.getEl(J):J;var B=this.getListeners(D,t),w,d;if(B){for(w=B.length-1;w>-1;w--){var I=B[w];this.removeListener(D,I.type,I.fn);}}if(b&&D&&D.childNodes){for(w=0,d=D.childNodes.length;w<d;++w){this.purgeElement(D.childNodes[w],b,t);}}},getListeners:function(D,d){var b=[],I;if(!d){I=[W,N];}else{if(d==="unload"){I=[N];}else{I=[W];}}var t=(YAHOO.lang.isString(D))?this.getEl(D):D;for(var J=0;J<I.length;J=J+1){var A=I[J];if(A){for(var B=0,q=A.length;B<q;++B){var w=A[B];if(w&&w[this.EL]===t&&(!d||d===w[this.TYPE])){b.push({type:w[this.TYPE],fn:w[this.FN],obj:w[this.OBJ],adjust:w[this.OVERRIDE],scope:w[this.ADJ_SCOPE],index:B});}}}}return (b.length)?b:null;},_unload:function(B){var d=YAHOO.util.Event,w,D,I,b,J,t=N.slice();for(w=0,b=N.length;w<b;++w){I=t[w];if(I){var q=window;if(I[d.ADJ_SCOPE]){if(I[d.ADJ_SCOPE]===true){q=I[d.UNLOAD_OBJ];}else{q=I[d.ADJ_SCOPE];}}I[d.FN].call(q,d.getEvent(B,I[d.EL]),I[d.UNLOAD_OBJ]);t[w]=null;I=null;q=null;}}N=null;if(W){for(D=W.length-1;D>-1;D--){I=W[D];if(I){d.removeListener(I[d.EL],I[d.TYPE],I[d.FN],D);}}I=null;}p=null;d._simpleRemove(window,"unload",d._unload);},_getScrollLeft:function(){return this._getScroll()[1];},_getScrollTop:function(){return this._getScroll()[0];},_getScroll:function(){var d=document.documentElement,I=document.body;if(d&&(d.scrollTop||d.scrollLeft)){return [d.scrollTop,d.scrollLeft];}else{if(I){return [I.scrollTop,I.scrollLeft];}else{return [0,0];}}},regCE:function(){},_simpleAdd:function(){if(window.addEventListener){return function(D,w,I,d){D.addEventListener(w,I,(d));};}else{if(window.attachEvent){return function(D,w,I,d){D.attachEvent("on"+w,I);};}else{return function(){};}}}(),_simpleRemove:function(){if(window.removeEventListener){return function(D,w,I,d){D.removeEventListener(w,I,(d));};}else{if(window.detachEvent){return function(I,D,d){I.detachEvent("on"+D,d);};}else{return function(){};}}}()};}();(function(){var V=YAHOO.util.Event;V.on=V.addListener;if(V.isIE){YAHOO.util.Event.onDOMReady(YAHOO.util.Event._tryPreloadAttach,YAHOO.util.Event,true);var C=document.createElement("p");V._dri=setInterval(function(){try{C.doScroll("left");clearInterval(V._dri);V._dri=null;V._ready();C=null;}catch(U){}},V.POLL_INTERVAL);}else{if(V.webkit&&V.webkit<525){V._dri=setInterval(function(){var U=document.readyState;if("loaded"==U||"complete"==U){clearInterval(V._dri);V._dri=null;V._ready();}},V.POLL_INTERVAL);}else{V._simpleAdd(document,"DOMContentLoaded",V._ready);}}V._simpleAdd(window,"load",V._load);V._simpleAdd(window,"unload",V._unload);V._tryPreloadAttach();})();}YAHOO.util.EventProvider=function(){};YAHOO.util.EventProvider.prototype={__yui_events:null,__yui_subscribers:null,subscribe:function(V,U,L,x){this.__yui_events=this.__yui_events||{};var k=this.__yui_events[V];if(k){k.subscribe(U,L,x);}else{this.__yui_subscribers=this.__yui_subscribers||{};var C=this.__yui_subscribers;if(!C[V]){C[V]=[];}C[V].push({fn:U,obj:L,override:x});}},unsubscribe:function(U,x,p){this.__yui_events=this.__yui_events||{};var V=this.__yui_events;if(U){var L=V[U];if(L){return L.unsubscribe(x,p);}}else{var C=true;for(var k in V){if(YAHOO.lang.hasOwnProperty(V,k)){C=C&&V[k].unsubscribe(x,p);}}return C;}return false;},unsubscribeAll:function(V){return this.unsubscribe(V);},createEvent:function(p,k){this.__yui_events=this.__yui_events||{};var V=k||{};var W=this.__yui_events;if(W[p]){}else{var a=V.scope||this;var x=(V.silent);var C=new YAHOO.util.CustomEvent(p,a,x,YAHOO.util.CustomEvent.FLAT);W[p]=C;if(V.onSubscribeCallback){C.subscribeEvent.subscribe(V.onSubscribeCallback);}this.__yui_subscribers=this.__yui_subscribers||{};var L=this.__yui_subscribers[p];if(L){for(var U=0;U<L.length;++U){C.subscribe(L[U].fn,L[U].obj,L[U].override);}}}return W[p];},fireEvent:function(x,k,V,U){this.__yui_events=this.__yui_events||{};var p=this.__yui_events[x];if(!p){return null;}var C=[];for(var L=1;L<arguments.length;++L){C.push(arguments[L]);}return p.fire.apply(p,C);},hasEvent:function(V){if(this.__yui_events){if(this.__yui_events[V]){return true;}}return false;}};YAHOO.util.KeyListener=function(V,L,C,U){if(!V){}else{if(!L){}else{if(!C){}}}if(!U){U=YAHOO.util.KeyListener.KEYDOWN;}var k=new YAHOO.util.CustomEvent("keyPressed");this.enabledEvent=new YAHOO.util.CustomEvent("enabled");this.disabledEvent=new YAHOO.util.CustomEvent("disabled");if(typeof V=="string"){V=document.getElementById(V);}if(typeof C=="function"){k.subscribe(C);}else{k.subscribe(C.fn,C.scope,C.correctScope);}function x(N,W){if(!L.shift){L.shift=false;}if(!L.alt){L.alt=false;}if(!L.ctrl){L.ctrl=false;}if(N.shiftKey==L.shift&&N.altKey==L.alt&&N.ctrlKey==L.ctrl){var p;if(L.keys instanceof Array){for(var a=0;a<L.keys.length;a++){p=L.keys[a];if(p==N.charCode){k.fire(N.charCode,N);break;}else{if(p==N.keyCode){k.fire(N.keyCode,N);break;}}}}else{p=L.keys;if(p==N.charCode){k.fire(N.charCode,N);}else{if(p==N.keyCode){k.fire(N.keyCode,N);}}}}}this.enable=function(){if(!this.enabled){YAHOO.util.Event.addListener(V,U,x);this.enabledEvent.fire(L);}this.enabled=true;};this.disable=function(){if(this.enabled){YAHOO.util.Event.removeListener(V,U,x);this.disabledEvent.fire(L);}this.enabled=false;};this.toString=function(){return "KeyListener ["+L.keys+"] "+V.tagName+(V.id?"["+V.id+"]":"");};};YAHOO.util.KeyListener.KEYDOWN="keydown";YAHOO.util.KeyListener.KEYUP="keyup";YAHOO.util.KeyListener.KEY={ALT:18,BACK_SPACE:8,CAPS_LOCK:20,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,META:224,NUM_LOCK:144,PAGE_DOWN:34,PAGE_UP:33,PAUSE:19,PRINTSCREEN:44,RIGHT:39,SCROLL_LOCK:145,SHIFT:16,SPACE:32,TAB:9,UP:38};YAHOO.register("event",YAHOO.util.Event,{version:"2.5.1",build:"984"});(function(){var h=YAHOO.util,j,J,k={},r={},q=window.document;YAHOO.env._id_counter=YAHOO.env._id_counter||0;var e=YAHOO.env.ua.opera,B=YAHOO.env.ua.webkit,D=YAHOO.env.ua.gecko,R=YAHOO.env.ua.ie;var c={HYPHEN:/(-[a-z])/i,ROOT_TAG:/^body|html$/i,OP_SCROLL:/^(?:inline|table-row)$/i};var P=function(p){if(!c.HYPHEN.test(p)){return p;}if(k[p]){return k[p];}var N=p;while(c.HYPHEN.exec(N)){N=N.replace(RegExp.$1,RegExp.$1.substr(1).toUpperCase());}k[p]=N;return N;};var Z=function(N){var p=r[N];if(!p){p=new RegExp("(?:^|\\s+)"+N+"(?:\\s+|$)");r[N]=p;}return p;};if(q.defaultView&&q.defaultView.getComputedStyle){j=function(p,l){var u=null;if(l=="float"){l="cssFloat";}var N=p.ownerDocument.defaultView.getComputedStyle(p,"");if(N){u=N[P(l)];}return p.style[l]||u;};}else{if(q.documentElement.currentStyle&&R){j=function(p,u){switch(P(u)){case "opacity":var v=100;try{v=p.filters["DXImageTransform.Microsoft.Alpha"].opacity;}catch(l){try{v=p.filters("alpha").opacity;}catch(l){}}return v/100;case "float":u="styleFloat";default:var N=p.currentStyle?p.currentStyle[u]:null;return (p.style[u]||N);}};}else{j=function(p,N){return p.style[N];};}}if(R){J=function(p,N,u){switch(N){case "opacity":if(YAHOO.lang.isString(p.style.filter)){p.style.filter="alpha(opacity="+u*100+")";if(!p.currentStyle||!p.currentStyle.hasLayout){p.style.zoom=1;}}break;case "float":N="styleFloat";default:p.style[N]=u;}};}else{J=function(p,N,u){if(N=="float"){N="cssFloat";}p.style[N]=u;};}var X=function(p,N){return p&&p.nodeType==1&&(!N||N(p));};YAHOO.util.Dom={get:function(u){if(u&&(u.nodeType||u.item)){return u;}if(YAHOO.lang.isString(u)||!u){return q.getElementById(u);}if(u.length!==undefined){var l=[];for(var N=0,p=u.length;N<p;++N){l[l.length]=h.Dom.get(u[N]);}return l;}return u;},getStyle:function(p,u){u=P(u);var N=function(l){return j(l,u);};return h.Dom.batch(p,N,h.Dom,true);},setStyle:function(p,u,l){u=P(u);var N=function(v){J(v,u,l);};h.Dom.batch(p,N,h.Dom,true);},getXY:function(p){var N=function(u){if((u.parentNode===null||u.offsetParent===null||this.getStyle(u,"display")=="none")&&u!=u.ownerDocument.body){return false;}return m(u);};return h.Dom.batch(p,N,h.Dom,true);},getX:function(p){var N=function(u){return h.Dom.getXY(u)[0];};return h.Dom.batch(p,N,h.Dom,true);},getY:function(p){var N=function(u){return h.Dom.getXY(u)[1];};return h.Dom.batch(p,N,h.Dom,true);},setXY:function(p,l,u){var N=function(s){var f=this.getStyle(s,"position");if(f=="static"){this.setStyle(s,"position","relative");f="relative";}var W=this.getXY(s);if(W===false){return false;}var o=[parseInt(this.getStyle(s,"left"),10),parseInt(this.getStyle(s,"top"),10)];if(isNaN(o[0])){o[0]=(f=="relative")?0:s.offsetLeft;}if(isNaN(o[1])){o[1]=(f=="relative")?0:s.offsetTop;}if(l[0]!==null){s.style.left=l[0]-W[0]+o[0]+"px";}if(l[1]!==null){s.style.top=l[1]-W[1]+o[1]+"px";}if(!u){var v=this.getXY(s);if((l[0]!==null&&v[0]!=l[0])||(l[1]!==null&&v[1]!=l[1])){this.setXY(s,l,true);}}};h.Dom.batch(p,N,h.Dom,true);},setX:function(N,p){h.Dom.setXY(N,[p,null]);},setY:function(p,N){h.Dom.setXY(p,[null,N]);},getRegion:function(p){var N=function(u){if((u.parentNode===null||u.offsetParent===null||this.getStyle(u,"display")=="none")&&u!=u.ownerDocument.body){return false;}var l=h.Region.getRegion(u);return l;};return h.Dom.batch(p,N,h.Dom,true);},getClientWidth:function(){return h.Dom.getViewportWidth();},getClientHeight:function(){return h.Dom.getViewportHeight();},getElementsByClassName:function(v,W,f,s){W=W||"*";f=(f)?h.Dom.get(f):null||q;if(!f){return [];}var N=[],p=f.getElementsByTagName(W),o=Z(v);for(var u=0,l=p.length;u<l;++u){if(o.test(p[u].className)){N[N.length]=p[u];if(s){s.call(p[u],p[u]);}}}return N;},hasClass:function(u,N){var p=Z(N);var l=function(v){return p.test(v.className);};return h.Dom.batch(u,l,h.Dom,true);},addClass:function(N,p){var u=function(l){if(this.hasClass(l,p)){return false;}l.className=YAHOO.lang.trim([l.className,p].join(" "));return true;};return h.Dom.batch(N,u,h.Dom,true);},removeClass:function(u,N){var p=Z(N);var l=function(v){if(!N||!this.hasClass(v,N)){return false;}var f=v.className;v.className=f.replace(p," ");if(this.hasClass(v,N)){this.removeClass(v,N);}v.className=YAHOO.lang.trim(v.className);return true;};return h.Dom.batch(u,l,h.Dom,true);},replaceClass:function(l,N,p){if(!p||N===p){return false;}var u=Z(N);var v=function(f){if(!this.hasClass(f,N)){this.addClass(f,p);return true;}f.className=f.className.replace(u," "+p+" ");if(this.hasClass(f,N)){this.replaceClass(f,N,p);}f.className=YAHOO.lang.trim(f.className);return true;};return h.Dom.batch(l,v,h.Dom,true);},generateId:function(p,u){u=u||"yui-gen";var N=function(l){if(l&&l.id){return l.id;}var v=u+YAHOO.env._id_counter++;if(l){l.id=v;}return v;};return h.Dom.batch(p,N,h.Dom,true)||N.apply(h.Dom,arguments);},isAncestor:function(p,N){p=h.Dom.get(p);N=h.Dom.get(N);if(!p||!N){return false;}if(p.contains&&N.nodeType&&!B){return p.contains(N);}else{if(p.compareDocumentPosition&&N.nodeType){return !!(p.compareDocumentPosition(N)&16);}else{if(N.nodeType){return !!this.getAncestorBy(N,function(u){return u==p;});}}}return false;},inDocument:function(p){return this.isAncestor(q.documentElement,p);},getElementsBy:function(o,N,u,v){N=N||"*";u=(u)?h.Dom.get(u):null||q;if(!u){return [];}var l=[],s=u.getElementsByTagName(N);for(var f=0,p=s.length;f<p;++f){if(o(s[f])){l[l.length]=s[f];if(v){v(s[f]);}}}return l;},batch:function(v,W,s,u){v=(v&&(v.tagName||v.item))?v:h.Dom.get(v);if(!v||!W){return false;}var l=(u)?s:window;if(v.tagName||v.length===undefined){return W.call(l,v,s);}var f=[];for(var N=0,p=v.length;N<p;++N){f[f.length]=W.call(l,v[N],s);}return f;},getDocumentHeight:function(){var N=(q.compatMode!="CSS1Compat")?q.body.scrollHeight:q.documentElement.scrollHeight;var p=Math.max(N,h.Dom.getViewportHeight());return p;},getDocumentWidth:function(){var N=(q.compatMode!="CSS1Compat")?q.body.scrollWidth:q.documentElement.scrollWidth;var p=Math.max(N,h.Dom.getViewportWidth());return p;},getViewportHeight:function(){var p=self.innerHeight;var N=q.compatMode;if((N||R)&&!e){p=(N=="CSS1Compat")?q.documentElement.clientHeight:q.body.clientHeight;}return p;},getViewportWidth:function(){var p=self.innerWidth;var N=q.compatMode;if(N||R){p=(N=="CSS1Compat")?q.documentElement.clientWidth:q.body.clientWidth;}return p;},getAncestorBy:function(p,N){while(p=p.parentNode){if(X(p,N)){return p;}}return null;},getAncestorByClassName:function(N,p){N=h.Dom.get(N);if(!N){return null;}var u=function(l){return h.Dom.hasClass(l,p);};return h.Dom.getAncestorBy(N,u);},getAncestorByTagName:function(N,p){N=h.Dom.get(N);if(!N){return null;}var u=function(l){return l.tagName&&l.tagName.toUpperCase()==p.toUpperCase();};return h.Dom.getAncestorBy(N,u);},getPreviousSiblingBy:function(p,N){while(p){p=p.previousSibling;if(X(p,N)){return p;}}return null;},getPreviousSibling:function(p){p=h.Dom.get(p);if(!p){return null;}return h.Dom.getPreviousSiblingBy(p);},getNextSiblingBy:function(p,N){while(p){p=p.nextSibling;if(X(p,N)){return p;}}return null;},getNextSibling:function(p){p=h.Dom.get(p);if(!p){return null;}return h.Dom.getNextSiblingBy(p);},getFirstChildBy:function(p,u){var N=(X(p.firstChild,u))?p.firstChild:null;return N||h.Dom.getNextSiblingBy(p.firstChild,u);},getFirstChild:function(p,N){p=h.Dom.get(p);if(!p){return null;}return h.Dom.getFirstChildBy(p);},getLastChildBy:function(p,u){if(!p){return null;}var N=(X(p.lastChild,u))?p.lastChild:null;return N||h.Dom.getPreviousSiblingBy(p.lastChild,u);},getLastChild:function(p){p=h.Dom.get(p);return h.Dom.getLastChildBy(p);},getChildrenBy:function(N,l){var u=h.Dom.getFirstChildBy(N,l);var p=u?[u]:[];h.Dom.getNextSiblingBy(u,function(v){if(!l||l(v)){p[p.length]=v;}return false;});return p;},getChildren:function(p){p=h.Dom.get(p);if(!p){}return h.Dom.getChildrenBy(p);},getDocumentScrollLeft:function(p){p=p||q;return Math.max(p.documentElement.scrollLeft,p.body.scrollLeft);},getDocumentScrollTop:function(p){p=p||q;return Math.max(p.documentElement.scrollTop,p.body.scrollTop);},insertBefore:function(N,p){N=h.Dom.get(N);p=h.Dom.get(p);if(!N||!p||!p.parentNode){return null;}return p.parentNode.insertBefore(N,p);},insertAfter:function(N,p){N=h.Dom.get(N);p=h.Dom.get(p);if(!N||!p||!p.parentNode){return null;}if(p.nextSibling){return p.parentNode.insertBefore(N,p.nextSibling);}else{return p.parentNode.appendChild(N);}},getClientRegion:function(){var u=h.Dom.getDocumentScrollTop(),N=h.Dom.getDocumentScrollLeft(),v=h.Dom.getViewportWidth()+N,p=h.Dom.getViewportHeight()+u;return new h.Region(u,v,p,N);}};var m=function(){if(q.documentElement.getBoundingClientRect){return function(N){var u=N.getBoundingClientRect();var p=N.ownerDocument;return [u.left+h.Dom.getDocumentScrollLeft(p),u.top+h.Dom.getDocumentScrollTop(p)];};}else{return function(u){var l=[u.offsetLeft,u.offsetTop];var N=u.offsetParent;var p=(B&&h.Dom.getStyle(u,"position")=="absolute"&&u.offsetParent==u.ownerDocument.body);if(N!=u){while(N){l[0]+=N.offsetLeft;l[1]+=N.offsetTop;if(!p&&B&&h.Dom.getStyle(N,"position")=="absolute"){p=true;}N=N.offsetParent;}}if(p){l[0]-=u.ownerDocument.body.offsetLeft;l[1]-=u.ownerDocument.body.offsetTop;}N=u.parentNode;while(N.tagName&&!c.ROOT_TAG.test(N.tagName)){if(N.scrollTop||N.scrollLeft){if(!c.OP_SCROLL.test(h.Dom.getStyle(N,"display"))){if(!e||h.Dom.getStyle(N,"overflow")!=="visible"){l[0]-=N.scrollLeft;l[1]-=N.scrollTop;}}}N=N.parentNode;}return l;};}}();})();YAHOO.util.Region=function(e,X,D,h){this.top=e;this[1]=e;this.right=X;this.bottom=D;this.left=h;this[0]=h;};YAHOO.util.Region.prototype.contains=function(D){return (D.left>=this.left&&D.right<=this.right&&D.top>=this.top&&D.bottom<=this.bottom);};YAHOO.util.Region.prototype.getArea=function(){return ((this.bottom-this.top)*(this.right-this.left));};YAHOO.util.Region.prototype.intersect=function(c){var e=Math.max(this.top,c.top);var X=Math.min(this.right,c.right);var D=Math.min(this.bottom,c.bottom);var h=Math.max(this.left,c.left);if(D>=e&&X>=h){return new YAHOO.util.Region(e,X,D,h);}else{return null;}};YAHOO.util.Region.prototype.union=function(c){var e=Math.min(this.top,c.top);var X=Math.max(this.right,c.right);var D=Math.max(this.bottom,c.bottom);var h=Math.min(this.left,c.left);return new YAHOO.util.Region(e,X,D,h);};YAHOO.util.Region.prototype.toString=function(){return ("Region {"+"top: "+this.top+", right: "+this.right+", bottom: "+this.bottom+", left: "+this.left+"}");};YAHOO.util.Region.getRegion=function(X){var R=YAHOO.util.Dom.getXY(X);var e=R[1];var c=R[0]+X.offsetWidth;var D=R[1]+X.offsetHeight;var h=R[0];return new YAHOO.util.Region(e,c,D,h);};YAHOO.util.Point=function(D,h){if(YAHOO.lang.isArray(D)){h=D[1];D=D[0];}this.x=this.right=this.left=this[0]=D;this.y=this.top=this.bottom=this[1]=h;};YAHOO.util.Point.prototype=new YAHOO.util.Region();YAHOO.register("dom",YAHOO.util.Dom,{version:"2.5.1",build:"984"});if(!YAHOO.util.DragDropMgr){YAHOO.util.DragDropMgr=function(){var O=YAHOO.util.Event;return {ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,interactionInfo:null,init:function(){this.initialized=true;},POINT:0,INTERSECT:1,STRICT_INTERSECT:2,mode:0,_execOnAll:function(N,A){for(var Q in this.ids){for(var l in this.ids[Q]){var R=this.ids[Q][l];if(!this.isTypeOfDD(R)){continue;}R[N].apply(R,A);}}},_onLoad:function(){this.init();O.on(document,"mouseup",this.handleMouseUp,this,true);O.on(document,"mousemove",this.handleMouseMove,this,true);O.on(window,"unload",this._onUnload,this,true);O.on(window,"resize",this._onResize,this,true);},_onResize:function(l){this._execOnAll("resetConstraints",[]);},lock:function(){this.locked=true;},unlock:function(){this.locked=false;},isLocked:function(){return this.locked;},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:1000,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,fromTimeout:false,regDragDrop:function(A,l){if(!this.initialized){this.init();}if(!this.ids[l]){this.ids[l]={};}this.ids[l][A.id]=A;},removeDDFromGroup:function(N,l){if(!this.ids[l]){this.ids[l]={};}var A=this.ids[l];if(A&&A[N.id]){delete A[N.id];}},_remove:function(A){for(var l in A.groups){if(l&&this.ids[l][A.id]){delete this.ids[l][A.id];}}delete this.handleIds[A.id];},regHandle:function(A,l){if(!this.handleIds[A]){this.handleIds[A]={};}this.handleIds[A][l]=l;},isDragDrop:function(l){return (this.getDDById(l))?true:false;},getRelated:function(T,A){var R=[];for(var Q in T.groups){for(var N in this.ids[Q]){var l=this.ids[Q][N];if(!this.isTypeOfDD(l)){continue;}if(!A||l.isTarget){R[R.length]=l;}}}return R;},isLegalTarget:function(R,Q){var A=this.getRelated(R,true);for(var N=0,l=A.length;N<l;++N){if(A[N].id==Q.id){return true;}}return false;},isTypeOfDD:function(l){return (l&&l.__ygDragDrop);},isHandle:function(A,l){return (this.handleIds[A]&&this.handleIds[A][l]);},getDDById:function(A){for(var l in this.ids){if(this.ids[l][A]){return this.ids[l][A];}}return null;},handleMouseDown:function(N,A){this.currentTarget=YAHOO.util.Event.getTarget(N);this.dragCurrent=A;var l=A.getEl();this.startX=YAHOO.util.Event.getPageX(N);this.startY=YAHOO.util.Event.getPageY(N);this.deltaX=this.startX-l.offsetLeft;this.deltaY=this.startY-l.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var Q=YAHOO.util.DDM;Q.startDrag(Q.startX,Q.startY);Q.fromTimeout=true;},this.clickTimeThresh);},startDrag:function(l,N){clearTimeout(this.clickTimeout);var A=this.dragCurrent;if(A&&A.events.b4StartDrag){A.b4StartDrag(l,N);A.fireEvent("b4StartDragEvent",{x:l,y:N});}if(A&&A.events.startDrag){A.startDrag(l,N);A.fireEvent("startDragEvent",{x:l,y:N});}this.dragThreshMet=true;},handleMouseUp:function(l){if(this.dragCurrent){clearTimeout(this.clickTimeout);if(this.dragThreshMet){if(this.fromTimeout){this.handleMouseMove(l);}this.fromTimeout=false;this.fireEvents(l,true);}else{}this.stopDrag(l);this.stopEvent(l);}},stopEvent:function(l){if(this.stopPropagation){YAHOO.util.Event.stopPropagation(l);}if(this.preventDefault){YAHOO.util.Event.preventDefault(l);}},stopDrag:function(N,A){var l=this.dragCurrent;if(l&&!A){if(this.dragThreshMet){if(l.events.b4EndDrag){l.b4EndDrag(N);l.fireEvent("b4EndDragEvent",{e:N});}if(l.events.endDrag){l.endDrag(N);l.fireEvent("endDragEvent",{e:N});}}if(l.events.mouseUp){l.onMouseUp(N);l.fireEvent("mouseUpEvent",{e:N});}}this.dragCurrent=null;this.dragOvers={};},handleMouseMove:function(Q){var l=this.dragCurrent;if(l){if(YAHOO.util.Event.isIE&&!Q.button){this.stopEvent(Q);return this.handleMouseUp(Q);}else{if(Q.clientX<0||Q.clientY<0){}}if(!this.dragThreshMet){var N=Math.abs(this.startX-YAHOO.util.Event.getPageX(Q));var A=Math.abs(this.startY-YAHOO.util.Event.getPageY(Q));if(N>this.clickPixelThresh||A>this.clickPixelThresh){this.startDrag(this.startX,this.startY);}}if(this.dragThreshMet){if(l&&l.events.b4Drag){l.b4Drag(Q);l.fireEvent("b4DragEvent",{e:Q});}if(l&&l.events.drag){l.onDrag(Q);l.fireEvent("dragEvent",{e:Q});}if(l){this.fireEvents(Q,false);}}this.stopEvent(Q);}},fireEvents:function(D,n){var r=this.dragCurrent;if(!r||r.isLocked()||r.dragOnly){return ;}var a=YAHOO.util.Event.getPageX(D),M=YAHOO.util.Event.getPageY(D),j=new YAHOO.util.Point(a,M),V=r.getTargetCoord(j.x,j.y),Q=r.getDragEl(),N=["out","over","drop","enter"],k=new YAHOO.util.Region(V.y,V.x+Q.offsetWidth,V.y+Q.offsetHeight,V.x),s=[],A={},p=[],v={outEvts:[],overEvts:[],dropEvts:[],enterEvts:[]};for(var w in this.dragOvers){var J=this.dragOvers[w];if(!this.isTypeOfDD(J)){continue;}if(!this.isOverTarget(j,J,this.mode,k)){v.outEvts.push(J);}s[w]=true;delete this.dragOvers[w];}for(var B in r.groups){if("string"!=typeof B){continue;}for(w in this.ids[B]){var R=this.ids[B][w];if(!this.isTypeOfDD(R)){continue;}if(R.isTarget&&!R.isLocked()&&R!=r){if(this.isOverTarget(j,R,this.mode,k)){A[B]=true;if(n){v.dropEvts.push(R);}else{if(!s[R.id]){v.enterEvts.push(R);}else{v.overEvts.push(R);}this.dragOvers[R.id]=R;}}}}}this.interactionInfo={out:v.outEvts,enter:v.enterEvts,over:v.overEvts,drop:v.dropEvts,point:j,draggedRegion:k,sourceRegion:this.locationCache[r.id],validDrop:n};for(var l in A){p.push(l);}if(n&&!v.dropEvts.length){this.interactionInfo.validDrop=false;if(r.events.invalidDrop){r.onInvalidDrop(D);r.fireEvent("invalidDropEvent",{e:D});}}for(w=0;w<N.length;w++){var d=null;if(v[N[w]+"Evts"]){d=v[N[w]+"Evts"];}if(d&&d.length){var T=N[w].charAt(0).toUpperCase()+N[w].substr(1),f="onDrag"+T,u="b4Drag"+T,S="drag"+T+"Event",F="drag"+T;if(this.mode){if(r.events[u]){r[u](D,d,p);r.fireEvent(u+"Event",{event:D,info:d,group:p});}if(r.events[F]){r[f](D,d,p);r.fireEvent(S,{event:D,info:d,group:p});}}else{for(var G=0,g=d.length;G<g;++G){if(r.events[u]){r[u](D,d[G].id,p[0]);r.fireEvent(u+"Event",{event:D,info:d[G].id,group:p[0]});}if(r.events[F]){r[f](D,d[G].id,p[0]);r.fireEvent(S,{event:D,info:d[G].id,group:p[0]});}}}}}},getBestMatch:function(N){var R=null;var A=N.length;if(A==1){R=N[0];}else{for(var Q=0;Q<A;++Q){var l=N[Q];if(this.mode==this.INTERSECT&&l.cursorIsOver){R=l;break;}else{if(!R||!R.overlap||(l.overlap&&R.overlap.getArea()<l.overlap.getArea())){R=l;}}}}return R;},refreshCache:function(A){var Q=A||this.ids;for(var l in Q){if("string"!=typeof l){continue;}for(var N in this.ids[l]){var R=this.ids[l][N];if(this.isTypeOfDD(R)){var T=this.getLocation(R);if(T){this.locationCache[R.id]=T;}else{delete this.locationCache[R.id];}}}}},verifyEl:function(A){try{if(A){var l=A.offsetParent;if(l){return true;}}}catch(N){}return false;},getLocation:function(s){if(!this.isTypeOfDD(s)){return null;}var R=s.getEl(),n,Q,N,a,M,S,A,V,T;try{n=YAHOO.util.Dom.getXY(R);}catch(u){}if(!n){return null;}Q=n[0];N=Q+R.offsetWidth;a=n[1];M=a+R.offsetHeight;S=a-s.padding[0];A=N+s.padding[1];V=M+s.padding[2];T=Q-s.padding[3];return new YAHOO.util.Region(S,A,V,T);},isOverTarget:function(V,l,N,Q){var R=this.locationCache[l.id];if(!R||!this.useCache){R=this.getLocation(l);this.locationCache[l.id]=R;}if(!R){return false;}l.cursorIsOver=R.contains(V);var u=this.dragCurrent;if(!u||(!N&&!u.constrainX&&!u.constrainY)){return l.cursorIsOver;}l.overlap=null;if(!Q){var T=u.getTargetCoord(V.x,V.y);var A=u.getDragEl();Q=new YAHOO.util.Region(T.y,T.x+A.offsetWidth,T.y+A.offsetHeight,T.x);}var s=Q.intersect(R);if(s){l.overlap=s;return (N)?true:l.cursorIsOver;}else{return false;}},_onUnload:function(A,l){this.unregAll();},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null;}this._execOnAll("unreg",[]);this.ids={};},elementCache:{},getElWrapper:function(A){var l=this.elementCache[A];if(!l||!l.el){l=this.elementCache[A]=new this.ElementWrapper(YAHOO.util.Dom.get(A));}return l;},getElement:function(l){return YAHOO.util.Dom.get(l);},getCss:function(A){var l=YAHOO.util.Dom.get(A);return (l)?l.style:null;},ElementWrapper:function(l){this.el=l||null;this.id=this.el&&l.id;this.css=this.el&&l.style;},getPosX:function(l){return YAHOO.util.Dom.getX(l);},getPosY:function(l){return YAHOO.util.Dom.getY(l);},swapNode:function(N,l){if(N.swapNode){N.swapNode(l);}else{var Q=l.parentNode;var A=l.nextSibling;if(A==N){Q.insertBefore(N,l);}else{if(l==N.nextSibling){Q.insertBefore(l,N);}else{N.parentNode.replaceChild(l,N);Q.insertBefore(N,A);}}}},getScroll:function(){var Q,A,R=document.documentElement,N=document.body;if(R&&(R.scrollTop||R.scrollLeft)){Q=R.scrollTop;A=R.scrollLeft;}else{if(N){Q=N.scrollTop;A=N.scrollLeft;}else{}}return {top:Q,left:A};},getStyle:function(A,l){return YAHOO.util.Dom.getStyle(A,l);},getScrollTop:function(){return this.getScroll().top;},getScrollLeft:function(){return this.getScroll().left;},moveToEl:function(l,N){var A=YAHOO.util.Dom.getXY(N);YAHOO.util.Dom.setXY(l,A);},getClientHeight:function(){return YAHOO.util.Dom.getViewportHeight();},getClientWidth:function(){return YAHOO.util.Dom.getViewportWidth();},numericSort:function(A,l){return (A-l);},_timeoutCount:0,_addListeners:function(){var l=YAHOO.util.DDM;if(YAHOO.util.Event&&document){l._onLoad();}else{if(l._timeoutCount>2000){}else{setTimeout(l._addListeners,10);if(document&&document.body){l._timeoutCount+=1;}}}},handleWasClicked:function(l,N){if(this.isHandle(N,l.id)){return true;}else{var A=l.parentNode;while(A){if(this.isHandle(N,A.id)){return true;}else{A=A.parentNode;}}}return false;}};}();YAHOO.util.DDM=YAHOO.util.DragDropMgr;YAHOO.util.DDM._addListeners();}(function(){var O=YAHOO.util.Event;var l=YAHOO.util.Dom;YAHOO.util.DragDrop=function(Q,A,N){if(Q){this.init(Q,A,N);}};YAHOO.util.DragDrop.prototype={events:null,on:function(){this.subscribe.apply(this,arguments);},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true;},unlock:function(){this.locked=false;},isTarget:true,padding:null,dragOnly:false,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,deltaX:0,deltaY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,cursorIsOver:false,overlap:null,b4StartDrag:function(A,N){},startDrag:function(A,N){},b4Drag:function(A){},onDrag:function(A){},onDragEnter:function(A,N){},b4DragOver:function(A){},onDragOver:function(A,N){},b4DragOut:function(A){},onDragOut:function(A,N){},b4DragDrop:function(A){},onDragDrop:function(A,N){},onInvalidDrop:function(A){},b4EndDrag:function(A){},endDrag:function(A){},b4MouseDown:function(A){},onMouseDown:function(A){},onMouseUp:function(A){},onAvailable:function(){},getEl:function(){if(!this._domRef){this._domRef=l.get(this.id);}return this._domRef;},getDragEl:function(){return l.get(this.dragElId);},init:function(R,A,N){this.initTarget(R,A,N);O.on(this._domRef||this.id,"mousedown",this.handleMouseDown,this,true);for(var Q in this.events){this.createEvent(Q+"Event");}},initTarget:function(Q,A,N){this.config=N||{};this.events={};this.DDM=YAHOO.util.DDM;this.groups={};if(typeof Q!=="string"){this._domRef=Q;Q=l.generateId(Q);}this.id=Q;this.addToGroup((A)?A:"default");this.handleElId=Q;O.onAvailable(Q,this.handleOnAvailable,this,true);this.setDragElId(Q);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();},applyConfig:function(){this.events={mouseDown:true,b4MouseDown:true,mouseUp:true,b4StartDrag:true,startDrag:true,b4EndDrag:true,endDrag:true,drag:true,b4Drag:true,invalidDrop:true,b4DragOut:true,dragOut:true,dragEnter:true,b4DragOver:true,dragOver:true,b4DragDrop:true,dragDrop:true};if(this.config.events){for(var A in this.config.events){if(this.config.events[A]===false){this.events[A]=false;}}}this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false);this.dragOnly=((this.config.dragOnly===true)?true:false);},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable();},setPadding:function(Q,A,R,N){if(!A&&0!==A){this.padding=[Q,Q,Q,Q];}else{if(!R&&0!==R){this.padding=[Q,A,Q,A];}else{this.padding=[Q,A,R,N];}}},setInitPosition:function(R,Q){var T=this.getEl();if(!this.DDM.verifyEl(T)){if(T&&T.style&&(T.style.display=="none")){}else{}return ;}var N=R||0;var A=Q||0;var s=l.getXY(T);this.initPageX=s[0]-N;this.initPageY=s[1]-A;this.lastPageX=s[0];this.lastPageY=s[1];this.setStartPosition(s);},setStartPosition:function(N){var A=N||l.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=A[0];this.startPageY=A[1];},addToGroup:function(A){this.groups[A]=true;this.DDM.regDragDrop(this,A);},removeFromGroup:function(A){if(this.groups[A]){delete this.groups[A];}this.DDM.removeDDFromGroup(this,A);},setDragElId:function(A){this.dragElId=A;},setHandleElId:function(A){if(typeof A!=="string"){A=l.generateId(A);}this.handleElId=A;this.DDM.regHandle(this.id,A);},setOuterHandleElId:function(A){if(typeof A!=="string"){A=l.generateId(A);}O.on(A,"mousedown",this.handleMouseDown,this,true);this.setHandleElId(A);this.hasOuterHandles=true;},unreg:function(){O.removeListener(this.id,"mousedown",this.handleMouseDown);this._domRef=null;this.DDM._remove(this);},isLocked:function(){return (this.DDM.isLocked()||this.locked);},handleMouseDown:function(s,T){var N=s.which||s.button;if(this.primaryButtonOnly&&N>1){return ;}if(this.isLocked()){return ;}var A=this.b4MouseDown(s);if(this.events.b4MouseDown){A=this.fireEvent("b4MouseDownEvent",s);}var Q=this.onMouseDown(s);if(this.events.mouseDown){Q=this.fireEvent("mouseDownEvent",s);}if((A===false)||(Q===false)){return ;}this.DDM.refreshCache(this.groups);var R=new YAHOO.util.Point(O.getPageX(s),O.getPageY(s));if(!this.hasOuterHandles&&!this.DDM.isOverTarget(R,this)){}else{if(this.clickValidator(s)){this.setStartPosition();this.DDM.handleMouseDown(s,this);this.DDM.stopEvent(s);}else{}}},clickValidator:function(N){var A=YAHOO.util.Event.getTarget(N);return (this.isValidHandleChild(A)&&(this.id==this.handleElId||this.DDM.handleWasClicked(A,this.id)));},getTargetCoord:function(Q,N){var A=Q-this.deltaX;var R=N-this.deltaY;if(this.constrainX){if(A<this.minX){A=this.minX;}if(A>this.maxX){A=this.maxX;}}if(this.constrainY){if(R<this.minY){R=this.minY;}if(R>this.maxY){R=this.maxY;}}A=this.getTick(A,this.xTicks);R=this.getTick(R,this.yTicks);return {x:A,y:R};},addInvalidHandleType:function(A){var N=A.toUpperCase();this.invalidHandleTypes[N]=N;},addInvalidHandleId:function(A){if(typeof A!=="string"){A=l.generateId(A);}this.invalidHandleIds[A]=A;},addInvalidHandleClass:function(A){this.invalidHandleClasses.push(A);},removeInvalidHandleType:function(A){var N=A.toUpperCase();delete this.invalidHandleTypes[N];},removeInvalidHandleId:function(A){if(typeof A!=="string"){A=l.generateId(A);}delete this.invalidHandleIds[A];},removeInvalidHandleClass:function(N){for(var Q=0,A=this.invalidHandleClasses.length;Q<A;++Q){if(this.invalidHandleClasses[Q]==N){delete this.invalidHandleClasses[Q];}}},isValidHandleChild:function(R){var Q=true;var s;try{s=R.nodeName.toUpperCase();}catch(T){s=R.nodeName;}Q=Q&&!this.invalidHandleTypes[s];Q=Q&&!this.invalidHandleIds[R.id];for(var N=0,A=this.invalidHandleClasses.length;Q&&N<A;++N){Q=!l.hasClass(R,this.invalidHandleClasses[N]);}return Q;},setXTicks:function(R,A){this.xTicks=[];this.xTickSize=A;var Q={};for(var N=this.initPageX;N>=this.minX;N=N-A){if(!Q[N]){this.xTicks[this.xTicks.length]=N;Q[N]=true;}}for(N=this.initPageX;N<=this.maxX;N=N+A){if(!Q[N]){this.xTicks[this.xTicks.length]=N;Q[N]=true;}}this.xTicks.sort(this.DDM.numericSort);},setYTicks:function(R,A){this.yTicks=[];this.yTickSize=A;var Q={};for(var N=this.initPageY;N>=this.minY;N=N-A){if(!Q[N]){this.yTicks[this.yTicks.length]=N;Q[N]=true;}}for(N=this.initPageY;N<=this.maxY;N=N+A){if(!Q[N]){this.yTicks[this.yTicks.length]=N;Q[N]=true;}}this.yTicks.sort(this.DDM.numericSort);},setXConstraint:function(Q,N,A){this.leftConstraint=parseInt(Q,10);this.rightConstraint=parseInt(N,10);this.minX=this.initPageX-this.leftConstraint;this.maxX=this.initPageX+this.rightConstraint;if(A){this.setXTicks(this.initPageX,A);}this.constrainX=true;},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks();},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0;},setYConstraint:function(A,Q,N){this.topConstraint=parseInt(A,10);this.bottomConstraint=parseInt(Q,10);this.minY=this.initPageY-this.topConstraint;this.maxY=this.initPageY+this.bottomConstraint;if(N){this.setYTicks(this.initPageY,N);}this.constrainY=true;},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var N=(this.maintainOffset)?this.lastPageX-this.initPageX:0;var A=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(N,A);}else{this.setInitPosition();}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize);}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize);}},getTick:function(u,R){if(!R){return u;}else{if(R[0]>=u){return R[0];}else{for(var N=0,A=R.length;N<A;++N){var Q=N+1;if(R[Q]&&R[Q]>=u){var s=u-R[N];var T=R[Q]-u;return (T>s)?R[N]:R[Q];}}return R[R.length-1];}}},toString:function(){return ("DragDrop "+this.id);}};YAHOO.augment(YAHOO.util.DragDrop,YAHOO.util.EventProvider);})();YAHOO.util.DD=function(A,O,l){if(A){this.init(A,O,l);}};YAHOO.extend(YAHOO.util.DD,YAHOO.util.DragDrop,{scroll:true,autoOffset:function(A,l){var O=A-this.startPageX;var N=l-this.startPageY;this.setDelta(O,N);},setDelta:function(l,O){this.deltaX=l;this.deltaY=O;},setDragElPos:function(A,l){var O=this.getDragEl();this.alignElWithMouse(O,A,l);},alignElWithMouse:function(A,T,R){var Q=this.getTargetCoord(T,R);if(!this.deltaSetXY){var s=[Q.x,Q.y];YAHOO.util.Dom.setXY(A,s);var N=parseInt(YAHOO.util.Dom.getStyle(A,"left"),10);var l=parseInt(YAHOO.util.Dom.getStyle(A,"top"),10);this.deltaSetXY=[N-Q.x,l-Q.y];}else{YAHOO.util.Dom.setStyle(A,"left",(Q.x+this.deltaSetXY[0])+"px");YAHOO.util.Dom.setStyle(A,"top",(Q.y+this.deltaSetXY[1])+"px");}this.cachePosition(Q.x,Q.y);var O=this;setTimeout(function(){O.autoScroll.call(O,Q.x,Q.y,A.offsetHeight,A.offsetWidth);},0);},cachePosition:function(l,O){if(l){this.lastPageX=l;this.lastPageY=O;}else{var A=YAHOO.util.Dom.getXY(this.getEl());this.lastPageX=A[0];this.lastPageY=A[1];}},autoScroll:function(V,u,Q,n){if(this.scroll){var M=this.DDM.getClientHeight();var l=this.DDM.getClientWidth();var S=this.DDM.getScrollTop();var N=this.DDM.getScrollLeft();var s=Q+u;var a=n+V;var T=(M+S-u-this.deltaY);var R=(l+N-V-this.deltaX);var A=40;var O=(document.all)?80:30;if(s>M&&T<A){window.scrollTo(N,S+O);}if(u<S&&S>0&&u-S<A){window.scrollTo(N,S-O);}if(a>l&&R<A){window.scrollTo(N+O,S);}if(V<N&&N>0&&V-N<A){window.scrollTo(N-O,S);}}},applyConfig:function(){YAHOO.util.DD.superclass.applyConfig.call(this);this.scroll=(this.config.scroll!==false);},b4MouseDown:function(O){this.setStartPosition();this.autoOffset(YAHOO.util.Event.getPageX(O),YAHOO.util.Event.getPageY(O));},b4Drag:function(O){this.setDragElPos(YAHOO.util.Event.getPageX(O),YAHOO.util.Event.getPageY(O));},toString:function(){return ("DD "+this.id);}});YAHOO.util.DDProxy=function(A,O,l){if(A){this.init(A,O,l);this.initFrame();}};YAHOO.util.DDProxy.dragElId="ygddfdiv";YAHOO.extend(YAHOO.util.DDProxy,YAHOO.util.DD,{resizeFrame:true,centerFrame:false,createFrame:function(){var l=this,O=document.body;if(!O||!O.firstChild){setTimeout(function(){l.createFrame();},50);return ;}var T=this.getDragEl(),Q=YAHOO.util.Dom;if(!T){T=document.createElement("div");T.id=this.dragElId;var N=T.style;N.position="absolute";N.visibility="hidden";N.cursor="move";N.border="2px solid #aaa";N.zIndex=999;N.height="25px";N.width="25px";var A=document.createElement("div");Q.setStyle(A,"height","100%");Q.setStyle(A,"width","100%");Q.setStyle(A,"background-color","#ccc");Q.setStyle(A,"opacity","0");T.appendChild(A);if(YAHOO.env.ua.ie){var R=document.createElement("iframe");R.setAttribute("src","about:blank");R.setAttribute("scrolling","no");R.setAttribute("frameborder","0");T.insertBefore(R,T.firstChild);Q.setStyle(R,"height","100%");Q.setStyle(R,"width","100%");Q.setStyle(R,"position","absolute");Q.setStyle(R,"top","0");Q.setStyle(R,"left","0");Q.setStyle(R,"opacity","0");Q.setStyle(R,"zIndex","-1");Q.setStyle(R.nextSibling,"zIndex","2");}O.insertBefore(T,O.firstChild);}},initFrame:function(){this.createFrame();},applyConfig:function(){YAHOO.util.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||YAHOO.util.DDProxy.dragElId);},showFrame:function(Q,N){var A=this.getEl();var O=this.getDragEl();var l=O.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(l.width,10)/2),Math.round(parseInt(l.height,10)/2));}this.setDragElPos(Q,N);YAHOO.util.Dom.setStyle(O,"visibility","visible");},_resizeProxy:function(){if(this.resizeFrame){var s=YAHOO.util.Dom;var l=this.getEl();var A=this.getDragEl();var T=parseInt(s.getStyle(A,"borderTopWidth"),10);var u=parseInt(s.getStyle(A,"borderRightWidth"),10);var R=parseInt(s.getStyle(A,"borderBottomWidth"),10);var N=parseInt(s.getStyle(A,"borderLeftWidth"),10);if(isNaN(T)){T=0;}if(isNaN(u)){u=0;}if(isNaN(R)){R=0;}if(isNaN(N)){N=0;}var Q=Math.max(0,l.offsetWidth-u-N);var O=Math.max(0,l.offsetHeight-T-R);s.setStyle(A,"width",Q+"px");s.setStyle(A,"height",O+"px");}},b4MouseDown:function(l){this.setStartPosition();var O=YAHOO.util.Event.getPageX(l);var A=YAHOO.util.Event.getPageY(l);this.autoOffset(O,A);},b4StartDrag:function(O,l){this.showFrame(O,l);},b4EndDrag:function(O){YAHOO.util.Dom.setStyle(this.getDragEl(),"visibility","hidden");},endDrag:function(N){var A=YAHOO.util.Dom;var l=this.getEl();var O=this.getDragEl();A.setStyle(O,"visibility","");A.setStyle(l,"visibility","hidden");YAHOO.util.DDM.moveToEl(l,O);A.setStyle(O,"visibility","hidden");A.setStyle(l,"visibility","");},toString:function(){return ("DDProxy "+this.id);}});YAHOO.util.DDTarget=function(A,O,l){if(A){this.initTarget(A,O,l);}};YAHOO.extend(YAHOO.util.DDTarget,YAHOO.util.DragDrop,{toString:function(){return ("DDTarget "+this.id);}});YAHOO.register("dragdrop",YAHOO.util.DragDropMgr,{version:"2.5.1",build:"984"});(function(){var A=YAHOO.util;var a=function(n,K,P,N){if(!n){}this.init(n,K,P,N);};a.NAME="Anim";a.prototype={toString:function(){var K=this.getEl()||{};var n=K.id||K.tagName;return (this.constructor.NAME+": "+n);},patterns:{noNegatives:/width|height|opacity|padding/i,offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(K,P,n){return this.method(this.currentFrame,P,n-P,this.totalFrames);},setAttribute:function(K,P,n){if(this.patterns.noNegatives.test(K)){P=(P>0)?P:0;}A.Dom.setStyle(this.getEl(),K,P+n);},getAttribute:function(K){var P=this.getEl();var p=A.Dom.getStyle(P,K);if(p!=="auto"&&!this.patterns.offsetUnit.test(p)){return parseFloat(p);}var n=this.patterns.offsetAttribute.exec(K)||[];var G=!!(n[3]);var N=!!(n[2]);if(N||(A.Dom.getStyle(P,"position")=="absolute"&&G)){p=P["offset"+n[0].charAt(0).toUpperCase()+n[0].substr(1)];}else{p=0;}return p;},getDefaultUnit:function(K){if(this.patterns.defaultUnit.test(K)){return "px";}return "";},setRuntimeAttribute:function(n){var h;var P;var N=this.attributes;this.runtimeAttributes[n]={};var G=function(O){return (typeof O!=="undefined");};if(!G(N[n]["to"])&&!G(N[n]["by"])){return false;}h=(G(N[n]["from"]))?N[n]["from"]:this.getAttribute(n);if(G(N[n]["to"])){P=N[n]["to"];}else{if(G(N[n]["by"])){if(h.constructor==Array){P=[];for(var p=0,K=h.length;p<K;++p){P[p]=h[p]+N[n]["by"][p]*1;}}else{P=h+N[n]["by"]*1;}}}this.runtimeAttributes[n].start=h;this.runtimeAttributes[n].end=P;this.runtimeAttributes[n].unit=(G(N[n].unit))?N[n]["unit"]:this.getDefaultUnit(n);return true;},init:function(P,O,h,K){var n=false;var N=null;var G=0;P=A.Dom.get(P);this.attributes=O||{};this.duration=!YAHOO.lang.isUndefined(h)?h:1;this.method=K||A.Easing.easeNone;this.useSeconds=true;this.currentFrame=0;this.totalFrames=A.AnimMgr.fps;this.setEl=function(R){P=A.Dom.get(R);};this.getEl=function(){return P;};this.isAnimated=function(){return n;};this.getStartTime=function(){return N;};this.runtimeAttributes={};this.animate=function(){if(this.isAnimated()){return false;}this.currentFrame=0;this.totalFrames=(this.useSeconds)?Math.ceil(A.AnimMgr.fps*this.duration):this.duration;if(this.duration===0&&this.useSeconds){this.totalFrames=1;}A.AnimMgr.registerElement(this);return true;};this.stop=function(R){if(!this.isAnimated()){return false;}if(R){this.currentFrame=this.totalFrames;this._onTween.fire();}A.AnimMgr.stop(this);};var l=function(){this.onStart.fire();this.runtimeAttributes={};for(var R in this.attributes){this.setRuntimeAttribute(R);}n=true;G=0;N=new Date();};var v=function(){var c={duration:new Date()-this.getStartTime(),currentFrame:this.currentFrame};c.toString=function(){return ("duration: "+c.duration+", currentFrame: "+c.currentFrame);};this.onTween.fire(c);var j=this.runtimeAttributes;for(var R in j){this.setAttribute(R,this.doMethod(R,j[R].start,j[R].end),j[R].unit);}G+=1;};var p=function(){var R=(new Date()-N)/1000;var j={duration:R,frames:G,fps:G/R};j.toString=function(){return ("duration: "+j.duration+", frames: "+j.frames+", fps: "+j.fps);};n=false;G=0;this.onComplete.fire(j);};this._onStart=new A.CustomEvent("_start",this,true);this.onStart=new A.CustomEvent("start",this);this.onTween=new A.CustomEvent("tween",this);this._onTween=new A.CustomEvent("_tween",this,true);this.onComplete=new A.CustomEvent("complete",this);this._onComplete=new A.CustomEvent("_complete",this,true);this._onStart.subscribe(l);this._onTween.subscribe(v);this._onComplete.subscribe(p);}};A.Anim=a;})();YAHOO.util.AnimMgr=new function(){var K=null;var A=[];var a=0;this.fps=1000;this.delay=1;this.registerElement=function(N){A[A.length]=N;a+=1;N._onStart.fire();this.start();};this.unRegister=function(p,N){N=N||P(p);if(!p.isAnimated()||N==-1){return false;}p._onComplete.fire();A.splice(N,1);a-=1;if(a<=0){this.stop();}return true;};this.start=function(){if(K===null){K=setInterval(this.run,this.delay);}};this.stop=function(G){if(!G){clearInterval(K);for(var p=0,N=A.length;p<N;++p){this.unRegister(A[0],0);}A=[];K=null;a=0;}else{this.unRegister(G);}};this.run=function(){for(var G=0,N=A.length;G<N;++G){var p=A[G];if(!p||!p.isAnimated()){continue;}if(p.currentFrame<p.totalFrames||p.totalFrames===null){p.currentFrame+=1;if(p.useSeconds){n(p);}p._onTween.fire();}else{YAHOO.util.AnimMgr.stop(p,G);}}};var P=function(G){for(var p=0,N=A.length;p<N;++p){if(A[p]==G){return p;}}return -1;};var n=function(p){var O=p.totalFrames;var h=p.currentFrame;var G=(p.currentFrame*p.duration*1000/p.totalFrames);var N=(new Date()-p.getStartTime());var v=0;if(N<p.duration*1000){v=Math.round((N/G-1)*p.currentFrame);}else{v=O-(h+1);}if(v>0&&isFinite(v)){if(p.currentFrame+v>=O){v=O-(h+1);}p.currentFrame+=v;}};};YAHOO.util.Bezier=new function(){this.getPosition=function(N,P){var p=N.length;var K=[];for(var A=0;A<p;++A){K[A]=[N[A][0],N[A][1]];}for(var a=1;a<p;++a){for(A=0;A<p-a;++A){K[A][0]=(1-P)*K[A][0]+P*K[parseInt(A+1,10)][0];K[A][1]=(1-P)*K[A][1]+P*K[parseInt(A+1,10)][1];}}return [K[0][0],K[0][1]];};};(function(){var a=function(N,P,p,G){a.superclass.constructor.call(this,N,P,p,G);};a.NAME="ColorAnim";var K=YAHOO.util;YAHOO.extend(a,K.Anim);var n=a.superclass;var A=a.prototype;A.patterns.color=/color$/i;A.patterns.rgb=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i;A.patterns.hex=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;A.patterns.hex3=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;A.patterns.transparent=/^transparent|rgba\(0, 0, 0, 0\)$/;A.parseColor=function(P){if(P.length==3){return P;}var N=this.patterns.hex.exec(P);if(N&&N.length==4){return [parseInt(N[1],16),parseInt(N[2],16),parseInt(N[3],16)];}N=this.patterns.rgb.exec(P);if(N&&N.length==4){return [parseInt(N[1],10),parseInt(N[2],10),parseInt(N[3],10)];}N=this.patterns.hex3.exec(P);if(N&&N.length==4){return [parseInt(N[1]+N[1],16),parseInt(N[2]+N[2],16),parseInt(N[3]+N[3],16)];}return null;};A.getAttribute=function(P){var p=this.getEl();if(this.patterns.color.test(P)){var G=YAHOO.util.Dom.getStyle(p,P);if(this.patterns.transparent.test(G)){var N=p.parentNode;G=K.Dom.getStyle(N,P);while(N&&this.patterns.transparent.test(G)){N=N.parentNode;G=K.Dom.getStyle(N,P);if(N.tagName.toUpperCase()=="HTML"){G="#fff";}}}}else{G=n.getAttribute.call(this,P);}return G;};A.doMethod=function(N,O,p){var h;if(this.patterns.color.test(N)){h=[];for(var G=0,P=O.length;G<P;++G){h[G]=n.doMethod.call(this,N,O[G],p[G]);}h="rgb("+Math.floor(h[0])+","+Math.floor(h[1])+","+Math.floor(h[2])+")";}else{h=n.doMethod.call(this,N,O,p);}return h;};A.setRuntimeAttribute=function(N){n.setRuntimeAttribute.call(this,N);if(this.patterns.color.test(N)){var G=this.attributes;var O=this.parseColor(this.runtimeAttributes[N].start);var p=this.parseColor(this.runtimeAttributes[N].end);if(typeof G[N]["to"]==="undefined"&&typeof G[N]["by"]!=="undefined"){p=this.parseColor(G[N].by);for(var h=0,P=O.length;h<P;++h){p[h]=O[h]+p[h];}}this.runtimeAttributes[N].start=O;this.runtimeAttributes[N].end=p;}};K.ColorAnim=a;})();YAHOO.util.Easing={easeNone:function(A,a,n,K){return n*A/K+a;},easeIn:function(A,a,n,K){return n*(A/=K)*A+a;},easeOut:function(A,a,n,K){return -n*(A/=K)*(A-2)+a;},easeBoth:function(A,a,n,K){if((A/=K/2)<1){return n/2*A*A+a;}return -n/2*((--A)*(A-2)-1)+a;},easeInStrong:function(A,a,n,K){return n*(A/=K)*A*A*A+a;},easeOutStrong:function(A,a,n,K){return -n*((A=A/K-1)*A*A*A-1)+a;},easeBothStrong:function(A,a,n,K){if((A/=K/2)<1){return n/2*A*A*A*A+a;}return -n/2*((A-=2)*A*A*A-2)+a;},elasticIn:function(n,A,h,G,K,N){if(n==0){return A;}if((n/=G)==1){return A+h;}if(!N){N=G*0.3;}if(!K||K<Math.abs(h)){K=h;var P=N/4;}else{var P=N/(2*Math.PI)*Math.asin(h/K);}return -(K*Math.pow(2,10*(n-=1))*Math.sin((n*G-P)*(2*Math.PI)/N))+A;},elasticOut:function(n,A,h,G,K,N){if(n==0){return A;}if((n/=G)==1){return A+h;}if(!N){N=G*0.3;}if(!K||K<Math.abs(h)){K=h;var P=N/4;}else{var P=N/(2*Math.PI)*Math.asin(h/K);}return K*Math.pow(2,-10*n)*Math.sin((n*G-P)*(2*Math.PI)/N)+h+A;},elasticBoth:function(n,A,h,G,K,N){if(n==0){return A;}if((n/=G/2)==2){return A+h;}if(!N){N=G*(0.3*1.5);}if(!K||K<Math.abs(h)){K=h;var P=N/4;}else{var P=N/(2*Math.PI)*Math.asin(h/K);}if(n<1){return -0.5*(K*Math.pow(2,10*(n-=1))*Math.sin((n*G-P)*(2*Math.PI)/N))+A;}return K*Math.pow(2,-10*(n-=1))*Math.sin((n*G-P)*(2*Math.PI)/N)*0.5+h+A;},backIn:function(A,a,P,n,K){if(typeof K=="undefined"){K=1.70158;}return P*(A/=n)*A*((K+1)*A-K)+a;},backOut:function(A,a,P,n,K){if(typeof K=="undefined"){K=1.70158;}return P*((A=A/n-1)*A*((K+1)*A+K)+1)+a;},backBoth:function(A,a,P,n,K){if(typeof K=="undefined"){K=1.70158;}if((A/=n/2)<1){return P/2*(A*A*(((K*=(1.525))+1)*A-K))+a;}return P/2*((A-=2)*A*(((K*=(1.525))+1)*A+K)+2)+a;},bounceIn:function(A,a,n,K){return n-YAHOO.util.Easing.bounceOut(K-A,0,n,K)+a;},bounceOut:function(A,a,n,K){if((A/=K)<(1/2.75)){return n*(7.5625*A*A)+a;}else{if(A<(2/2.75)){return n*(7.5625*(A-=(1.5/2.75))*A+0.75)+a;}else{if(A<(2.5/2.75)){return n*(7.5625*(A-=(2.25/2.75))*A+0.9375)+a;}}}return n*(7.5625*(A-=(2.625/2.75))*A+0.984375)+a;},bounceBoth:function(A,a,n,K){if(A<K/2){return YAHOO.util.Easing.bounceIn(A*2,0,n,K)*0.5+a;}return YAHOO.util.Easing.bounceOut(A*2-K,0,n,K)*0.5+n*0.5+a;}};(function(){var a=function(G,p,h,O){if(G){a.superclass.constructor.call(this,G,p,h,O);}};a.NAME="Motion";var P=YAHOO.util;YAHOO.extend(a,P.ColorAnim);var N=a.superclass;var K=a.prototype;K.patterns.points=/^points$/i;K.setAttribute=function(p,h,G){if(this.patterns.points.test(p)){G=G||"px";N.setAttribute.call(this,"left",h[0],G);N.setAttribute.call(this,"top",h[1],G);}else{N.setAttribute.call(this,p,h,G);}};K.getAttribute=function(p){if(this.patterns.points.test(p)){var G=[N.getAttribute.call(this,"left"),N.getAttribute.call(this,"top")];}else{G=N.getAttribute.call(this,p);}return G;};K.doMethod=function(p,v,G){var O=null;if(this.patterns.points.test(p)){var h=this.method(this.currentFrame,0,100,this.totalFrames)/100;O=P.Bezier.getPosition(this.runtimeAttributes[p],h);}else{O=N.doMethod.call(this,p,v,G);}return O;};K.setRuntimeAttribute=function(C){if(this.patterns.points.test(C)){var G=this.getEl();var O=this.attributes;var p;var l=O["points"]["control"]||[];var h;var R,c;if(l.length>0&&!(l[0] instanceof Array)){l=[l];}else{var v=[];for(R=0,c=l.length;R<c;++R){v[R]=l[R];}l=v;}if(P.Dom.getStyle(G,"position")=="static"){P.Dom.setStyle(G,"position","relative");}if(n(O["points"]["from"])){P.Dom.setXY(G,O["points"]["from"]);}else{P.Dom.setXY(G,P.Dom.getXY(G));}p=this.getAttribute("points");if(n(O["points"]["to"])){h=A.call(this,O["points"]["to"],p);var j=P.Dom.getXY(this.getEl());for(R=0,c=l.length;R<c;++R){l[R]=A.call(this,l[R],p);}}else{if(n(O["points"]["by"])){h=[p[0]+O["points"]["by"][0],p[1]+O["points"]["by"][1]];for(R=0,c=l.length;R<c;++R){l[R]=[p[0]+l[R][0],p[1]+l[R][1]];}}}this.runtimeAttributes[C]=[p];if(l.length>0){this.runtimeAttributes[C]=this.runtimeAttributes[C].concat(l);}this.runtimeAttributes[C][this.runtimeAttributes[C].length]=h;}else{N.setRuntimeAttribute.call(this,C);}};var A=function(p,h){var G=P.Dom.getXY(this.getEl());p=[p[0]-G[0]+h[0],p[1]-G[1]+h[1]];return p;};var n=function(p){return (typeof p!=="undefined");};P.Motion=a;})();(function(){var n=function(N,P,p,G){if(N){n.superclass.constructor.call(this,N,P,p,G);}};n.NAME="Scroll";var A=YAHOO.util;YAHOO.extend(n,A.ColorAnim);var K=n.superclass;var a=n.prototype;a.doMethod=function(P,G,N){var p=null;if(P=="scroll"){p=[this.method(this.currentFrame,G[0],N[0]-G[0],this.totalFrames),this.method(this.currentFrame,G[1],N[1]-G[1],this.totalFrames)];}else{p=K.doMethod.call(this,P,G,N);}return p;};a.getAttribute=function(P){var p=null;var N=this.getEl();if(P=="scroll"){p=[N.scrollLeft,N.scrollTop];}else{p=K.getAttribute.call(this,P);}return p;};a.setAttribute=function(P,G,p){var N=this.getEl();if(P=="scroll"){N.scrollLeft=G[0];N.scrollTop=G[1];}else{K.setAttribute.call(this,P,G,p);}};A.Scroll=n;})();YAHOO.register("animation",YAHOO.util.Anim,{version:"2.5.1",build:"984"});yui=window.yui||{};yui.CustomEvent=function(P,U){this.type=P;this.scope=U||window;this.subscribers=[];if(yui["Event"]){yui.Event.regCE(this);}};yui.CustomEvent.prototype.subscribe=function(P,U){this.subscribers.push(new yui.Subscriber(P,U));};yui.CustomEvent.prototype.unsubscribe=function(o,P){for(var U=0;U<this.subscribers.length;++U){var G=this.subscribers[U];if(G&&G.contains(o,P)){this._delete(U);}}};yui.CustomEvent.prototype.fire=function(){for(var U=0;U<this.subscribers.length;++U){var P=this.subscribers[U];if(P){P.fn.call(this.scope,this.type,arguments,P.obj);}}};yui.CustomEvent.prototype.unsubscribeAll=function(){for(var U=0;U<this.subscribers.length;++U){this._delete(U);}};yui.CustomEvent.prototype._delete=function(U){var P=this.subscribers[U];if(P){delete P.fn;delete P.obj;}delete this.subscribers[U];};yui.Subscriber=function(P,U){this.fn=P;this.obj=U||null;};yui.Subscriber.prototype.contains=function(U,P){return (this.fn==U&&this.obj==P);};yui=window.yui||{};yui.Event=new function(){var U=this;this.loadComplete=false;this.listeners=[];this.delayedListeners=[];this.unloadListeners=[];this.customEvents=[];this.legacyEvents=[];this.legacyHandlers=[];this.EL=0;this.TYPE=1;this.FN=2;this.WFN=3;this.SCOPE=3;this.isSafari=(navigator.userAgent.match(/safari/gi));this.isIE=(!this.isSafari&&navigator.userAgent.match(/msie/gi));this.addListener=function(G,Z,C,Q){if(this._isValidCollection(G)){for(var l=0;l<G.length;++l){this.on(G[l],Z,C,Q);}return ;}else{if(typeof G=="string"){if(this.loadComplete){G=this.getEl(G);}else{this.delayedListeners[this.delayedListeners.length]=[G,Z,C,Q];return ;}}}if(!G){return ;}if("unload"==Z&&Q!==this){this.unloadListeners[this.unloadListeners.length]=[G,Z,C,Q];return ;}var j=function(J){return C.call(G,U.getEvent(J),Q);};var a=[G,Z,C,j];var o=this.listeners.length;this.listeners[o]=a;if(this.useLegacyEvent(G,Z)){var P=this.getLegacyIndex(G,Z);if(P==-1){P=this.legacyEvents.length;this.legacyEvents[P]=[G,Z,G["on"+Z]];this.legacyHandlers[P]=[];G["on"+Z]=function(J){U.fireLegacyEvent(U.getEvent(J),P);};}this.legacyHandlers[P].push(o);}else{if(G.addEventListener){G.addEventListener(Z,j,false);}else{if(G.attachEvent){G.attachEvent("on"+Z,j);}}}};this.on=this.addListener;this.fireLegacyEvent=function(Z,P){var j=true;var Q=U.legacyEvents[0];var o=U.legacyHandlers[P];for(i=0;i<o.length;++i){var l=o[i];if(l){var G=U.listeners[l][U.WFN].call(Q,Z);j=(j&&G);}}return j;};this.getLegacyIndex=function(o,j){for(var G=0;G<this.legacyEvents.length;++G){var P=this.legacyEvents[G];if(P&&P[0]==o&&P[1]==j){return G;}}return -1;};this.useLegacyEvent=function(P,G){return ((!P.addEventListener&&!P.attachEvent)||(G=="click"&&this.isSafari));};this.removeListener=function(Z,Q,j){if(typeof Z=="string"){Z=this.getEl(Z);}else{if(this._isValidCollection(Z)){for(var o=0;o<Z.length;++o){this.removeListener(Z[o],Q,j);}return ;}}var G=null;var P=this._getCacheIndex(Z,Q,j);if(P>=0){G=this.listeners[P];}if(!Z||!G){return false;}if(Z.removeEventListener){Z.removeEventListener(Q,G[this.WFN],false);}else{if(Z.detachEvent){Z.detachEvent("on"+Q,G[this.WFN]);}}delete this.listeners[P][this.WFN];delete this.listeners[P][this.FN];delete this.listeners[P];return true;};this.getTarget=function(o,P){var G=o.target||o.srcElement;if(P&&G&&"#text"==G.nodeName){return G.parentNode;}else{return G;}};this.getPageX=function(G){var P=G.pageX;if(!P&&0!==P){P=G.clientX||0;if(this.isIE){P+=this._getScrollLeft();}}return P;};this.getPageY=function(P){var G=P.pageY;if(!G&&0!==G){G=P.clientY||0;if(this.isIE){G+=this._getScrollTop();}}return G;};this.getRelatedTarget=function(G){var P=G.relatedTarget;if(!P){if(G.type=="mouseout"){P=G.toElement;}else{if(G.type=="mouseover"){P=G.fromElement;}}}return P;};this.getTime=function(G){if(!G.time){var P=new Date().getTime();try{G.time=P;}catch(o){return P;}}return G.time;};this.stopEvent=function(P){this.stopPropagation(P);this.preventDefault(P);};this.stopPropagation=function(P){if(P.stopPropagation){P.stopPropagation();}else{P.cancelBubble=true;}};this.preventDefault=function(P){if(P.preventDefault){P.preventDefault();}else{P.returnValue=false;}};this.getEvent=function(G){var P=G||window.event;if(!P){var o=this.getEvent.caller;while(o){P=o.arguments[0];if(P&&Event==P.constructor){break;}o=o.caller;}}return P;};this.getCharCode=function(P){return P.charCode||(P.type=="keypress")?P.keyCode:0;};this._getCacheIndex=function(j,Q,o){for(var G=0;G<this.listeners.length;++G){var P=this.listeners[G];if(P&&P[this.FN]==o&&P[this.EL]==j&&P[this.TYPE]==Q){return G;}}return -1;};this._isValidCollection=function(P){return (P&&P.length&&typeof P!="string"&&!P.alert&&!P.name&&!P.id&&typeof P[0]!="undefined");};this.elCache={};this.getEl=function(P){return document.getElementById(P);};this.clearCache=function(){for(i in this.elCache){delete this.elCache[i];}};this.regCE=function(P){this.customEvents.push(P);};this._load=function(P){U.loadComplete=true;};this._tryPreloadAttach=function(){var o=!this.loadComplete;for(var P=0;P<this.delayedListeners.length;++P){var j=this.delayedListeners[P];if(j){var G=this.getEl(j[this.EL]);if(G){this.on(G,j[this.TYPE],j[this.FN],j[this.SCOPE]);delete this.delayedListeners[P];}}}if(o){setTimeout("yui.Event._tryPreloadAttach()",50);}};this._unload=function(j,o){for(var G=0;G<o.unloadListeners.length;++G){var P=o.unloadListeners[G];if(P){P[o.FN](o.getEvent(j),P[o.SCOPE]);}}if(o.listeners&&o.listeners.length>0){for(G=0;G<o.listeners.length;++G){P=o.listeners[G];if(P){o.removeListener(P[o.EL],P[o.TYPE],P[o.FN]);}}o.clearCache();}for(G=0;G<o.customEvents.length;++G){o.customEvents[G].unsubscribeAll();delete o.customEvents[G];}for(G=0;G<o.legacyEvents.length;++G){delete o.legacyEvents[G][0];delete o.legacyEvents[G];}};this._getScrollLeft=function(){return this._getScroll()[1];};this._getScrollTop=function(){return this._getScroll()[0];};this._getScroll=function(){var P=document.documentElement;db=document.body;if(P&&P.scrollTop){return [P.scrollTop,P.scrollLeft];}else{if(db){return [db.scrollTop,db.scrollLeft];}else{return [0,0];}}};};if(document&&document.body){yui.Event._load();}else{yui.Event.on(window,"load",yui.Event._load,yui.Event);}yui.Event.on(window,"unload",yui.Event._unload,yui.Event);yui.Event._tryPreloadAttach();YAHOO.util.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:false,_use_default_post_header:true,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:true,_default_xhr_header:"XMLHttpRequest",_has_default_headers:true,_default_headers:{},_isFormSubmit:false,_isFileUpload:false,_formNode:null,_sFormData:null,_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,_submitElementValue:null,_hasSubmitListener:(function(){if(YAHOO.util.Event){YAHOO.util.Event.addListener(document,"click",function(P){var K=YAHOO.util.Event.getTarget(P);if(K.nodeName.toLowerCase()=="input"&&(K.type&&K.type.toLowerCase()=="submit")){YAHOO.util.Connect._submitElementValue=encodeURIComponent(K.name)+"="+encodeURIComponent(K.value);}});return true;}return false;})(),startEvent:new YAHOO.util.CustomEvent("start"),completeEvent:new YAHOO.util.CustomEvent("complete"),successEvent:new YAHOO.util.CustomEvent("success"),failureEvent:new YAHOO.util.CustomEvent("failure"),uploadEvent:new YAHOO.util.CustomEvent("upload"),abortEvent:new YAHOO.util.CustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:function(K){this._msxml_progid.unshift(K);},setDefaultPostHeader:function(K){if(typeof K=="string"){this._default_post_header=K;}else{if(typeof K=="boolean"){this._use_default_post_header=K;}}},setDefaultXhrHeader:function(K){if(typeof K=="string"){this._default_xhr_header=K;}else{this._use_default_xhr_header=K;}},setPollingInterval:function(K){if(typeof K=="number"&&isFinite(K)){this._polling_interval=K;}},createXhrObject:function(X){var g,K;try{K=new XMLHttpRequest();g={conn:K,tId:X};}catch(N){for(var P=0;P<this._msxml_progid.length;++P){try{K=new ActiveXObject(this._msxml_progid[P]);g={conn:K,tId:X};break;}catch(N){}}}finally{return g;}},getConnectionObject:function(K){var N;var g=this._transaction_id;try{if(!K){N=this.createXhrObject(g);}else{N={};N.tId=g;N.isUpload=true;}if(N){this._transaction_id++;}}catch(P){}finally{return N;}},asyncRequest:function(z,N,X,K){var g=(this._isFileUpload)?this.getConnectionObject(true):this.getConnectionObject();var P=(X&&X.argument)?X.argument:null;if(!g){return null;}else{if(X&&X.customevents){this.initCustomEvents(g,X);}if(this._isFormSubmit){if(this._isFileUpload){this.uploadFile(g,X,N,K);return g;}if(z.toUpperCase()=="GET"){if(this._sFormData.length!==0){N+=((N.indexOf("?")==-1)?"?":"&")+this._sFormData;}}else{if(z.toUpperCase()=="POST"){K=K?this._sFormData+"&"+K:this._sFormData;}}}if(z.toUpperCase()=="GET"&&(X&&X.cache===false)){N+=((N.indexOf("?")==-1)?"?":"&")+"rnd="+new Date().valueOf().toString();}g.conn.open(z,N,true);if(this._use_default_xhr_header){if(!this._default_headers["X-Requested-With"]){this.initHeader("X-Requested-With",this._default_xhr_header,true);}}if((z.toUpperCase()=="POST"&&this._use_default_post_header)&&this._isFormSubmit===false){this.initHeader("Content-Type",this._default_post_header);}if(this._has_default_headers||this._has_http_headers){this.setHeader(g);}this.handleReadyState(g,X);g.conn.send(K||"");if(this._isFormSubmit===true){this.resetFormState();}this.startEvent.fire(g,P);if(g.startEvent){g.startEvent.fire(g,P);}return g;}},initCustomEvents:function(K,N){for(var P in N.customevents){if(this._customEvents[P][0]){K[this._customEvents[P][0]]=new YAHOO.util.CustomEvent(this._customEvents[P][1],(N.scope)?N.scope:null);K[this._customEvents[P][0]].subscribe(N.customevents[P]);}}},handleReadyState:function(N,g){var P=this;var K=(g&&g.argument)?g.argument:null;if(g&&g.timeout){this._timeOut[N.tId]=window.setTimeout(function(){P.abort(N,g,true);},g.timeout);}this._poll[N.tId]=window.setInterval(function(){if(N.conn&&N.conn.readyState===4){window.clearInterval(P._poll[N.tId]);delete P._poll[N.tId];if(g&&g.timeout){window.clearTimeout(P._timeOut[N.tId]);delete P._timeOut[N.tId];}P.completeEvent.fire(N,K);if(N.completeEvent){N.completeEvent.fire(N,K);}P.handleTransactionResponse(N,g);}},this._polling_interval);},handleTransactionResponse:function(z,y,K){var g,N;var P=(y&&y.argument)?y.argument:null;try{if(z.conn.status!==undefined&&z.conn.status!==0){g=z.conn.status;}else{g=13030;}}catch(X){g=13030;}if(g>=200&&g<300||g===1223){N=this.createResponseObject(z,P);if(y&&y.success){if(!y.scope){y.success(N);}else{y.success.apply(y.scope,[N]);}}this.successEvent.fire(N);if(z.successEvent){z.successEvent.fire(N);}}else{switch(g){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:N=this.createExceptionObject(z.tId,P,(K?K:false));if(y&&y.failure){if(!y.scope){y.failure(N);}else{y.failure.apply(y.scope,[N]);}}break;default:N=this.createResponseObject(z,P);if(y&&y.failure){if(!y.scope){y.failure(N);}else{y.failure.apply(y.scope,[N]);}}}this.failureEvent.fire(N);if(z.failureEvent){z.failureEvent.fire(N);}}this.releaseObject(z);N=null;},createResponseObject:function(K,y){var g={};var r={};try{var N=K.conn.getAllResponseHeaders();var z=N.split("\n");for(var X=0;X<z.length;X++){var P=z[X].indexOf(":");if(P!=-1){r[z[X].substring(0,P)]=z[X].substring(P+2);}}}catch(s){}g.tId=K.tId;g.status=(K.conn.status==1223)?204:K.conn.status;g.statusText=(K.conn.status==1223)?"No Content":K.conn.statusText;g.getResponseHeader=r;g.getAllResponseHeaders=N;g.responseText=K.conn.responseText;g.responseXML=K.conn.responseXML;if(y){g.argument=y;}return g;},createExceptionObject:function(e,g,K){var z=0;var y="communication failure";var N=-1;var P="transaction aborted";var X={};X.tId=e;if(K){X.status=N;X.statusText=P;}else{X.status=z;X.statusText=y;}if(g){X.argument=g;}return X;},initHeader:function(K,g,N){var P=(N)?this._default_headers:this._http_headers;P[K]=g;if(N){this._has_default_headers=true;}else{this._has_http_headers=true;}},setHeader:function(K){if(this._has_default_headers){for(var P in this._default_headers){if(YAHOO.lang.hasOwnProperty(this._default_headers,P)){K.conn.setRequestHeader(P,this._default_headers[P]);}}}if(this._has_http_headers){for(var P in this._http_headers){if(YAHOO.lang.hasOwnProperty(this._http_headers,P)){K.conn.setRequestHeader(P,this._http_headers[P]);}}delete this._http_headers;this._http_headers={};this._has_http_headers=false;}},resetDefaultHeaders:function(){delete this._default_headers;this._default_headers={};this._has_default_headers=false;},setForm:function(W,X,P){this.resetFormState();var r;if(typeof W=="string"){r=(document.getElementById(W)||document.forms[W]);}else{if(typeof W=="object"){r=W;}else{return ;}}if(X){var z=this.createFrame((window.location.href.toLowerCase().indexOf("https")===0||P)?true:false);this._isFormSubmit=true;this._isFileUpload=true;this._formNode=r;return ;}var K,s,y,b;var e=false;for(var g=0;g<r.elements.length;g++){K=r.elements[g];b=K.disabled;s=K.name;y=K.value;if(!b&&s){switch(K.type){case "select-one":case "select-multiple":for(var N=0;N<K.options.length;N++){if(K.options[N].selected){if(window.ActiveXObject){this._sFormData+=encodeURIComponent(s)+"="+encodeURIComponent(K.options[N].attributes["value"].specified?K.options[N].value:K.options[N].text)+"&";}else{this._sFormData+=encodeURIComponent(s)+"="+encodeURIComponent(K.options[N].hasAttribute("value")?K.options[N].value:K.options[N].text)+"&";}}}break;case "radio":case "checkbox":if(K.checked){this._sFormData+=encodeURIComponent(s)+"="+encodeURIComponent(y)+"&";}break;case "file":case undefined:case "reset":case "button":break;case "submit":if(e===false){if(this._hasSubmitListener&&this._submitElementValue){this._sFormData+=this._submitElementValue+"&";}else{this._sFormData+=encodeURIComponent(s)+"="+encodeURIComponent(y)+"&";}e=true;}break;default:this._sFormData+=encodeURIComponent(s)+"="+encodeURIComponent(y)+"&";}}}this._isFormSubmit=true;this._sFormData=this._sFormData.substr(0,this._sFormData.length-1);this.initHeader("Content-Type",this._default_form_header);return this._sFormData;},resetFormState:function(){this._isFormSubmit=false;this._isFileUpload=false;this._formNode=null;this._sFormData="";},createFrame:function(K){var P="yuiIO"+this._transaction_id;var N;if(window.ActiveXObject){N=document.createElement("<iframe id=\""+P+"\" name=\""+P+"\" />");if(typeof K=="boolean"){N.src="javascript:false";}}else{N=document.createElement("iframe");N.id=P;N.name=P;}N.style.position="absolute";N.style.top="-1000px";N.style.left="-1000px";document.body.appendChild(N);},appendPostData:function(K){var g=[];var P=K.split("&");for(var N=0;N<P.length;N++){var X=P[N].indexOf("=");if(X!=-1){g[N]=document.createElement("input");g[N].type="hidden";g[N].name=P[N].substring(0,X);g[N].value=P[N].substring(X+1);this._formNode.appendChild(g[N]);}}return g;},uploadFile:function(g,M,X,N){var Z=this;var e="yuiIO"+g.tId;var s="multipart/form-data";var W=document.getElementById(e);var r=(M&&M.argument)?M.argument:null;var P={action:this._formNode.getAttribute("action"),method:this._formNode.getAttribute("method"),target:this._formNode.getAttribute("target")};this._formNode.setAttribute("action",X);this._formNode.setAttribute("method","POST");this._formNode.setAttribute("target",e);if(this._formNode.encoding){this._formNode.setAttribute("encoding",s);}else{this._formNode.setAttribute("enctype",s);}if(N){var b=this.appendPostData(N);}this._formNode.submit();this.startEvent.fire(g,r);if(g.startEvent){g.startEvent.fire(g,r);}if(M&&M.timeout){this._timeOut[g.tId]=window.setTimeout(function(){Z.abort(g,M,true);},M.timeout);}if(b&&b.length>0){for(var y=0;y<b.length;y++){this._formNode.removeChild(b[y]);}}for(var K in P){if(YAHOO.lang.hasOwnProperty(P,K)){if(P[K]){this._formNode.setAttribute(K,P[K]);}else{this._formNode.removeAttribute(K);}}}this.resetFormState();var z=function(){if(M&&M.timeout){window.clearTimeout(Z._timeOut[g.tId]);delete Z._timeOut[g.tId];}Z.completeEvent.fire(g,r);if(g.completeEvent){g.completeEvent.fire(g,r);}var u={};u.tId=g.tId;u.argument=M.argument;try{u.responseText=W.contentWindow.document.body?W.contentWindow.document.body.innerHTML:W.contentWindow.document.documentElement.textContent;u.responseXML=W.contentWindow.document.XMLDocument?W.contentWindow.document.XMLDocument:W.contentWindow.document;}catch(J){}if(M&&M.upload){if(!M.scope){M.upload(u);}else{M.upload.apply(M.scope,[u]);}}Z.uploadEvent.fire(u);if(g.uploadEvent){g.uploadEvent.fire(u);}YAHOO.util.Event.removeListener(W,"load",z);setTimeout(function(){document.body.removeChild(W);Z.releaseObject(g);},100);};YAHOO.util.Event.addListener(W,"load",z);},abort:function(X,y,K){var g;var P=(y&&y.argument)?y.argument:null;if(X&&X.conn){if(this.isCallInProgress(X)){X.conn.abort();window.clearInterval(this._poll[X.tId]);delete this._poll[X.tId];if(K){window.clearTimeout(this._timeOut[X.tId]);delete this._timeOut[X.tId];}g=true;}}else{if(X&&X.isUpload===true){var N="yuiIO"+X.tId;var z=document.getElementById(N);if(z){YAHOO.util.Event.removeListener(z,"load");document.body.removeChild(z);if(K){window.clearTimeout(this._timeOut[X.tId]);delete this._timeOut[X.tId];}g=true;}}else{g=false;}}if(g===true){this.abortEvent.fire(X,P);if(X.abortEvent){X.abortEvent.fire(X,P);}this.handleTransactionResponse(X,y,true);}return g;},isCallInProgress:function(P){if(P&&P.conn){return P.conn.readyState!==4&&P.conn.readyState!==0;}else{if(P&&P.isUpload===true){var K="yuiIO"+P.tId;return document.getElementById(K)?true:false;}else{return false;}}},releaseObject:function(K){if(K&&K.conn){K.conn=null;K=null;}}};YAHOO.register("connection",YAHOO.util.Connect,{version:"2.5.1",build:"984"});YAHOO.util.Get=function(){var W={},g=0,y=0,Q=false,i=YAHOO.env.ua,D=YAHOO.lang;var J=function(C,x,M){var a=M||window,m=a.document,N=m.createElement(C);for(var l in x){if(x[l]&&YAHOO.lang.hasOwnProperty(x,l)){N.setAttribute(l,x[l]);}}return N;};var c=function(x,w,l){var a=l||"utf-8";return J("link",{"id":"yui__dyn_"+(y++),"type":"text/css","charset":a,"rel":"stylesheet","href":x},w);};var A=function(x,w,l){var a=l||"utf-8";return J("script",{"id":"yui__dyn_"+(y++),"type":"text/javascript","charset":a,"src":x},w);};var u=function(x,w){return {tId:x.tId,win:x.win,data:x.data,nodes:x.nodes,msg:w,purge:function(){P(this.tId);}};};var B=function(x,l){var w=W[l],a=(D.isString(x))?w.win.document.getElementById(x):x;if(!a){r(l,"target node not found: "+x);}return a;};var r=function(l,a){var x=W[l];if(x.onFailure){var w=x.scope||x.win;x.onFailure.call(w,u(x,a));}};var R=function(l){var x=W[l];x.finished=true;if(x.aborted){var a="transaction "+l+" was aborted";r(l,a);return ;}if(x.onSuccess){var w=x.scope||x.win;x.onSuccess.call(w,u(x));}};var T=function(l,N){var a=W[l];if(a.aborted){var M="transaction "+l+" was aborted";r(l,M);return ;}if(N){a.url.shift();if(a.varName){a.varName.shift();}}else{a.url=(D.isString(a.url))?[a.url]:a.url;if(a.varName){a.varName=(D.isString(a.varName))?[a.varName]:a.varName;}}var E=a.win,o=E.document,e=o.getElementsByTagName("head")[0],C;if(a.url.length===0){if(a.type==="script"&&i.webkit&&i.webkit<420&&!a.finalpass&&!a.varName){var m=A(null,a.win,a.charset);m.innerHTML="YAHOO.util.Get._finalize(\""+l+"\");";a.nodes.push(m);e.appendChild(m);}else{R(l);}return ;}var x=a.url[0];if(a.type==="script"){C=A(x,E,a.charset);}else{C=c(x,E,a.charset);}G(a.type,C,l,x,E,a.url.length);a.nodes.push(C);if(a.insertBefore){var O=B(a.insertBefore,l);if(O){O.parentNode.insertBefore(C,O);}}else{e.appendChild(C);}if((i.webkit||i.gecko)&&a.type==="css"){T(l,x);}};var H=function(){if(Q){return ;}Q=true;for(var x in W){var w=W[x];if(w.autopurge&&w.finished){P(w.tId);delete W[x];}}Q=false;};var P=function(e){var M=W[e];if(M){var N=M.nodes,x=N.length,m=M.win.document,C=m.getElementsByTagName("head")[0];if(M.insertBefore){var a=B(M.insertBefore,e);if(a){C=a.parentNode;}}for(var w=0;w<x;w=w+1){C.removeChild(N[w]);}}M.nodes=[];};var j=function(w,x,a){var C="q"+(g++);a=a||{};if(g%YAHOO.util.Get.PURGE_THRESH===0){H();}W[C]=D.merge(a,{tId:C,type:w,url:x,finished:false,nodes:[]});var l=W[C];l.win=l.win||window;l.scope=l.scope||l.win;l.autopurge=("autopurge" in l)?l.autopurge:(w==="script")?true:false;D.later(0,l,T,C);return {tId:C};};var G=function(o,C,l,w,M,m,e){var N=e||T;if(i.ie){C.onreadystatechange=function(){var E=this.readyState;if("loaded"===E||"complete"===E){N(l,w);}};}else{if(i.webkit){if(o==="script"){if(i.webkit>=420){C.addEventListener("load",function(){N(l,w);});}else{var x=W[l];if(x.varName){var a=YAHOO.util.Get.POLL_FREQ;x.maxattempts=YAHOO.util.Get.TIMEOUT/a;x.attempts=0;x._cache=x.varName[0].split(".");x.timer=D.later(a,x,function(p){var z=this._cache,O=z.length,E=this.win,L;for(L=0;L<O;L=L+1){E=E[z[L]];if(!E){this.attempts++;if(this.attempts++>this.maxattempts){var k="Over retry limit, giving up";x.timer.cancel();r(l,k);}else{}return ;}}x.timer.cancel();N(l,w);},null,true);}else{D.later(YAHOO.util.Get.POLL_FREQ,null,N,[l,w]);}}}}else{C.onload=function(){N(l,w);};}}};return {POLL_FREQ:10,PURGE_THRESH:20,TIMEOUT:2000,_finalize:function(x){D.later(0,null,R,x);},abort:function(w){var a=(D.isString(w))?w:w.tId;var x=W[a];if(x){x.aborted=true;}},script:function(x,w){return j("script",x,w);},css:function(x,w){return j("css",x,w);}};}();YAHOO.register("get",YAHOO.util.Get,{version:"2.5.1",build:"984"});var Y=YAHOO;Y.U=Y.util;Y.D=Y.util.Dom;Y.E=Y.util.Event;var snag=1;F._eb={eb_go_go_go:function(){this._eb_listeners=[];F._ebA.push(this)},eb_broadcast:function(){var E=false;if(E){var G=arguments.shift()}else{var D=[];for(var B=0;B<arguments.length;B++){D[B]=arguments[B]}var G=D.shift()}var C=F.array_copy(this._eb_listeners);var A=C.length;for(var B=0;B<A;++B){if(C[B][G]){C[B][G].apply(C[B],D)}else{}}},eb_add:function(A){this.eb_remove(A);this._eb_listeners.push(A);return(true)},eb_remove:function(C){var B=this._eb_listeners;var A=B.length;while(A--){if(B[A]==C){B.splice(A,1);return(true)}}return(false)},eb_remove_all:function(){this._eb_listeners=[]}};F.decorate(F,F._eb).eb_go_go_go();F.toggleClass=function(C,B){var A=_ge(C);if(Y.U.Dom.hasClass(A,B)){Y.U.Dom.removeClass(A,B)}else{Y.U.Dom.addClass(A,B)}return false};F.prepare_for_insertion=function(A){if(!A.parentNode){return A}if(F.is_ie){return A}return A.parentNode.removeChild(A)};F.get_local_X=function(A){if(A.style.left){return _pi(A.style.left)}return A.offsetLeft};F.get_local_Y=function(A){if(A.style.top){return _pi(A.style.top)}return A.offsetTop};F._paginator={paginator_go_go_go:function(){F.decorate(this,F._eb).eb_go_go_go();this.paginator_hide();this.pages=0;this.page=0;this.side_slots=2;this.middle_slots=7;this.pagesA=[];this.total_slots=(this.side_slots*2)+this.middle_slots;var A='<nobr><a id="paginator_link_prev" href="" class="Prev" onclick="_ge(\''+this.id+'\').paginator_go_prev(); this.blur(); return false;">&lt; Prev</a><a id="paginator_link_1" href="" onclick="_ge(\''+this.id+'\').paginator_go_page(this.page); this.blur(); return false;"></a><a id="paginator_link_2" href="" onclick="_ge(\''+this.id+'\').paginator_go_page(this.page); this.blur(); return false;"></a><span id="paginator_break_1" class="break">...</span><a id="paginator_link_3" href="" onclick="_ge(\''+this.id+'\').paginator_go_page(this.page); this.blur(); return false;"></a><a id="paginator_link_4" href="" onclick="_ge(\''+this.id+'\').paginator_go_page(this.page); this.blur(); return false;"></a><a id="paginator_link_5" href="" onclick="_ge(\''+this.id+'\').paginator_go_page(this.page); this.blur(); return false;"></a><a id="paginator_link_6" href="" onclick="_ge(\''+this.id+'\').paginator_go_page(this.page); this.blur(); return false;"></a><a id="paginator_link_7" href="" onclick="_ge(\''+this.id+'\').paginator_go_page(this.page); this.blur(); return false;"></a><a id="paginator_link_8" href="" onclick="_ge(\''+this.id+'\').paginator_go_page(this.page); this.blur(); return false;"></a><a id="paginator_link_9" href="" onclick="_ge(\''+this.id+'\').paginator_go_page(this.page); this.blur(); return false;"></a><span id="paginator_break_2" class="break">...</span><a id="paginator_link_10" href="" onclick="_ge(\''+this.id+'\').paginator_go_page(this.page); this.blur(); return false;"></a><a id="paginator_link_11" href="" onclick="_ge(\''+this.id+'\').paginator_go_page(this.page); this.blur(); return false;"></a><a id="paginator_link_next" href="" class="Next" onclick="_ge(\''+this.id+"').paginator_go_next(); this.blur(); return false;\">Next &gt;</a></nobr>";this.innerHTML=A;this.paginator_get_going()},paginator_place:function(){},paginator_get_going:function(G,H){if(G==undefined||H==undefined){return }if(H<2){this.paginator_hide();return }this.pages=H;this.page=G;writeDebug("paginator_get_going pages:"+this.pages+" page:"+this.page);this.pagesA=[];var D=(this.total_slots-1)/2;var E=this.page-(D);E=Math.max(1,E);var C=E+this.total_slots-1;if(C>this.pages){E=E-(C-this.pages)}C=Math.min(this.pages,C);writeDebug("first_page:"+E+" page:"+this.page+" last_page:"+C);for(var B=E;B<=C;B++){this.pagesA.push(B)}for(var B=1;B<=this.side_slots;B++){if(this.pagesA[B-1]>0){this.pagesA[B-1]=B}}for(var B=1;B<=this.side_slots;B++){var A=this.pagesA.length-B;this.pagesA[A]=this.pages-B+1}writeDebug(this.pagesA.join(","));this.paginator_draw()},paginator_draw:function(){this.paginator_hide_break(1);this.paginator_hide_break(2);for(var B=1;B<=this.total_slots;B++){this.paginator_hide_link(B)}var A=0;for(var B=0;B<this.pagesA.length;B++){var C=this.pagesA[B];if(C<1){continue}A++;this.paginator_show_link(A,C);if(A==2){if(this.pagesA[B+1]&&this.pagesA[B+1]>C+1){this.paginator_show_break(1)}}if(A==this.total_slots-2){if(this.pagesA[B+1]&&this.pagesA[B+1]>C+1){this.paginator_show_break(2)}}}if(this.page==1){_ge("paginator_link_prev").className="AtStart"}else{_ge("paginator_link_prev").className="Prev"}if(this.page==this.pages){_ge("paginator_link_next").className="AtEnd"}else{_ge("paginator_link_next").className="Next"}this.paginator_show()},paginator_go_prev:function(){var A=this.page-1;this.paginator_go_page(A)},paginator_go_next:function(){var A=this.page+1;this.paginator_go_page(A)},paginator_go_page:function(A){A=Math.min(this.pages,Math.max(1,A));if(A!=this.page){this.page=A;this.paginator_draw();this.eb_broadcast("on_paginator_go_page",this.page)}},paginator_hide:function(){this.style.display="none"},paginator_show:function(){if(this.style.display!="block"){this.style.visibility="hidden"}this.style.display="block";this.paginator_place();this.style.visibility="visible"},paginator_hide_link:function(A){_ge("paginator_link_"+A).style.display="none"},paginator_show_link:function(A,C){var B=_ge("paginator_link_"+A);if(C!=undefined){B.page=C}B.innerHTML=B.page;B.className=(B.page==this.page)?"this-page":"";B.style.display="inline"},paginator_hide_break:function(A){_ge("paginator_break_"+A).style.display="none"},paginator_show_break:function(A){_ge("paginator_break_"+A).style.display="inline"}};F._carrot=new Object();F._carrot.carrot_go_go_go=function(H,G,C,I){if(this.childNodes&&this.childNodes[0]){var D=this.childNodes[0].src}else{var D=this.src}var B=D.split("/");var J=B[B.length-1];var B=J.split(".");var E=B[0].substr().replace("_closed","").replace("_open_down","").replace("_open_up","");this.carrot_open_img={};if(H=="up"){this.carrot_open_img.src=_images_root+"/"+E+"_open_up.gif"}else{this.carrot_open_img.src=_images_root+"/"+E+"_open_down.gif"}this.carrot_closed_img={};this.carrot_closed_img.src=_images_root+"/"+E+"_closed.gif";F.preload_images(this.carrot_open_img.src,this.carrot_closed_img.src);this.carrot_is_open=(G)?1:0;if(this.childNodes&&this.childNodes[1]){if(this.carrot_is_open){this.carrot_open_text=(C)?C:this.childNodes[1].innerHTML;this.carrot_closed_text=(I)?I:this.carrot_open_text}else{this.carrot_closed_text=(I)?I:this.childNodes[1].innerHTML;this.carrot_open_text=(C)?C:this.carrot_closed_text}}this.style.cursor=(F.is_ie)?"hand":"pointer";this.onclick_default=(this.onclick)?this.onclick:function(){};this.onclick=this.carrot_onclick;if(this.carrot_is_open){if(this.childNodes&&this.childNodes[0]){this.childNodes[0].src=this.carrot_open_img.src;if(this.childNodes[1]){this.childNodes[1].innerHTML=this.carrot_open_text}}else{this.src=this.carrot_open_img.src}}else{if(this.childNodes&&this.childNodes[0]){this.childNodes[0].src=this.carrot_closed_img.src;if(this.childNodes[1]){this.childNodes[1].innerHTML=this.carrot_closed_text}}else{this.src=this.carrot_closed_img.src}}};F._carrot.carrot_onclick=function(A){if(this.carrot_is_open){this.carrot_close()}else{this.carrot_open()}};F._carrot.carrot_open=function(){this.onclick_default();this.carrot_is_open=1;if(this.childNodes&&this.childNodes[0]){this.childNodes[0].src=this.carrot_open_img.src;if(this.childNodes[1]){this.childNodes[1].innerHTML=this.carrot_open_text}}else{this.src=this.carrot_open_img.src}};F._carrot.carrot_close=function(){this.onclick_default();this.carrot_is_open=0;if(this.childNodes&&this.childNodes[0]){this.childNodes[0].src=this.carrot_closed_img.src;if(this.childNodes[1]){this.childNodes[1].innerHTML=this.carrot_closed_text}}else{this.src=this.carrot_closed_img.src}};F._shadow=new Object();F._shadow.shadow_go_go_go=function(C,D,B){this.shadow_use_local_coords=(B!=document.body);this.shadow_for_id=C;this.style.zIndex=D;this.style.display="none";this.style.position="absolute";this.shadow_height_plus=-14;this.shadow_width_plus=-14;this.shadow_x_plus=-0;this.shadow_y_plus=-0;if(navigator.userAgent.match(/msie 5/i)||navigator.userAgent.match(/msie 6/i)){var A='<table class="shadow_table" cellpadding="0" cellspacing="0" border="0" style="padding:0px;"><tr><td width="11"><img class="trans_png" width="11" height="11" src="'+_images_root+'/tc_white_shadow_tl.png"></td><td id="'+this.id+'_width_controller"><img class="trans_png" width="100%" height="11" src="'+_images_root+'/tc_white_shadow_t.png"></td><td width="11"><img class="trans_png" width="11" height="11" src="'+_images_root+'/tc_white_shadow_tr.png"></td></tr><tr><td height="30" id="'+this.id+'_height_controller"><img class="trans_png" width="11" height="100%" src="'+_images_root+'/tc_white_shadow_l.png"></td><td></td><td><img class="trans_png" width="11" height="100%" src="'+_images_root+'/tc_white_shadow_r.png"></td></tr><tr><td><img class="trans_png" width="11" height="11" src="'+_images_root+'/tc_white_shadow_bl.png"></td><td><img class="trans_png" width="100%" height="11" src="'+_images_root+'/tc_white_shadow_b.png"></td><td><img class="trans_png" width="11" height="11" src="'+_images_root+'/tc_white_shadow_br.png"></td></tr></table>'}else{var A='<table class="shadow_table" cellpadding="0" cellspacing="0" border="0" style="padding:0px;"><tr><td width="11"><img width="11" height="11" src="'+_images_root+'/spaceout.gif" class="shadow_sprite shadow_tl"></td><td id="'+this.id+'_width_controller"><img width="100%" height="11" src="'+_images_root+'/spaceout.gif" class="shadow_sprite shadow_t"></td><td width="11"><img width="11" height="11" src="'+_images_root+'/spaceout.gif" class="shadow_sprite shadow_tr"></td></tr><tr><td height="30" id="'+this.id+'_height_controller"><img width="11" height="100%" src="'+_images_root+'/spaceout.gif" class="shadow_sprite shadow_l"></td><td></td><td><img width="11" height="100%" src="'+_images_root+'/spaceout.gif" class="shadow_sprite shadow_r"></td></tr><tr><td><img width="11" height="11" src="'+_images_root+'/spaceout.gif" class="shadow_sprite shadow_bl"></td><td><img width="100%" height="11" src="'+_images_root+'/spaceout.gif" class="shadow_sprite shadow_b"></td><td><img width="11" height="11" src="'+_images_root+'/spaceout.gif" class="shadow_sprite shadow_br"></td></tr></table>'}this.innerHTML=A};F._shadow.shadow_size_and_place=function(){var D=_ge(this.shadow_for_id);if(this.shadow_use_local_coords){var A=F.get_local_X(D);var E=F.get_local_Y(D)}else{var A=Y.U.Dom.getX(D);var E=Y.U.Dom.getY(D)}if(A==undefined){return }A+=this.shadow_x_plus;E+=this.shadow_y_plus;this.style.left=A+"px";this.style.top=E+"px";var B=((D.offsetWidth)+this.shadow_width_plus);if(B<0){B=0}var C=((D.offsetHeight)+this.shadow_height_plus);if(C<0){C=0}_ge(this.id+"_width_controller").style.width=B+"px";_ge(this.id+"_height_controller").style.height=C+"px"};F._shadow.shadow_show=function(){this.style.display="block"};F._shadow.shadow_hide=function(){this.style.display="none"};F.eb_add({window_onload_dom:function(){var D=3450;var G=1111;var E=_ge("e_"+(D+G+2));var C=_ge("e_"+(D+G+3));var B=_ge("e_"+(D+G+4));var A=_ge("e_"+(D+G+5));if(E||C||B||A){F.API.callMethod("flickr.people.getMagicEmail",{user_id:global_nsid},{flickr_people_getMagicEmail_onLoad:function(J,I){if(J){var H=I.documentElement.getElementsByTagName("user")[0].getAttribute("magic_email");if(E){E.href="mailto:"+H+"@photos.flickr.com";E.innerHTML=H+"@photos.flickr.com"}if(C){C.href="mailto:"+H+"2blog@photos.flickr.com";C.innerHTML=H+"2blog@photos.flickr.com"}if(B){B.href="mailto:"+H+"@photos.flickr.com";B.innerHTML=H+"@photos.flickr.com"}if(A){A.href="mailto:"+H+"2blog@photos.flickr.com";A.innerHTML=H+"2blog@photos.flickr.com"}}}})}}});F.set_png_bg=function(B,D,E,A){var I=(navigator.userAgent.match(/msie 6/i));if(!I){if(typeof B.setStyle!="undefined"){B.setStyle(D,E)}else{YAHOO.util.Dom.setStyle(B,D,E)}}else{var C=null;var H=(typeof A=="undefined"?"scale":A);if(E.indexOf("url(")!=-1){C=E.substr(E.indexOf("(")+1);C=C.substr(0,C.lastIndexOf(")"))}else{C=E}if(typeof B.setStyle!="undefined"){B.setStyle("filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+C+"',sizingMethod='"+H+"')")}else{try{B.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+C+"',sizingMethod='"+H+"')"}catch(G){YAHOO.util.Dom.setStyle(B,D,E);return false}}}};F.find_parent_node=function(A){if(!A||!A.parentNode){return false}A=A.parentNode;while(A.parentNode&&A.parentNode.nodeType!=1){A=A.parentNode}return(A.nodeType==1?A:null)};F.find_parent_node_by_name=function(A,B){if(!A||!A.parentNode||!B){return false}B=B.toLowerCase();A=A.parentNode;while(A.nodeName.toLowerCase()!=B&&A.parentNode){A=A.parentNode}return(A.nodeName.toLowerCase()==B?A:null)};F.find_parent_node_by_class_name=function(B,A){if(!B||!B.parentNode||!A){return false}B=B.parentNode;while(!Y.D.hasClass(B,A)&&B.parentNode){B=B.parentNode}return(Y.D.hasClass(B,A)?B:null)};F.is_child_of=function(A,B){if(!A||!B){return false}while(A.parentNode&&A!=B){A=A.parentNode}return(A==B)};function woe_location_obj(E,J,H,B,K,D,G,A,C,I){this.id=E;this.title=J;this.sub_title=H;this.relevance=B;this.bbox=K;this.precision=D;this.lat=G;this.lon=A;this.place_url=C;this.place_disambiguate=I}F.do_explore_location_search=function(){if(!_ge("explore_loc_search_div")){var C=document.createElement("div");C.id="explore_loc_search_div";document.body.appendChild(C);var A="explore";F.decorate(C,F._loc_search_div).div_go_go_go(A)}try{_ge("explore_loc_search_div").div_do_loc_search()}catch(B){writeDebug(B)}return false};F.do_places_world_location_search=function(){var E=_ge("txt_search_for");var D=_ge("txt_taken_in");var C=false;if(E.value==""){C=true;E.focus();E.value=places.defaults.search_for;E.select()}if(D.value==""||D.value==places.defaults.taken_in){C=true;D.focus();D.value=places.defaults.taken_in;D.select()}if(C){return false}if(!_ge("explore_loc_search_div")){var G=document.createElement("div");G.id="explore_loc_search_div";document.body.appendChild(G);var A="places_world";F.decorate(G,F._loc_search_div).div_go_go_go(A)}try{_ge("explore_loc_search_div").div_do_loc_search()}catch(B){writeDebug(B)}return false};F._loc_search_div={provider_name:(_qs_args.provider_name)?_qs_args.provider_name:"woe"};F._loc_search_div.div_go_go_go=function(D){this.page_type=D;this.input_id=(this.page_type=="org")?"loc_search_input":(this.page_type=="explore")?"exploreMapSearch":(this.page_type=="places_world")?"txt_taken_in":"header_search_q";this.logged_last=0;this.last_source_id=null;this.last_search_term=null;this.setLocation_geo_point=null;this.setLocation_source_id=null;this.setLocation_search_term=null;var C=_ge(this.input_id);this.style.display="none";F.eb_add(this);this.locations=[];this.div_show_all=0;this.current_location_index=-1;var A=document.createElement("div");A.id="loc_search_inner_div";A.style.width="300px";A.style.border="0px solid black";this.appendChild(A);var G=document.createElement("div");G.id="loc_search_header_div";G.className="Pulser";G.style.position="absolute";G.style.top="10px";G.style.left="10px";G.style.height="20px";G.style.width="30px";A.appendChild(G);var G=document.createElement("div");G.id="loc_search_header_msg_div";G.style.margin="12px 15px 10px 38px";G.style.fontWeight="normal";G.style.fontFamily="arial";G.style.fontSize="12px";G.style.color="#434343";A.appendChild(G);var G=document.createElement("div");G.id="loc_search_results_div";G.style.margin="0 0 15px 38px";A.appendChild(G);var G=document.createElement("div");G.id="loc_search_msg_div";G.style.margin="0px 0 10px 30px";G.style.display="none";A.appendChild(G);var B=document.createElement("img");B.id="loc_search_close";B.style.border="0px";B.style.position="absolute";B.style.left="281px";B.style.top="4px";B.src=_images_root+"/simple_close_default.gif";B.width=B.height="15";var E=this.id;B.onclick=function(){_ge(E).div_fade()};this.appendChild(B);F.decorate(_ge("loc_search_close"),F._simple_button).button_go_go_go()};F._loc_search_div.window_onresize=function(){if(this.style.display!="none"){this.div_show()}};F._loc_search_div.div_show=function(){if(this.style.display=="none"){this.style.visibility="hidden"}this.style.display="block";var G=_ge("loc_search_results_div");var E=Y.U.Dom.getY(_ge(this.input_id));if(this.page_type=="org"){var A=(_find_screen_width()-this.offsetWidth-3);E+=25}else{if(this.page_type=="else"||this.page_type=="world_map"){var A=(_find_screen_width()-this.offsetWidth-60);if(A>Y.U.Dom.getX(_ge(this.input_id))){A=Y.U.Dom.getX(_ge(this.input_id))}E+=23}else{if(this.page_type=="explore"){var A=Y.U.Dom.getX(_ge(this.input_id));E+=23}else{if(this.page_type=="places_world"){var A=Y.U.Dom.getX(_ge(this.input_id));E+=31}else{var B=_ge("Main");var A=(B?(Y.U.Dom.getX(B)+B.offsetWidth-this.offsetWidth):Y.U.Dom.getX(_ge("header_search_q"))-56);E+=24}}}}G.style.height="";G.style.overflow="";if(this.div_show_all){if(this.page_type=="explore"){var D=88;if(this.offsetHeight+D>_find_screen_height()){G.style.height=(_find_screen_height()-D)+"px";G.style.overflow="auto"}}else{var D=58;if(this.offsetHeight+E>_find_screen_height()+document.body.scrollTop){G.style.height=(_find_screen_height()-E-D+document.body.scrollTop)+"px";G.style.overflow="auto"}}if(this.reset_scrollTop){this.reset_scrollTop=0;G.scrollTop=0}}var C=100;this.style.opacity=C/100;this.style.filter="alpha(opacity="+C+")";this.style.left=A+"px";this.style.top=E+"px";this.style.visibility="visible";if(this.page_type=="explore"){F.scroll_this_el_into_view(this.id)}if(_ge("geo_bookmarks_div")&&typeof (_ge("geo_bookmarks_div").hide=="function")){_ge("geo_bookmarks_div").hide()}};F._loc_search_div.div_hide=function(){this.style.display="none"};F._loc_search_div.div_loading=function(){_ge("loc_search_results_div").style.display="none";_ge("loc_search_close").style.display="none";_ge("loc_search_header_div").className="Pulser_gray";_ge("loc_search_header_msg_div").innerHTML="&nbsp;&nbsp;&nbsp;"+F.output.get("searching");this.reset_scrollTop=1;this.div_show_all=0;this.div_show()};F._loc_search_div.div_fade_if_open=function(){if(this.style.display=="block"){this.div_fade()}this.div_log(0)};F._loc_search_div.div_fade=function(){var B=this;var A=function(){B.div_hide()};anim_do_opacity_to(B,7,35,0,"easeInQuad",A)};F._loc_search_div.div_update_results=function(E){if(_ge("f_div_photo_ribbon_holder")){this.page_type="world_map"}if(E){this.div_show_all=1}var H=this.locations.length;_ge("loc_search_close").style.display="block";if(this.locations.length==0){_ge("loc_search_header_div").className="Problem_small";_ge("loc_search_header_msg_div").innerHTML=F.output.get("loc_results_no_matches");_ge("loc_search_results_div").style.display="none"}else{if(this.locations.length==1){if((this.page_type=="site"||this.page_type=="explore")&&!_ge("div_force_header_location_search")){}else{if(this.page_type=="places_world"){}else{setTimeout("_ge('"+this.id+"').div_fade()",2000)}}}_ge("loc_search_header_div").className="Confirm_small";if(H==1){var D=F.output.get("loc_results_one_match")}else{var D=F.output.get("loc_results_matches",H,this.last_search_term.escape_for_display())}_ge("loc_search_header_msg_div").innerHTML=D;_ge("loc_search_results_div").style.display="block";var J=[];max_abs=20;max_to_show=8;max_to_show_if_more_than_that=5;var C=(this.current_location_index>max_to_show_if_more_than_that||this.div_show_all)?this.locations.length:(this.locations.length>max_to_show)?max_to_show_if_more_than_that:this.locations.length;for(i=0;i<C;i++){var A="margin-top:3px;";if((this.page_type=="site"||this.page_type=="explore")&&!_ge("div_force_header_location_search")){if(_ge("world_map")||_ge("f_div_photo_ribbon_holder")){if(_ge("user_places_is_go")){var B="/photos/"+_ge("user_places_is_go").innerHTML+"/places"+this.locations[i].place_url}else{var B="/places"+this.locations[i].place_url}}else{if(this.locations[i].precision=="GeocodedBuilding"||this.locations[i].precision=="POI"){var B="/map?fLat="+this.locations[i].lat+"&fLon="+this.locations[i].lon+"&zl=2&place_id="+this.locations[i].id+"&woe_sub_title="+escape(this.locations[i].sub_title)}else{var B="/map?place_id="+this.locations[i].id}}var I="_ge('"+this.id+"').div_hide(); _ge('"+this.id+"').div_log('"+this.locations[i].id+"', this.href); return false"}else{A+=(i==this.current_location_index)?"font-weight:bold; text-decoration:none":"";var I="_ge('"+this.id+"').div_on_result_click("+i+"); return false;";if(this.page_type=="else"||this.page_type=="world_map"||_ge("div_force_header_location_search")){if(this.locations[i].precision=="GeocodedBuilding"||this.locations[i].precision=="POI"){var B="/map?fLat="+this.locations[i].lat+"&fLon="+this.locations[i].lon+"&zl=2&place_id="+this.locations[i].id+"&woe_sub_title="+escape(this.locations[i].sub_title)}else{var B="/map?place_id="+this.locations[i].id}}else{if(this.locations[i].precision=="GeocodedBuilding"||this.locations[i].precision=="POI"){var B="/photos/organize/?start_tab=map&fLat="+this.locations[i].lat+"&fLon="+this.locations[i].lon+"&zl=2&place_id="+this.locations[i].id+"&woe_sub_title="+escape(this.locations[i].sub_title)}else{var B="/photos/organize/?start_tab=map&place_id="+this.locations[i].id}}}var G='<div style="margin-bottom:7px; font-size:12px; font-family:arial">';if(F.is_ie){B=encodeURI(B)}if(_ge("world_map")||_ge("f_div_photo_ribbon_holder")){G+='<a href="'+B+'" style="'+A+'" onclick="'+I+'">';if(this.locations[i].title){G+='<span class="loc_search_found_term">'+this.locations[i].title+"</span>, "}}else{if(this.locations[i].title){G+='<span class="loc_search_found_term">'+this.locations[i].title+"</span>, "}G+='<a href="'+B+'" style="'+A+'" onclick="'+I+'">'}G+=" "+this.locations[i].sub_title+"</a>";if(this.locations[i].place_disambiguate!=""){G+=" ("+this.locations[i].place_disambiguate+")"}G+="</div>";J.push(G)}if(this.locations.length>C){J.push('<br><b><a href="#" onclick="_ge(\''+this.id+"').div_update_results(1); return false;\">"+F.output.get("loc_results_more")+"</a></b>")}_ge("loc_search_results_div").innerHTML=J.join("")}this.div_show()};F._loc_search_div.div_go_to_map=function(D,C){if(!C||C<1){var B=this.locations[D].id;if(this.locations[D].precision=="GeocodedBuilding"||this.locations[D].precision=="POI"){var A="/map?fLat="+this.locations[D].lat+"&fLon="+this.locations[D].lon+"&zl=2&place_id="+B+"&woe_sub_title="+escape(this.locations[D].sub_title)}else{var A="/map?place_id="+B}document.location=A;var E=F.output.get("loc_results_take_you_there")}else{setTimeout("_ge('"+this.id+"').div_go_to_map("+D+", "+(C-1000)+")",C);if(C==0){var E=F.output.get("loc_results_zero_second")}else{if(_pi(C/1000)==1){var E=F.output.get("loc_results_one_second")}else{var E=F.output.get("loc_results_x_second",_pi(C/1000))}}}writeDebug(E);if(_ge("loc_search_msg_div")){_ge("loc_search_msg_div").style.display="block";_ge("loc_search_msg_div").innerHTML=E}};F._loc_search_div.div_go_to_place=function(D,C){if(!C||C<1){var B=this.locations[D].id;if(_ge("world_map")){if(_ge("user_places_is_go")){var A="/photos/"+_ge("user_places_is_go").innerHTML+"/places"+this.locations[D].place_url}else{var A="/places"+this.locations[D].place_url}}else{if(this.locations[D].precision=="GeocodedBuilding"||this.locations[D].precision=="POI"){var A="/map?fLat="+this.locations[D].lat+"&fLon="+this.locations[D].lon+"&zl=2&place_id="+B+"&woe_sub_title="+escape(this.locations[D].sub_title)}else{var A="/map?place_id="+B}}document.location=A;var E=F.output.get("loc_results_take_you_there")}else{setTimeout("_ge('"+this.id+"').div_go_to_place("+D+", "+(C-1000)+")",C);if(C==0){var E=F.output.get("loc_results_zero_second")}else{if(_pi(C/1000)==1){var E=F.output.get("loc_results_one_second")}else{var E=F.output.get("loc_results_x_second",_pi(C/1000))}}}writeDebug(E);if(_ge("loc_search_msg_div")){_ge("loc_search_msg_div").style.display="block";_ge("loc_search_msg_div").innerHTML=E}};F._loc_search_div.div_on_result_click=function(A){if((this.page_type=="site"||this.page_type=="explore")&&!_ge("div_force_header_location_search")){}else{this.current_location_index=A;this.focus_on_location();this.div_update_results();this.div_fade()}};F._loc_search_div.div_do_loc_search=function(){var A=_ge(this.input_id).value.trim();if(A){if(this.last_search_term!=A){if(this.last_search_term){this.div_log(0);if(this.logged_last){this.logged_last=0}}this.last_search_term=A;this.div_loading();F.API.callMethod("flickr.geocode.translate",{location:this.last_search_term,provider_name:this.provider_name},this,null,null,null,0)}else{this.div_show()}}};F._loc_search_div.div_add_source_params=function(A){if(this.setLocation_geo_point!=null&&_ge("map_controller").is_this_point_on_the_map(this.setLocation_geo_point)){writeDebug("adding source!");A.source=this.setLocation_source_id;A.query=this.setLocation_search_term}return A};F._loc_search_div.flickr_geocode_translate_onLoad=function(K,B,M,X){if(K){var N=B.documentElement.getElementsByTagName("ResultSet")[0];var P=B.documentElement.getElementsByTagName("Result");this.last_source_id=N.getAttribute("fl:source_id");this.locations=[];if(P.length==0){this.div_update_results();return }for(i=0;i<P.length;i++){try{var U=String(P[i].getAttribute("precision"))}catch(a){var U=""}try{var I=String(P[i].getElementsByTagName("woe_specificprobability")[0].firstChild.nodeValue)}catch(a){var I=""}try{var L=String(P[i].getElementsByTagName("woe_woeid")[0].firstChild.nodeValue)}catch(a){var L=""}var J=String(P[i].getElementsByTagName("Latitude")[0].firstChild.nodeValue);var E=String(P[i].getElementsByTagName("Longitude")[0].firstChild.nodeValue);try{var C=String(P[i].getElementsByTagName("woe_bbox")[0].firstChild.nodeValue)}catch(a){var C=""}try{var G=String(P[i].getElementsByTagName("Address")[0].firstChild.nodeValue)}catch(a){var G=""}try{var S=String(P[i].getElementsByTagName("City")[0].firstChild.nodeValue)}catch(a){var S=""}try{var H=String(P[i].getElementsByTagName("State")[0].firstChild.nodeValue)}catch(a){var H=""}try{var W=String(P[i].getElementsByTagName("Zip")[0].firstChild.nodeValue)}catch(a){var W=""}try{var Q=String(P[i].getElementsByTagName("Country")[0].firstChild.nodeValue)}catch(a){var Q=""}try{var V=String(P[i].getElementsByTagName("place_url")[0].firstChild.nodeValue)}catch(a){var V=""}try{var R=String(P[i].getElementsByTagName("place_disambiguate")[0].firstChild.nodeValue)}catch(a){var R=""}Q=(Q=="United States")?"US":Q;Q=(Q=="United Kingdom")?"UK":Q;var b="";var A="";var D=this.last_search_term.trim().split(" ")[0].split(",")[0];var T=D.toLowerCase();if(U=="GeocodedBuilding"||U=="POI"){if(G){A=A+", "+G}}if(S){A=A+", "+S}if(H){A=A+", "+H}if(Q){A=A+", "+Q}if(A.length>2){A=A.substring(2,A.length)}if(U=="County"){b=D.substring(0,1).toUpperCase()+D.substring(1,D.length)+" County"}else{if(U=="GeocodedBuilding"){A=D+" "+A}else{if(U=="POI"){A=this.last_search_term+", "+A}else{sub_titleA=A.split(", ");if(T==sub_titleA[0].toLowerCase()){if(sub_titleA[0]!=A){b=sub_titleA[0];A=A.replace(sub_titleA[0]+", ","")}}}}}var Z=new woe_location_obj(L,b,A,I,C,U,J,E,V,R);if(Z.place_url!="/"){this.locations.push(Z)}}this.current_location_index=-1;this.div_update_results();if(this.locations.length==1){this.current_location_index=0;if((this.page_type=="site"||this.page_type=="explore")&&!_ge("div_force_header_location_search")){if(_ge("world_map")){this.div_go_to_place(0,0)}else{this.div_go_to_map(0,0)}}else{var O=this.id;setTimeout(function(){_ge(O).focus_on_location()},50)}}else{if(this.locations.length>0&&_pf(this.locations[0].relevance)>0.85&&this.page_type=="places_world"){this.current_location_index=0;var O=this.id;setTimeout(function(){_ge(O).focus_on_location()},50)}}}else{writeDebug("Something sucked");return }};F._loc_search_div.focus_on_location=function(){if((window.YGeoPoint==undefined||this.page_type=="site")&&!_ge("div_force_header_location_search")){return }var G=this.locations[this.current_location_index];if(this.page_type=="places_world"){if(_ge("txt_search_for").value!=""&&_ge("txt_search_for").value!=places.defaults.search_for){if(_ge("user_places_is_go")){window.location="photos/"+_ge("user_places_is_go").innerHTML+"/places"+G.place_url+"/?q="+_ge("txt_search_for").value}else{window.location="/places"+G.place_url+"/?q="+_ge("txt_search_for").value}}else{alert("here")}return }if(this.locations.length==1&&(G.precision=="GeocodedBuilding"||G.precision=="POI")){var B=2;if(_ge("f_div_photo_ribbon_holder")){map_controller.ymap.drawZoomAndCenter(new YGeoPoint(G.lat,G.lon),B);_ge("f_inpt_search_what").value=F.output.get("numap_amazing_photos");_ge("f_inpt_search_where").value=F.output.get("numap_this_map");if(_ge("f_div_search_mode_tab")){_ge("f_div_search_mode_tab").firstest_time_ever=false}if(typeof (map_controller)=="object"){map_controller.from_top_search=true}_ge("f_div_search_mode_tab").do_search()}else{if(_ge("div_force_header_location_search")){var E=drag_map.ymap.getCenterLatLon();if(E.Lon!=G.lon||E.Lat!=G.lat||drag_map.ymap.getZoomLevel()!=B){drag_map.ymap.drawZoomAndCenter(new YGeoPoint(G.lat,G.lon),B);drag_map.end_pan()}}else{var E=ymap.getCenterLatLon();_ge("you_are_here_holder").setYGeoPoint(new YGeoPoint(G.lat,G.lon),B);_ge("you_are_here_holder").show(true,G.sub_title);if(E.Lon!=G.lon||E.Lat!=G.lat||ymap.getZoomLevel()!=B){ymap.drawZoomAndCenter(new YGeoPoint(G.lat,G.lon),B);_ge("map_controller").end_pan()}}}}else{this.best_fit_points=[];this.best_fit_points.push(new YGeoPoint(G.bbox.split(",")[1],G.bbox.split(",")[0]));this.best_fit_points.push(new YGeoPoint(G.bbox.split(",")[3],G.bbox.split(",")[2]));var A=[];for(i=0;i<this.best_fit_points.length;i++){A.push(this.best_fit_points[i])}if(_ge("f_div_photo_ribbon_holder")){var B=map_controller.ymap.getZoomLevel(A);if(G.precision!="GeocodedStreet"){B=Math.max(5,B);var D=map_controller.ymap.getGeoBox(A);var C=map_controller.ymap.getBoxGeoCenter(D.min,D.max)}else{var C=new YGeoPoint(G.lat,G.lon);var B=3}map_controller.ymap.drawZoomAndCenter(C,B);_ge("f_inpt_search_what").value=F.output.get("numap_amazing_photos");_ge("f_inpt_search_where").value=F.output.get("numap_this_map");if(_ge("f_div_search_mode_tab")){_ge("f_div_search_mode_tab").firstest_time_ever=false}if(typeof (map_controller)=="object"){map_controller.from_top_search=true}_ge("f_div_search_mode_tab").do_search()}else{if(_ge("div_force_header_location_search")){var E=drag_map.ymap.getCenterLatLon();var B=drag_map.ymap.getZoomLevel(A);if(G.precision!="GeocodedStreet"){B=Math.max(5,B);var D=drag_map.ymap.getGeoBox(A);var C=drag_map.ymap.getBoxGeoCenter(D.min,D.max)}else{var C=new YGeoPoint(G.lat,G.lon);var B=3}if(E.Lon!=C.Lon||E.Lat!=C.Lat||drag_map.ymap.getZoomLevel()!=B){drag_map.ymap.drawZoomAndCenter(C,B);drag_map.end_pan()}}else{var E=ymap.getCenterLatLon();var B=ymap.getZoomLevel(A);_ge("you_are_here_holder").show(false,"");if(G.precision!="GeocodedStreet"){B=Math.max(5,B);var D=ymap.getGeoBox(A);var C=ymap.getBoxGeoCenter(D.min,D.max)}else{var C=new YGeoPoint(G.lat,G.lon);var B=3}if(E.Lon!=C.Lon||E.Lat!=C.Lat||ymap.getZoomLevel()!=B){ymap.drawZoomAndCenter(C,B);_ge("map_controller").end_pan()}}}}this.setLocation_geo_point=new YGeoPoint(G.lat,G.lon);this.setLocation_source_id=this.last_source_id;this.setLocation_search_term=this.last_search_term;this.div_log(G.id)};F._loc_search_div.div_log=function(A,B){if(this.provider_name&&this.provider_name.toLowerCase()=="yahoo"){return }if(this.locations.length<2){return }if(!A&&this.logged_last){return }this.logged_last=1;F.API.callMethod("flickr.geocode.log",{query:this.last_search_term,result_id:A,provider_name:this.provider_name},{flickr_geocode_log_onLoad:function(){if(B){document.location=B}}})};F._canvas={canvas_go_go_go:function(A,B){if(A!=undefined){this.width=A;this.style.width=A+"px"}if(B!=undefined){this.height=B;this.style.height=B+"px"}if(F.is_ie&&!this.getContext){G_vmlCanvasManager_.initElement(this)}},rounded_rect:function(A,G,C,D,E){var B=this.getContext("2d");B.beginPath();B.moveTo(A,G+E);B.lineTo(A,G+D-E);B.quadraticCurveTo(A,G+D,A+E,G+D);B.lineTo(A+C-E,G+D);B.quadraticCurveTo(A+C,G+D,A+C,G+D-E);B.lineTo(A+C,G+E);B.quadraticCurveTo(A+C,G,A+C-E,G);B.lineTo(A+E,G);B.quadraticCurveTo(A,G,A,G+E);B.stroke()}};F._simple_button={button_disabled:0,button_go_go_go:function(E){this.EXT=this;this.style.cursor=(F.is_ie)?"hand":"pointer";if(this.tagName=="IMG"){this.img_id=this.id}else{for(var C=0;C<this.childNodes.length;C++){var A=this.childNodes[C];if(A.tagName=="IMG"){if(!A.id){A.id=this.id+"IMG"}this.img_id=A.id}else{if(A.tagName=="SPAN"){if(!A.id){A.id=this.id+"SPAN"}this.span_id=A.id}}}}if(!this.img_id){return }this.button_has_disabled_src=(E)?1:0;var D=this.button_get_img();this.img_format=D.src.split(".")[D.src.split(".").length-1];var H=D.src.split("/");var I=H[H.length-1];this.img_path_root=D.src.replace("/"+I,"");var J=I.replace("_default."+this.img_format,"");this.button_set_img_srcs(J);if(this.img_format=="png"){D.className="trans_png"}this.button_is_down=0;this.button_is_over=0;if(this.onclick){var G=this.onclick;var B=this.button_default_onclick;this.onclick=function(K){G.apply(this,[K]);B.apply(this,[K])}}else{this.onclick=this.button_default_onclick}return this},button_get_img:function(){return _ge(this.img_id)},button_get_span:function(){return _ge(this.span_id)},button_set_img_srcs_and_change:function(A){this.button_set_img_srcs(A);this.button_change_src()},button_set_text:function(A){var B=this.button_get_span();if(!B){return }B.innerHTML=A},button_set_img_srcs:function(A){this.button_default_img={};this.button_default_img.src=this.img_path_root+"/"+A+"_default."+this.img_format;this.button_hover_img={};this.button_hover_img.src=this.img_path_root+"/"+A+"_hover."+this.img_format;this.button_selected_img={};this.button_selected_img.src=this.img_path_root+"/"+A+"_selected."+this.img_format;F.preload_images(this.button_default_img.src,this.button_hover_img.src,this.button_selected_img.src);if(this.button_has_disabled_src){this.button_disabled_img={};this.button_disabled_img.src=this.img_path_root+"/"+A+"_disabled."+this.img_format;F.preload_images(this.button_disabled_img.src)}else{this.button_disabled_img=this.button_default_img}},button_change_src:function(){var A=this.button_default_img.src;if(this.button_disabled){A=this.button_disabled_img.src}else{if(this.button_is_down){A=this.button_selected_img.src}else{if(this.button_is_over){A=this.button_hover_img.src}}}this.button_get_img().src=A},button_enable:function(){this.button_disabled=0;this.button_change_src();if(this.tagName=="A"){this.className=this.className.replace("_disabled","")}},button_disable:function(){if(this.button_disabled){return }this.button_disabled=1;this.button_is_over=0;this.button_is_down=0;this.button_change_src();if(this.tagName=="A"){this.className=this.className+"_disabled"}},onmouseover:function(){if(this.button_disabled){return }this.button_is_over=1;this.button_change_src()},onmouseout:function(){if(this.button_disabled){return }this.button_is_over=0;this.button_is_down=0;this.button_change_src()},onmousedown:function(){if(this.button_disabled){return }this.button_is_over=1;this.button_is_down=1;this.button_change_src()},onmouseup:function(){if(this.button_disabled){return }this.button_is_over=1;this.button_is_down=0;this.button_change_src()},button_default_onclick:function(A){this.blur();return false}};F._link_button={_decotype:F._simple_button,button_go_go_go:function(){F._link_button._decotype.button_go_go_go.apply(this)},button_default_onclick:function(A){this.blur();return true}};F._button_bar={bar_go_go_go:function(){if(!this.bar_button){return }var B=Y.U.Dom.getElementsByClassName("menu_li","li",this);for(var A=0;A<B.length;A++){F.decorate(B[A],this.bar_button).button_go_go_go()}}};F._l10n_button={button_go_go_go:function(){this.button_menu_id=this.id.replace("button","menu");this.button_form_id=this.id.replace("button","form");var C=_ge(this.button_form_id);if(C){var B=this;C.onsubmit=function(){B.button_close();return false}}this.button_is_open=0;this.button_is_split=(this.button_get_img().src.indexOf("_split")>-1)?1:0;this.onclick_default=(this.onclick)?this.onclick:function(){};this.onclick=this.onclick_handler;var A=this.button_get_a();if(!A){return }A.onclick_default=(A.onclick)?A.onclick:null;A.onclick=null},button_get_img:function(){if(this.tagName=="IMG"){return this}return this.getElementsByTagName("img")[0]},button_get_src:function(B){if(!B){B="default"}var A=(this.button_is_split)?"split_":"";return _images_root+"/"+this.button_img_root+A+B+"."+this.button_img_ext},button_close:function(B){var A=this.button_get_img();Y.U.Dom.removeClass(this,"selected");if(B){A.src=this.button_get_src("hover")}else{Y.U.Dom.removeClass(this,"hover");A.src=this.button_get_src()}_ge(this.button_menu_id).style.display="none";this.button_is_open=0;document.onmousedown=null;F.eb_broadcast("stewart_play_if_was_playing")},button_disable:function(){this.onmouseout();this.button_is_disabled=1},button_undisable:function(){this.button_is_disabled=0},button_go_down:function(B){B=B||"both";if(B=="both"||B=="left"){Y.U.Dom.addClass(this,"selected")}if(B=="both"||B=="right"){var A=this.button_get_img();A.src=this.button_get_src("selected")}},button_open:function(){if(this.button_is_split){this.button_go_down("right")}else{this.button_go_down()}var A=_ge(this.button_menu_id);if(!A){return }A.style.display="block";this.button_is_open=1;F.eb_broadcast("stewart_pause");var B=this;document.onmousedown=function C(G){var E=_get_event_src(G);var D=0;if(E.parentNode){while(E.parentNode){if(E.parentNode==B){D=1;break}E=E.parentNode}}if(!D){B.button_close()}}},button_swap_image_if_needed:function(C,D){var B=this.button_get_img();if(B){var A=_get_event_src(C);if(A==B||this.button_always_swap_img){B.src=this.button_get_src(D);return 1}}return 0},onmouseover:function(A){if(this.button_is_disabled){return }if(this.button_is_open){return }Y.U.Dom.addClass(this,"hover");if(!this.button_swap_image_if_needed(A,"hover")){Y.U.Dom.addClass(this,"hover_left")}else{Y.U.Dom.removeClass(this,"hover_left")}},onmouseout:function(A){if(this.button_is_disabled){return }if(this.button_is_open){return }this.button_swap_image_if_needed(A,"default");Y.U.Dom.removeClass(this,"hover");Y.U.Dom.removeClass(this,"hover_left");Y.U.Dom.removeClass(this,"selected")},onmouseup:function(A){_enable_select();if(this.button_is_disabled){return }if(this.button_is_open){return }this.button_swap_image_if_needed(A,"hover");Y.U.Dom.removeClass(this,"selected")},onmousedown:function(D){if(this.button_is_disabled){return }if(this.button_is_split){var A=_get_event_src(D);var C=this.button_get_img();if(A==C){this.button_go_down("right")}else{this.button_go_down("left")}}else{this.button_go_down()}var A=_get_event_src(D);if(this.button_click_is_in_menu(A)){return }var B=this.button_get_a();if(!B||!B.href){_disable_select();return false}},onclick_handler:function(H){if(this.button_is_disabled){return false}var B=_get_event_src(H);var D=this.button_get_img();if(B==D||!this.button_is_split){if(this.button_is_open){var I=1;var G=_ge(this.button_form_id);if(G){if(this.button_click_is_in_menu(B)){I=0}}if(I){this.button_close(1)}}else{var A=_ge(this.button_menu_id);if(A){this.button_open()}}}if((B!=D||B==this)&&!this.button_click_is_in_menu(B)){var C=this.button_get_a();if(C){if(C.onclick_default){return C.onclick_default()}if(C.href&&B!=C){document.location=C.href;return }}else{this.onclick_default()}if(this.button_is_split){var A=_ge(this.button_menu_id);var E=A.getElementsByTagName("A");if(E&&E[0]){if(E[0].onclick){return E[0].onclick()}if(E[0].href){if(!C){document.location=E[0].href;return }else{if(!C.href){C.href=E[0].href}return 1}}}}}},button_get_a:function(){var A=this.getElementsByTagName("A");if(!A){return null}return A[0]},button_click_is_in_menu:function(A){var B=A;while(B){if(Y.U.Dom.hasClass(B,"candy_menu")){return 1}B=B.parentNode;if(B==this){return 0}}return 0}};F._nav_button={_decotype:F._l10n_button,button_always_swap_img:0,button_img_root:"site_nav_caret_",button_img_ext:"png",button_go_go_go:function(){F.preload_images(_images_root+"/site_nav_caret_split_default.png",_images_root+"/site_nav_caret_split_hover.png",_images_root+"/site_nav_caret_split_selected.png");F._nav_button._decotype.button_go_go_go.apply(this)}};F._gray_menu_button={_decotype:F._l10n_button,button_always_swap_img:1,button_img_root:"gray_button_caret_",button_img_ext:"gif",button_go_go_go:function(){F.preload_images(_images_root+"/gray_button_caret_default.gif",_images_root+"/gray_button_caret_hover.gif",_images_root+"/gray_button_caret_selected.gif",_images_root+"/gray_button_caret_split_default.gif",_images_root+"/gray_button_caret_split_hover.gif",_images_root+"/gray_button_caret_split_selected.gif",_images_root+"/gray_button_bg_hover.gif",_images_root+"/gray_button_bg_selected.gif");F._gray_menu_button._decotype.button_go_go_go.apply(this)}};F._gray_button={_decotype:F._l10n_button,button_always_swap_img:1,button_img_root:"gray_button_no_caret_",button_img_ext:"gif",button_go_go_go:function(){F.preload_images(_images_root+"/gray_button_no_caret_default.gif",_images_root+"/gray_button_no_caret_hover.gif",_images_root+"/gray_button_no_caret_selected.gif",_images_root+"/gray_button_bg_hover.gif",_images_root+"/gray_button_bg_selected.gif");F._gray_button._decotype.button_go_go_go.apply(this)}};F._gray_button_bar={_decotype:F._button_bar,bar_button:F._gray_menu_button,bar_go_go_go:function(){var B=Y.U.Dom.getElementsByClassName("no_menu_li","li",this);for(var A=0;A<B.length;A++){F.decorate(B[A],F._gray_button).button_go_go_go()}F._gray_button_bar._decotype.bar_go_go_go.apply(this)}};F._nav_button_bar={_decotype:F._button_bar,bar_button:F._nav_button};F.str_to_XML=function(B){var A;if(window.DOMParser){var C=new DOMParser();A=C.parseFromString(B,"text/xml")}else{if(window.ActiveXObject){A=new ActiveXObject("Microsoft.XMLDOM");A.async=false;A.loadXML(B)}else{}}if(A.normalize){A.normalize()}return A};F.make_hoverable=function(A,B){A.hover_class=B;Y.U.Event.addListener(A,"mouseover",F.handle_hoverable_mouseover);Y.U.Event.addListener(A,"mouseout",F.handle_hoverable_mouseout)};F.handle_hoverable_mouseover=function(A){Y.U.Dom.addClass(this,this.hover_class)};F.handle_hoverable_mouseout=function(A){Y.U.Dom.removeClass(this,this.hover_class)};F.html_info={show:function(A){if(!A){return }if(!A.tip_div){var B=document.createElement("div");B.style.padding="10 0";B.style.display="none";B.innerHTML='<img src="'+_images_root+'/pulser2.gif" width="32" height="15" border="0">';A.tip_div=B;A.parentNode.appendChild(B);A.fragment_onLoad=function(E,C,D){A.fragment_loaded=1;A.tip_div.innerHTML=C;F.scroll_this_el_into_view(A.tip_div)}}if(A.tip_div.style.display=="none"){if(_ge("html_info_caret")){_ge("html_info_caret").src=_images_root+"/caret_open_down.gif"}A.tip_div.style.display="block";if(_ge("div_invite_loader")){_ge("div_invite_loader").style.display="none"}if(!A.fragment_loaded){F.fragment_getter.get(A.href+"&only_fragment=1",{},A,"fragment_onLoad")}else{F.scroll_this_el_into_view(A.tip_div)}}else{if(_ge("html_info_caret")){_ge("html_info_caret").src=_images_root+"/caret_closed.gif"}A.tip_div.style.display="none";if(_ge("div_invite_loader")){_ge("div_invite_loader").style.display="block"}}}};F.osming={osming:false,check_map:function(C,G){var A=C.getCenterLatLon();var B=C.getZoomLevel();var D=C.getCurrentMapType();if(typeof (_use_osm)!="undefined"&&_use_osm==true){var E=false;if(D=="YAHOO_MAP"){if(B<8&&A.Lat>=39.8558502197&&A.Lat<=40.0156097412&&A.Lon>=116.2662734985&&A.Lon<=116.4829177856){E=true}if(B<7&&A.Lat>=40.735551&&A.Lat<=40.807533&&A.Lon>=-119.272041&&A.Lon<=-119.163379){E=true}if(B<9&&A.Lat>=35.46290704974905&&A.Lat<=36.02799998329552&&A.Lon>=139.21875&&A.Lon<=140.27069091796875){E=true}if(B<8&&A.Lat>=-34.6944313049&&A.Lat<=-34.4146499634&&A.Lon>=-58.6389389038&&A.Lon<=-58.2992210388){E=true}if(B<8&&A.Lat>=-35.2210502625&&A.Lat<=-34.6507987976&&A.Lon>=138.4653778076&&A.Lon<=138.7634735107){E=true}if(B<8&&A.Lat>=-34.1896095276&&A.Lat<=-33.5781402588&&A.Lon>=150.5171661377&&A.Lon<=151.3425750732){E=true}if(B<8&&A.Lat>=-27.8130893707&&A.Lat<=-27.0251598358&&A.Lon>=152.6393127441&&A.Lon<=153.3230438232){E=true}if(B<8&&A.Lat>=-35.4803314209&&A.Lat<=-35.1245193481&&A.Lon>=148.9959259033&&A.Lon<=149.2332458496){E=true}if(B<8&&A.Lat>=-38.4112510681&&A.Lat<=-37.5401115417&&A.Lon>=144.5532073975&&A.Lon<=145.5077362061){E=true}if(B<8&&A.Lat>=33.2156982422&&A.Lat<=33.4300994873&&A.Lon>=44.2592010498&&A.Lon<=44.5364112854){E=true}if(B<8&&A.Lat>=34.461101532&&A.Lat<=34.5925598145&&A.Lon>=69.0997009277&&A.Lon<=69.2699813843){E=true}if(B<10&&A.Lat>=-4.3634901047&&A.Lat<=-4.3009300232&&A.Lon>=15.2374696732&&A.Lon<=15.3460502625){E=true}if(B<10&&A.Lat>=2.0093801022&&A.Lat<=2.0614199638&&A.Lon>=45.313911438&&A.Lon<=45.3669013977){E=true}if(B<10&&A.Lat>=-17.8511505127&&A.Lat<=-17.7955493927&&A.Lon>=31.021030426&&A.Lon<=31.0794296265){E=true}if(B<10&&A.Lat>=-1.31656003&&A.Lat<=-1.2379800081&&A.Lon>=36.7483406067&&A.Lon<=36.8735618591){E=true}if(B<10&&A.Lat>=5.5237197876&&A.Lat<=5.5998301506&&A.Lon>=-0.253580004&&A.Lon<=-0.1586299986){E=true}if(B<10&&A.Lat>=30.0068798065&&A.Lat<=30.1119003296&&A.Lon>=31.2149791718&&A.Lon<=31.311170578){E=true}if(B<10&&A.Lat>=36.699760437&&A.Lat<=36.8181610107&&A.Lon>=2.9909501076&&A.Lon<=3.1476099491){E=true}}if(E){if(!this.osming){this.osming=true;this.oldTileReg=YMapConfig.tileReg;YMapConfig.tileReg=["/map_openstreetmap_tile_broker.gne?t=m&","/map_openstreetmap_tile_broker.gne?t=m&"];if(_ge("f_div_osm_cc")){_ge("f_div_osm_cc").style.display="block"}C._cleanTileCache();C._callTiles()}setTimeout("F.osming.hide_y_copy('"+G+"')",100);setTimeout("F.osming.hide_y_copy('"+G+"')",800)}else{if(this.osming==true){this.osming=false;YMapConfig.tileReg=this.oldTileReg;if(_ge("f_div_osm_cc")){_ge("f_div_osm_cc").style.display="none"}C._cleanTileCache();C._callTiles();setTimeout("F.osming.show_y_copy('"+G+"')",100);setTimeout("F.osming.show_y_copy('"+G+"')",800)}}}},hide_y_copy:function(B){var A=Y.U.Dom.getElementsBy(function(C){if((C.style.left=="1px"&&C.style.bottom=="0px")||C.src.indexOf("/copy")>=0){return true}return false},"img",_ge(B));if(A.length==1){A[0].style.display="none"}var A=Y.U.Dom.getElementsBy(function(C){if(C.src.indexOf("/yahoo.png")>=0){return true}return false},"img",_ge(B));if(A.length==1){A[0].style.display="none"}var A=Y.U.Dom.getElementsBy(function(C){if(C.innerHTML.indexOf("Yahoo!")>=0){return true}return false},"div",_ge(B));if(A.length==1){A[0].style.display="none"}},show_y_copy:function(B){var A=Y.U.Dom.getElementsBy(function(C){if((C.style.left=="1px"&&C.style.bottom=="0px")||C.src.indexOf("/copy")>=0){return true}return false},"img",_ge(B));if(A.length==1){A[0].style.display="block"}var A=Y.U.Dom.getElementsBy(function(C){if(C.src.indexOf("/yahoo.png")>=0){return true}return false},"img",_ge(B));if(A.length==1){A[0].style.display="block"}var A=Y.U.Dom.getElementsBy(function(C){if(C.innerHTML.indexOf("Yahoo!")>=0){return true}return false},"div",_ge(B));if(A.length==1){A[0].style.display="block"}}};F.set_spaceid=function(H){var I="http://geo.yahoo.com/f?";var A=_ge("beacon");if(!A||!A.getElementsByTagName("img")[0]){return false}var D=A.getElementsByTagName("img")[0];var B=D.src;B=B.substr(B.indexOf("?")+1);var C=B.split("&");var J={s:"792600122",t:(new Date()).getTime(),r:encodeURIComponent(window.location.href)};if(H){J.s=H}var K=null;for(var E=0,G=C.length;E<G;E++){K=C[E].split("=")[0];if(J[K]){C[E]=K+"="+J[K]}}D.src=I+C.join("&");writeDebug("beaconImg.src: "+D.src)};F.getty_intl_warn=function(G){var B={"en-us":"english","fr-fr":false,"de-de":false,"es-us":false,"it-it":false,"pt-br":false,"zh-hk":false,"ko-kr":false};var D="";if(!global_intl_lang||typeof B[global_intl_lang]=="undefined"){F.getty_log_omniture();return true}if(B[global_intl_lang]){F.getty_log_omniture();window.location.href=G}else{if(global_comm_div){var I=_ge("comm_div");var H=_ge("shadow_div");var A=null;if(I){A=F.find_parent_node(I).removeChild(I);if(H){H=F.find_parent_node(H).removeChild(H);H.style.left="0px";H.style.top="0px";document.body.appendChild(H)}global_comm_div=null}}if(!global_comm_div){_make_comm_div("10001")}function C(){F.getty_log_omniture();window.location.href=G}function E(){_ge("shadow_div").style.display="none";_ge("shadow_div").style.left="-9999px";_ge("shadow_div").style.top="-9999px"}global_comm_div.start_comming(F.output.get("getty_intl_warning"),undefined,undefined,true,true,F.output.get("go_ahead"),C,true,F.output.get("remain_here"),E,undefined,true,false);return false}};F.getty_log_omniture=function(){if(window.s_gi){var A=s_gi(s_account);A.linkTrackVars="eVar9,events";A.linkTrackEvents="event21";A.eVar9=page_photo_id;A.events="event21";A.tl("","o","Link Name")}};Y.E.addListener(window,"load",function(){window.setTimeout(F._preload_images_ready,1000)});F.keyboardShortcuts={enabled:false,handlers:{jumpToSearchField:function(B,A,D){var C=_ge("header_search_q");if(C&&C.tagName.toLowerCase()==="input"&&C.focus){Y.E.stopEvent(A[1]);F.scroll_this_el_into_view(C,null,function(){C.focus()},null,10,true)}},jumpToCommentField:function(B,A,D){var C=_ge("message");if(C&&C.tagName.toLowerCase()==="textarea"&&C.focus){Y.E.stopEvent(A[1]);F.scroll_this_el_into_view(C,null,function(){C.focus()},null,60,true)}},jumpToShare:function(B,A,D){var C=_ge("ShareMenu");if(C&&C.toggle){Y.E.stopEvent(A[1]);F.scroll_this_el_into_view("ShareButton",null,function(){C.toggle()},null,0,true)}},addTag:function(B,A,C){if(tagrs_showForm&&typeof tagrs_showForm==="function"){Y.E.stopEvent(A[1]);F.scroll_this_el_into_view("tagadderlink",null,function(){tagrs_showForm()},null,0,true)}},addPerson:function(B,A,D){var C=_ge("add-person-link");if(C&&typeof C.onclick==="function"){Y.E.stopEvent(A[1]);F.scroll_this_el_into_view(C,null,function(){C.onclick()},null,0,true)}},favoritePhoto:function(B,A,C){var D=_ge("photo_gne_button_add_to_faves");if(D&&typeof D.handle_click==="function"){Y.E.stopEvent(A[1]);F.scroll_this_el_into_view("photo_gne_button_add_to_faves",null,function(){D.handle_click()},null,0,true)}},nextPhotoInContext:function(B,A,C){if(nextprev_currentContextID){var D=_ge("nextprev_div_"+nextprev_currentContextID);if(D&&D.next_url){Y.E.stopEvent(A[1]);window.location=D.next_url}}},prevPhotoInContext:function(B,A,C){if(nextprev_currentContextID){var D=_ge("nextprev_div_"+nextprev_currentContextID);if(D&&D.prev_url){Y.E.stopEvent(A[1]);window.location=D.prev_url}}},nextContext:function(B,A,C){},previousContext:function(B,A,C){},navigateToUpload:function(){window.location="/photos/upload/"},navigateToYourPhotostream:function(){window.location=photos_url},navigateToOrganizr:function(){window.location="/photos/organize/"},navigateToRecentActivity:function(){window.location="/activity/"},navigateToContactsUploads:function(){window.location="/photos/friends/"},navigateToGroups:function(){window.location="/groups/"},navigateToHelp:function(){window.location="/help/"}},enableAll:function(){if(F.keyboardShortcuts.enabled){return }F.keyboardShortcuts.jumpToSearchField.enable();F.keyboardShortcuts.jumpToCommentField.enable();F.keyboardShortcuts.jumpToShare.enable();F.keyboardShortcuts.addTag.enable();F.keyboardShortcuts.addPerson.enable();F.keyboardShortcuts.favoritePhoto.enable();F.keyboardShortcuts.nextPhotoInContext.enable();F.keyboardShortcuts.prevPhotoInContext.enable();F.keyboardShortcuts.navigateToUpload.enable();F.keyboardShortcuts.navigateToYourPhotostream.enable();F.keyboardShortcuts.navigateToOrganizr.enable();F.keyboardShortcuts.navigateToRecentActivity.enable();F.keyboardShortcuts.navigateToContactsUploads.enable();F.keyboardShortcuts.navigateToGroups.enable();F.keyboardShortcuts.enabled=true},disableAll:function(){if(!F.keyboardShortcuts.enabled){return }F.keyboardShortcuts.jumpToSearchField.disable();F.keyboardShortcuts.jumpToCommentField.disable();F.keyboardShortcuts.jumpToShare.disable();F.keyboardShortcuts.addTag.disable();F.keyboardShortcuts.addPerson.disable();F.keyboardShortcuts.favoritePhoto.disable();F.keyboardShortcuts.nextPhotoInContext.disable();F.keyboardShortcuts.prevPhotoInContext.disable();F.keyboardShortcuts.navigateToUpload.disable();F.keyboardShortcuts.navigateToYourPhotostream.disable();F.keyboardShortcuts.navigateToOrganizr.disable();F.keyboardShortcuts.navigateToRecentActivity.disable();F.keyboardShortcuts.navigateToContactsUploads.disable();F.keyboardShortcuts.navigateToGroups.disable();F.keyboardShortcuts.enabled=false}};F.keyboardShortcuts.jumpToSearchField=new Y.U.KeyListener(document,{keys:83,ctrl:true,shift:true},{fn:F.keyboardShortcuts.handlers.jumpToSearchField,scope:F.keyboardShortcuts,correctScope:true});F.keyboardShortcuts.jumpToCommentField=new Y.U.KeyListener(document,{keys:67,ctrl:true,shift:true},{fn:F.keyboardShortcuts.handlers.jumpToCommentField,scope:F.keyboardShortcuts,correctScope:true});F.keyboardShortcuts.jumpToShare=new Y.U.KeyListener(document,{keys:72,ctrl:true,shift:true},{fn:F.keyboardShortcuts.handlers.jumpToShare,scope:F.keyboardShortcuts,correctScope:true});F.keyboardShortcuts.addTag=new Y.U.KeyListener(document,{keys:84,ctrl:true,shift:true},{fn:F.keyboardShortcuts.handlers.addTag,scope:F.keyboardShortcuts,correctScope:true});F.keyboardShortcuts.addPerson=new Y.U.KeyListener(document,{keys:80,ctrl:true,shift:true},{fn:F.keyboardShortcuts.handlers.addPerson,scope:F.keyboardShortcuts,correctScope:true});F.keyboardShortcuts.favoritePhoto=new Y.U.KeyListener(document,{keys:70,ctrl:true,shift:true},{fn:F.keyboardShortcuts.handlers.favoritePhoto,scope:F.keyboardShortcuts,correctScope:true});F.keyboardShortcuts.nextPhotoInContext=new Y.U.KeyListener(document,{keys:75,ctrl:true,shift:true},{fn:F.keyboardShortcuts.handlers.nextPhotoInContext,scope:F.keyboardShortcuts,correctScope:true});F.keyboardShortcuts.prevPhotoInContext=new Y.U.KeyListener(document,{keys:74,ctrl:true,shift:true},{fn:F.keyboardShortcuts.handlers.prevPhotoInContext,scope:F.keyboardShortcuts,correctScope:true});F.keyboardShortcuts.nextContext=new Y.U.KeyListener(document,{keys:73,ctrl:true,shift:true},{fn:F.keyboardShortcuts.handlers.nextContext,scope:F.keyboardShortcuts,correctScope:true});F.keyboardShortcuts.previousContext=new Y.U.KeyListener(document,{keys:77,ctrl:true,shift:true},{fn:F.keyboardShortcuts.handlers.previousContext,scope:F.keyboardShortcuts,correctScope:true});F.keyboardShortcuts.navigateToUpload=new Y.U.KeyListener(document,{keys:85,ctrl:true,shift:true},{fn:F.keyboardShortcuts.handlers.navigateToUpload,scope:F.keyboardShortcuts,correctScope:true});F.keyboardShortcuts.navigateToYourPhotostream=new Y.U.KeyListener(document,{keys:89,ctrl:true,shift:true},{fn:F.keyboardShortcuts.handlers.navigateToYourPhotostream,scope:F.keyboardShortcuts,correctScope:true});F.keyboardShortcuts.navigateToOrganizr=new Y.U.KeyListener(document,{keys:79,ctrl:true,shift:true},{fn:F.keyboardShortcuts.handlers.navigateToOrganizr,scope:F.keyboardShortcuts,correctScope:true});F.keyboardShortcuts.navigateToRecentActivity=new Y.U.KeyListener(document,{keys:82,ctrl:true,shift:true},{fn:F.keyboardShortcuts.handlers.navigateToRecentActivity,scope:F.keyboardShortcuts,correctScope:true});F.keyboardShortcuts.navigateToContactsUploads=new Y.U.KeyListener(document,{keys:78,ctrl:true,shift:true},{fn:F.keyboardShortcuts.handlers.navigateToContactsUploads,scope:F.keyboardShortcuts,correctScope:true});F.keyboardShortcuts.navigateToGroups=new Y.U.KeyListener(document,{keys:71,ctrl:true,shift:true},{fn:F.keyboardShortcuts.handlers.navigateToGroups,scope:F.keyboardShortcuts,correctScope:true});F.keyboardShortcuts.navigateToHelp=new Y.U.KeyListener(document,{keys:191,ctrl:true,shift:true},{fn:F.keyboardShortcuts.handlers.navigateToHelp,scope:F.keyboardShortcuts,correctScope:true});F.output.sentencise=function(g,M){var H=(M)?M:"";var j=(M)?M.replace("<","</"):"";var E="";for(var V=0;V<g.length;V++){if(V>0){if(V==g.length-1){if(g.length>2){E+=",";}E+=" "+F.output.get("and")+" ";}else{E+=", ";}}E+=H+g[V]+j;}return E;};F.output.sentencize=function(M){var j="<b>";for(var g=0;g<M.length;g++){j+=M[g];if(g==M.length-1){break;}if(g==M.length-2){j+="</b> and <b>";continue;}j+="</b>, <b>";}j+="</b>";return j;};F.output.dateize=function(V,M,j){var g=F.output.date_strs.monthsA[M]+" "+j+", "+V;return g;};F.output.get_plural=function(){var V=[];for(var g=0;g<arguments.length;g++){V[g]=arguments[g];}var M=V[0];var j=_pi(V[1]);if(j>1){M=M+"_plural";}else{if(j==0&&global_intl_lang!="fr-fr"){M=M+"_plural";}}V[0]=M;V[1]=j.pretty_num();return this.get.apply(this,V);};F.output.get=function(){var V=[];for(var j=0;j<arguments.length;j++){V[j]=arguments[j];}var M=V.shift();var g=this.format_strs[M];if(g==undefined){return " output:"+M;}V.unshift(g);return this.sprintf.apply(null,V);};F.output.sprintf=function(j){var V=function(a,z,b){var m="";for(var P=0;P<Math.abs(b);P++){m+=z;}return b>0?a+m:m+a;};var E=function(P,l,z,b){var a=function(k,Q,J){if(Q>=0){if(k.indexOf(" ")>=0){J=" "+J;}else{if(k.indexOf("+")>=0){J="+"+J;}}}else{J="-"+J;}return J;};var o=parseInt(l,10);if(l.charAt(0)=="0"){var m=0;if(P.indexOf(" ")>=0||P.indexOf("+")>=0){m++;}if(z.length<(o-m)){z=V(z,"0",z.length-(o-m));}return a(P,b,z);}z=a(P,b,z);if(z.length<o){if(P.indexOf("-")<0){z=V(z," ",z.length-o);}else{z=V(z," ",o-z.length);}}return z;};var H=new Array();H["c"]=function(z,m,P,b){if(typeof (b)=="number"){return String.fromCharCode(b);}if(typeof (b)=="string"){return b.charAt(0);}return "";};H["d"]=function(z,m,P,b){return H["i"](z,m,P,b);};H["u"]=function(z,m,P,b){return H["i"](z,m,P,Math.abs(b));};H["i"]=function(z,a,P,b){var l=parseInt(P);var m=((Math.abs(b)).toString().split("."))[0];if(m.length<l){m=V(m," ",l-m.length);}return E(z,a,m,b);};H["E"]=function(z,m,P,b){return (H["e"](z,m,P,b)).toUpperCase();};H["e"]=function(z,m,P,b){iPrecision=parseInt(P);if(isNaN(iPrecision)){iPrecision=6;}rs=(Math.abs(b)).toExponential(iPrecision);if(rs.indexOf(".")<0&&z.indexOf("#")>=0){rs=rs.replace(/^(.*)(e.*)$/,"$1.$2");}return E(z,m,rs,b);};H["f"]=function(z,m,P,b){iPrecision=parseInt(P);if(isNaN(iPrecision)){iPrecision=6;}rs=(Math.abs(b)).toFixed(iPrecision);if(rs.indexOf(".")<0&&z.indexOf("#")>=0){rs=rs+".";}return E(z,m,rs,b);};H["G"]=function(z,m,P,b){return (H["g"](z,m,P,b)).toUpperCase();};H["g"]=function(z,m,P,b){iPrecision=parseInt(P);absArg=Math.abs(b);rse=absArg.toExponential();rsf=absArg.toFixed(6);if(!isNaN(iPrecision)){rsep=absArg.toExponential(iPrecision);rse=rsep.length<rse.length?rsep:rse;rsfp=absArg.toFixed(iPrecision);rsf=rsfp.length<rsf.length?rsfp:rsf;}if(rse.indexOf(".")<0&&z.indexOf("#")>=0){rse=rse.replace(/^(.*)(e.*)$/,"$1.$2");}if(rsf.indexOf(".")<0&&z.indexOf("#")>=0){rsf=rsf+".";}rs=rse.length<rsf.length?rse:rsf;return E(z,m,rs,b);};H["o"]=function(z,a,P,b){var l=parseInt(P);var m=Math.round(Math.abs(b)).toString(8);if(m.length<l){m=V(m," ",l-m.length);}if(z.indexOf("#")>=0){m="0"+m;}return E(z,a,m,b);};H["X"]=function(z,m,P,b){return (H["x"](z,m,P,b)).toUpperCase();};H["x"]=function(z,a,P,b){var l=parseInt(P);b=Math.abs(b);var m=Math.round(b).toString(16);if(m.length<l){m=V(m," ",l-m.length);}if(z.indexOf("#")>=0){m="0x"+m;}return E(z,a,m,b);};H["s"]=function(z,a,P,b){var l=parseInt(P);var m=b;if(m.length>l){m=m.substring(0,l);}return E(z,a,m,0);};H["a"]=function(z,m,P,b){if(b instanceof Array){return F.output.sentencise(b,"<b>");}return b;};farr=j.split("%");retstr=farr[0];fpRE=/^([0-9]+\$)?([-+ #]*)(\d*)\.?(\d*)([acdieEfFgGosuxX])(.*)$/;for(var g=1;g<farr.length;g++){fps=fpRE.exec(farr[g]);if(!fps){continue;}var M=g;if(fps[1]){M=fps[1].replace("$","");}if(arguments[M]!=null){retstr+=H[fps[5]](fps[2],fps[3],fps[4],arguments[M]);}retstr+=fps[6];}return retstr;};if(window.ActiveXObject&&!window.XMLHttpRequest){window.XMLHttpRequest=function(){return new ActiveXObject((navigator.userAgent.toLowerCase().indexOf("msie 5")!=-1)?"Microsoft.XMLHTTP":"Msxml2.XMLHTTP");};}global_fakeOperaXMLHttpRequestSupport=false;if(window.opera&&(!window.XMLHttpRequest||!(new window.XMLHttpRequest()).setRequestHeader)){global_fakeOperaXMLHttpRequestSupport=true;window.XMLHttpRequest=function(){this.readyState=0;this.status=0;this.statusText="";this._headers=[];this._aborted=false;this._async=true;this.abort=function(){this._aborted=true;};this.getAllResponseHeaders=function(){return this.getAllResponseHeader("*");};this.getAllResponseHeader=function(Q){var A="";for(var o=0;o<this._headers.length;o++){if(Q=="*"||this._headers[o].h==Q){A+=this._headers[o].h+": "+this._headers[o].v+"\n";}}return A;};this.setRequestHeader=function(o,A){this._headers[this._headers.length]={h:o,v:A};};this.open=function(u,Q,Z,A,o){this.method=u;this.url=Q;this._async=true;this._aborted=false;if(arguments.length>=3){this._async=Z;}if(arguments.length>3){opera.postError("XMLHttpRequest.open() - user/password not supported");}this._headers=[];this.readyState=1;if(this.onreadystatechange){this.onreadystatechange();}};this.send=function(A){if(!navigator.javaEnabled()){alert("XMLHttpRequest.send() - Java must be installed and enabled.");return ;}if(this._async){setTimeout(this._sendasync,0,this,A);}else{this._sendsync(A);}};this._sendasync=function(A,o){if(!A._aborted){A._sendsync(o);}};this._sendsync=function(q){this.readyState=2;if(this.onreadystatechange){this.onreadystatechange();}var l=new java.net.URL(new java.net.URL(window.location.href),this.url);var C=l.openConnection();for(var J=0;J<this._headers.length;J++){C.setRequestProperty(this._headers[J].h,this._headers[J].v);}this._headers=[];if(this.method=="POST"){C.setDoOutput(true);var o=new java.io.OutputStreamWriter(C.getOutputStream());o.write(q);o.flush();o.close();}var g=false;var j=false;var u=false;var Q=false;var v=false;var I=false;for(var J=0;;J++){var a=C.getHeaderFieldKey(J);var S=C.getHeaderField(J);if(a==null&&S==null){break;}if(a!=null){this._headers[this._headers.length]={h:a,v:S};switch(a.toLowerCase()){case "content-encoding":g=true;break;case "content-length":j=true;break;case "content-type":u=true;break;case "date":Q=true;break;case "expires":v=true;break;case "last-modified":I=true;break;}}}var Y;Y=C.getContentEncoding();if(Y!=null&&!g){this._headers[this._headers.length]={h:"Content-encoding",v:Y};}Y=C.getContentLength();if(Y!=-1&&!j){this._headers[this._headers.length]={h:"Content-length",v:Y};}Y=C.getContentType();if(Y!=null&&!u){this._headers[this._headers.length]={h:"Content-type",v:Y};}Y=C.getDate();if(Y!=0&&!Q){this._headers[this._headers.length]={h:"Date",v:(new Date(Y)).toUTCString()};}Y=C.getExpiration();if(Y!=0&&!v){this._headers[this._headers.length]={h:"Expires",v:(new Date(Y)).toUTCString()};}Y=C.getLastModified();if(Y!=0&&!I){this._headers[this._headers.length]={h:"Last-modified",v:(new Date(Y)).toUTCString()};}var Z="";var n=C.getInputStream();if(n){var A=new java.io.BufferedReader(new java.io.InputStreamReader(n));var y;while((y=A.readLine())!=null){if(this.readyState==2){this.readyState=3;if(this.onreadystatechange){this.onreadystatechange();}}Z+=y+"\n";}A.close();this.status=200;this.statusText="OK";this.responseText=Z;this.readyState=4;if(this.onreadystatechange){this.onreadystatechange();}if(this.onload){this.onload();}}else{this.status=404;this.statusText="Not Found";this.responseText="";this.readyState=4;if(this.onreadystatechange){this.onreadystatechange();}if(this.onerror){this.onerror();}}};};}if(!window.ActiveXObject&&window.XMLHttpRequest){window.ActiveXObject=function(A){switch(A.toLowerCase()){case "microsoft.xmlhttp":case "msxml2.xmlhttp":return new XMLHttpRequest();}return null;};}F.API={};F.API.callMethod=function(B,L,C,E,N,K,G,Q){if(_qs_args.APIdelayMS){Q=_qs_args.APIdelayMS}var R={};if(typeof L=="object"){for(var J in L){R[J]=L[J]}}R.method=B;var D=(G)?0:1;var S="/services/rest/";if(K){S=K+S}R.src="js";R.api_key=global_magisterLudi;R.auth_hash=global_auth_hash;R.auth_token=global_auth_token;R.cb=new Date().getTime();var O=[];var I="";for(var J in R){if(J=="RESTURL"){continue}R[J]=R[J];O.push(J);I+="&"+J+"="+escape_utf8(R[J])}O.sort();var H=global_flickr_secret;if(H!=""&&window.md5_calcMD5){for(var P=0;P<O.length;P++){H+=O[P]+R[O[P]]}H=md5_calcMD5(H);I="api_sig="+H+I}R.RESTURL=I;var N=(N==undefined)?1:N;var A=new XMLHttpRequest();var M={};if(D){F.eb_add(M);M.window_onbeforeunload=function(T){F.eb_remove(M);A.onreadystatechange=function(){};A.abort();if(T&&typeof F.API=="object"){F.API.handleResponse(null,B,R,"Action cancelled by window unload. Try again please!",C)}}}R.timer_index=_page_timer.add("before api call "+R.method);if(A){A.onreadystatechange=function(){if(A.readyState==4){if(A.responseText==""&&N<2){N++;A.abort();F.API.callMethod(B,R,C,E,N,K,D)}else{F.eb_remove(M);if(typeof F.API=="object"){F.API.handleResponse(A.responseXML,B,R,A.responseText,C)}}this.onreadystatechange=null}};if(E){S=E}A.open("POST",S,D);A.setRequestHeader("Content-Type","application/x-www-form-urlencoded");if(D&&Q){if(_qs_args.no_api_debug!="1"){writeAPIDebug("delaying API call "+Q+" milliseconds for "+S+"?"+I)}setTimeout(function(){if(_qs_args.no_api_debug!="1"){writeAPIDebug(S+"?"+I)}A.send(I)},Q)}else{if(_qs_args.no_api_debug!="1"){writeAPIDebug(S+"?"+I)}A.send(I)}if(!D){this.handleResponse(A.responseXML,B,R,A.responseText,C)}}};F.API.getCallBackName=function(A){return A.split(".").join("_")+"_onLoad"};F.API.handleResponse=function(responseXML,APIMethod,params,responseText,listener){if(params.format=="json"){var success=0;var jsonFlickrApi=function(rsp){if(rsp.stat=="ok"){success=1}responseXML=rsp};try{eval(responseText)}catch(e){}}else{if(!responseXML){var success=(responseText.indexOf('<?xml version="1.0" encoding="utf-8" ?>\n<rsp stat="ok">')==0)?true:false}else{if(navigator.userAgent.indexOf("Gecko")>-1&&!F.is_safari){responseXML=F.str_to_XML(responseText)}var success=(responseXML.documentElement&&responseXML.documentElement.getAttribute("stat")=="ok")?true:false}}if(success){if(_qs_args.no_api_debug!="1"){writeAPIDebug(responseText)}}else{writeAPIDebug(responseText+"\r"+_uber_toString(params))}if((window.global_rper&&!success)||_qs_args.rper=="1"){var code="";var msg="";var rsp_str="";if(responseXML&&responseXML.documentElement){if(responseXML.documentElement.getElementsByTagName("err")){var err=responseXML.documentElement.getElementsByTagName("err")[0];if(err){code=err.getAttribute("code");msg=err.getAttribute("msg");rsp_str=responseText}}}F.fragment_getter.get("/report_error.gne",{report:"api_err",json_str:JSON.stringify({req_params:params,success:success,code:code,rsp_str:rsp_str,user_nsid:window.global_nsid,user_name:window.global_name,agent:navigator.userAgent})},{rp:function(){}},"rp")}_page_timer.add("after api call "+params.method);_page_timer.dump(params.timer_index);listener=(listener)?listener:this;if(typeof listener[this.getCallBackName(APIMethod)]=="function"){listener[this.getCallBackName(APIMethod)](success,responseXML,responseText,params)}else{if(typeof listener.generic_api_onLoad=="function"){listener.generic_api_onLoad(success,responseXML,responseText,params)}}};F.fragment_getter={};F.fragment_getter.get=function(B,I,E,C,O,H,L,J){if(typeof I!="object"){I={}}var G=(L)?0:1;var N=B;if(H){N=H+N}if(B&&B.indexOf("?")==-1){var A="?src=js"}else{var A="&src=js"}for(var D in I){A+="&"+D+"="+escape_utf8(I[D])}A+="&cb="+new Date().getTime();I.RESTURL=N+A;var O=(O==undefined)?1:O;var K=new XMLHttpRequest();if(K){K.onreadystatechange=function(){if(K.readyState==4){if(K.responseText==""&&O<1){O++;K.abort();F.fragment_getter.get(B,I,E,C,O,H,L,J)}else{F.fragment_getter.handleResponse(C,I,K.responseText,E)}this.onreadystatechange=null}};var M=A.length>1000||window.page_always_post_fragment_requests;if(M){K.open("POST",N,G)}else{K.open("GET",N+A,G)}K.setRequestHeader("Content-Type","application/x-www-form-urlencoded");if(G&&J){setTimeout(function(){if(M){K.send(A)}else{K.send(null)}},J)}else{if(M){K.send(A)}else{K.send(null)}}}};F.fragment_getter.handleResponse=function(A,E,D,C){C=(C)?C:this;if(_qs_args.no_api_debug!="1"){writeAPIDebug(D)}try{C[A](1,D,E)}catch(B){}};var escape_utf8=function(H){if(H===""||H===null||H===undefined){return""}H=H.toString();var B="";for(var E=0;E<H.length;E++){var I=H.charCodeAt(E);var D=new Array();if(I>65536){D[0]=240|((I&1835008)>>>18);D[1]=128|((I&258048)>>>12);D[2]=128|((I&4032)>>>6);D[3]=128|(I&63)}else{if(I>2048){D[0]=224|((I&61440)>>>12);D[1]=128|((I&4032)>>>6);D[2]=128|(I&63)}else{if(I>128){D[0]=192|((I&1984)>>>6);D[1]=128|(I&63)}else{D[0]=I}}}if(D.length>1){for(var C=0;C<D.length;C++){var A=D[C];var G=nibble_to_hex((A&240)>>>4)+nibble_to_hex(A&15);B+="%"+G}}else{if(encodeURIComponent&&typeof encodeURIComponent=="function"){B+=encodeURIComponent(String.fromCharCode(D[0]))}else{B+=(String.fromCharCode(D[0]))}}}return B};var nibble_to_hex=function(A){var B="0123456789ABCDEF";return B.charAt(A)};var flashDescription;var requiredVersion=6;var useRedirect=false;var flashPage="movie.html";var noFlashPage="noflash.html";var upgradePage="upgrade.html";var flash2Installed=false;var flash3Installed=false;var flash4Installed=false;var flash5Installed=false;var flash6Installed=false;var flash7Installed=false;var maxVersion=7;var actualVersion=0;var hasRightVersion=false;var jsVersion=1;var isIE=(navigator.appVersion.indexOf("MSIE")!=-1)?true:false;var isWin=(navigator.appVersion.indexOf("Windows")!=-1)?true:false;jsVersion=1.1;if(isIE&&isWin){document.write("<SCRIPT LANGUAGE=VBScript> \n");document.write("on error resume next \n");document.write('flash2Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.2"))) \n');document.write('flash3Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.3"))) \n');document.write('flash4Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.4"))) \n');document.write('flash5Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.5"))) \n');document.write('flash6Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.6"))) \n');document.write("</SCRIPT> \n")}function detectFlash(){if(navigator.plugins){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var isVersion2=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";flashDescription=navigator.plugins["Shockwave Flash"+isVersion2].description;var a=flashDescription.split(".")[0].split(" ");var flashVersion=parseInt(a[a.length-1]);flash2Installed=flashVersion==2;flash3Installed=flashVersion==3;flash4Installed=flashVersion==4;flash5Installed=flashVersion==5;flash6Installed=flashVersion==6;flash7Installed=flashVersion>=7}}for(var i=2;i<=maxVersion;i++){if(eval("flash"+i+"Installed")==true){actualVersion=i}}if(navigator.userAgent.indexOf("WebTV")!=-1){actualVersion=3}if(actualVersion>=requiredVersion){if(useRedirect){if(jsVersion>1){window.location.replace(flashPage)}else{window.location=flashPage}}hasRightVersion=true}else{if(useRedirect){if(jsVersion>1){window.location.replace((actualVersion>=2)?upgradePage:noFlashPage)}else{window.location=(actualVersion>=2)?upgradePage:noFlashPage}}}}detectFlash();var md5_hex_chr="0123456789abcdef";function md5_rhex(X){str="";for(j=0;j<=3;j++){str+=md5_hex_chr.charAt((X>>(j*8+4))&15)+md5_hex_chr.charAt((X>>(j*8))&15);}return str;}function md5_str2blks_MD5(X){nblk=((X.length+8)>>6)+1;blks=new Array(nblk*16);for(i=0;i<nblk*16;i++){blks[i]=0;}for(i=0;i<X.length;i++){blks[i>>2]|=X.charCodeAt(i)<<((i%4)*8);}blks[i>>2]|=128<<((i%4)*8);blks[nblk*16-2]=X.length*8;return blks;}function md5_add(X,w){var I=(X&65535)+(w&65535);var T=(X>>16)+(w>>16)+(I>>16);return (T<<16)|(I&65535);}function md5_rol(X,T){return (X<<T)|(X>>>(32-T));}function md5_cmn(P,I,T,X,V,w){return md5_add(md5_rol(md5_add(md5_add(I,P),md5_add(X,w)),V),T);}function md5_ff(I,T,S,P,X,V,w){return md5_cmn((T&S)|((~T)&P),I,T,X,V,w);}function md5_gg(I,T,S,P,X,V,w){return md5_cmn((T&P)|(S&(~P)),I,T,X,V,w);}function md5_hh(I,T,S,P,X,V,w){return md5_cmn(T^S^P,I,T,X,V,w);}function md5_ii(I,T,S,P,X,V,w){return md5_cmn(S^(T|(~P)),I,T,X,V,w);}function md5_calcMD5(X){x=md5_str2blks_MD5(X);a=1732584193;b=-271733879;c=-1732584194;d=271733878;for(i=0;i<x.length;i+=16){olda=a;oldb=b;oldc=c;oldd=d;a=md5_ff(a,b,c,d,x[i+0],7,-680876936);d=md5_ff(d,a,b,c,x[i+1],12,-389564586);c=md5_ff(c,d,a,b,x[i+2],17,606105819);b=md5_ff(b,c,d,a,x[i+3],22,-1044525330);a=md5_ff(a,b,c,d,x[i+4],7,-176418897);d=md5_ff(d,a,b,c,x[i+5],12,1200080426);c=md5_ff(c,d,a,b,x[i+6],17,-1473231341);b=md5_ff(b,c,d,a,x[i+7],22,-45705983);a=md5_ff(a,b,c,d,x[i+8],7,1770035416);d=md5_ff(d,a,b,c,x[i+9],12,-1958414417);c=md5_ff(c,d,a,b,x[i+10],17,-42063);b=md5_ff(b,c,d,a,x[i+11],22,-1990404162);a=md5_ff(a,b,c,d,x[i+12],7,1804603682);d=md5_ff(d,a,b,c,x[i+13],12,-40341101);c=md5_ff(c,d,a,b,x[i+14],17,-1502002290);b=md5_ff(b,c,d,a,x[i+15],22,1236535329);a=md5_gg(a,b,c,d,x[i+1],5,-165796510);d=md5_gg(d,a,b,c,x[i+6],9,-1069501632);c=md5_gg(c,d,a,b,x[i+11],14,643717713);b=md5_gg(b,c,d,a,x[i+0],20,-373897302);a=md5_gg(a,b,c,d,x[i+5],5,-701558691);d=md5_gg(d,a,b,c,x[i+10],9,38016083);c=md5_gg(c,d,a,b,x[i+15],14,-660478335);b=md5_gg(b,c,d,a,x[i+4],20,-405537848);a=md5_gg(a,b,c,d,x[i+9],5,568446438);d=md5_gg(d,a,b,c,x[i+14],9,-1019803690);c=md5_gg(c,d,a,b,x[i+3],14,-187363961);b=md5_gg(b,c,d,a,x[i+8],20,1163531501);a=md5_gg(a,b,c,d,x[i+13],5,-1444681467);d=md5_gg(d,a,b,c,x[i+2],9,-51403784);c=md5_gg(c,d,a,b,x[i+7],14,1735328473);b=md5_gg(b,c,d,a,x[i+12],20,-1926607734);a=md5_hh(a,b,c,d,x[i+5],4,-378558);d=md5_hh(d,a,b,c,x[i+8],11,-2022574463);c=md5_hh(c,d,a,b,x[i+11],16,1839030562);b=md5_hh(b,c,d,a,x[i+14],23,-35309556);a=md5_hh(a,b,c,d,x[i+1],4,-1530992060);d=md5_hh(d,a,b,c,x[i+4],11,1272893353);c=md5_hh(c,d,a,b,x[i+7],16,-155497632);b=md5_hh(b,c,d,a,x[i+10],23,-1094730640);a=md5_hh(a,b,c,d,x[i+13],4,681279174);d=md5_hh(d,a,b,c,x[i+0],11,-358537222);c=md5_hh(c,d,a,b,x[i+3],16,-722521979);b=md5_hh(b,c,d,a,x[i+6],23,76029189);a=md5_hh(a,b,c,d,x[i+9],4,-640364487);d=md5_hh(d,a,b,c,x[i+12],11,-421815835);c=md5_hh(c,d,a,b,x[i+15],16,530742520);b=md5_hh(b,c,d,a,x[i+2],23,-995338651);a=md5_ii(a,b,c,d,x[i+0],6,-198630844);d=md5_ii(d,a,b,c,x[i+7],10,1126891415);c=md5_ii(c,d,a,b,x[i+14],15,-1416354905);b=md5_ii(b,c,d,a,x[i+5],21,-57434055);a=md5_ii(a,b,c,d,x[i+12],6,1700485571);d=md5_ii(d,a,b,c,x[i+3],10,-1894986606);c=md5_ii(c,d,a,b,x[i+10],15,-1051523);b=md5_ii(b,c,d,a,x[i+1],21,-2054922799);a=md5_ii(a,b,c,d,x[i+8],6,1873313359);d=md5_ii(d,a,b,c,x[i+15],10,-30611744);c=md5_ii(c,d,a,b,x[i+6],15,-1560198380);b=md5_ii(b,c,d,a,x[i+13],21,1309151649);a=md5_ii(a,b,c,d,x[i+4],6,-145523070);d=md5_ii(d,a,b,c,x[i+11],10,-1120210379);c=md5_ii(c,d,a,b,x[i+2],15,718787259);b=md5_ii(b,c,d,a,x[i+9],21,-343485551);a=md5_add(a,olda);b=md5_add(b,oldb);c=md5_add(c,oldc);d=md5_add(d,oldd);}return md5_rhex(a)+md5_rhex(b)+md5_rhex(c)+md5_rhex(d);}var g_tooltip_elm=null;var g_tooltip_inner_elm=null;var g_tooltip_showing=0;var g_tooltip_trigger_elm=null;var g_tooltip_previous_click=null;var g_tip_elm=null;function init_tooltip(){g_tooltip_elm=document.createElement("DIV");g_tooltip_inner_elm=document.createElement("DIV");g_tooltip_elm.style.display="none";g_tooltip_elm.style.zIndex="200000";document.body.appendChild(g_tooltip_elm);g_tooltip_elm.appendChild(g_tooltip_inner_elm)}function show_tooltip(B,D,E,A,F){if(!g_tooltip_elm){init_tooltip()}if(Y.U.Dom.getStyle(B,"visibility")=="hidden"){return }var F=F||"ToolTip";g_tooltip_elm.className=F;if(g_tooltip_showing){if(g_tooltip_trigger_elm==B){hide_tooltip();return }hide_tooltip()}var A=(A==undefined)?"":A;E+=A.length;g_tip_elm=document.getElementById(D);g_tooltip_inner_elm.innerHTML=g_tip_elm.innerHTML+A;g_tooltip_inner_elm.style.width="auto";g_tooltip_elm.style.display="block";g_tooltip_elm.style.visibility="hidden";if(F!="ToolTipSmall"){var J=150;if(E>200){J=300}else{if(E>100){J=200}}g_tooltip_inner_elm.style.width=J+"px"}var C=g_tooltip_elm.offsetWidth;var I=Y.U.Dom.getX(B);var G=Y.U.Dom.getY(B);if(F=="ToolTipSmall"){I-=Math.round((C-B.offsetWidth)/2)-5;if(B.tip_placement=="below"){G+=B.offsetHeight+10}else{G-=22}}else{G+=20}var H=_find_screen_width()-40;if(I+C>H){I=H-C}I=Math.max(10,I);g_tooltip_elm.style.left=I+"px";g_tooltip_elm.style.top=G+"px";g_tooltip_showing=1;g_tooltip_elm.style.display="block";g_tooltip_elm.style.visibility="visible";g_tooltip_trigger_elm=B;document.onmousedown=doc_mousedown}function doc_mousedown(B){var A=_get_event_src(B);if(A==g_tooltip_trigger_elm||(_el_is_in_a_link(A)&&tooltip_el_is_in_tooltip(A))){document.onmousedown=function(){}}else{hide_tooltip()}}function hide_tooltip(A){if(A){if(g_tooltip_trigger_elm!=A){return }}document.onmousedown=function(){};if(!g_tooltip_elm){return false}g_tooltip_showing=0;g_tooltip_elm.style.display="none";g_tooltip_trigger_elm="null";return false}var tooltip_el_is_in_tooltip=function(A){var B=A;while(B){if(B==g_tooltip_elm){return 1}B=B.parentNode}return 0};function deja_view_check(Q){if(!Q||!_ok_for_scrumjax_xml()){return ;}window.deja_view_item=Q;window.deja_view_should_refresh=0;window.deja_view_type=Q.substring(0,1);window.deja_view_id=Q.replace(deja_view_type,"");var p=_get_cookie("deja_view");if(p){georgeA=p.split(" ");for(var K=0;K<georgeA.length;K++){var L=georgeA[K].split("^");if(L[0]==Q){if(global_time_stamp==L[1]){deja_view_should_refresh=1;document.write("<style>#otherContexts_div {display:none} </style>");}break;}}}}function deja_view_uh_huh(){if(!window.deja_view_item){return ;}var Q=deja_view_item+"^"+global_time_stamp;var L=[Q];var T=_get_cookie("deja_view");if(T){georgeA=T.split(" ");for(var K=0;K<georgeA.length;K++){var p=georgeA[K].split("^");if(p[0]!=deja_view_item){L.push(georgeA[K]);}if(L.length==30){break;}}}_set_cookie("deja_view",L.join(" "),1);}function deja_view_refresh(){if(!window.deja_view_should_refresh||!window.deja_view_item||!_ok_for_scrumjax_xml()){return ;}var K={};K.flickr_photos_getInfo_onLoad=function(k,y,p){if(k){var L=_ge("title_div"+deja_view_id);if(L){L.flickr_photos_getInfo_onLoad(k,y,p);}var Q=_ge("photo_notes");if(Q&&Q.p_id){Q.flickr_photos_getInfo_onLoad(k,y,p);}var T=_ge("description_div"+deja_view_id);if(T){T.flickr_photos_getInfo_onLoad(k,y,p);}var h=_ge("tagadder");if(h){h.flickr_photos_getInfo_onLoad(k,y,p);}}else{}};K.flickr_photos_getAllContexts_onLoad=function(H,N,y){var L=_ge("otherContexts_div");if(H){var a={};var T=N.documentElement.getElementsByTagName("set");for(var S=0;S<T.length;S++){var Q=T[S].getAttribute("id");a["contextDiv_set"+Q]=1;add_context_widget("set",Q,deja_view_id);}var q=N.documentElement.getElementsByTagName("pool");for(var S=0;S<q.length;S++){var Q=q[S].getAttribute("id");a["contextDiv_pool"+Q]=1;add_context_widget("pool",Q,deja_view_id);}var h=Y.U.Dom.getElementsByClassName("contextDiv","DIV");for(var S=0;S<h.length;S++){var p=h[S].id;if(a[p]!=1){var k="set";var s=p.split(k);if(s.length==1){k="pool";s=p.split(k);}var Q=s[1];remove_context_widget(k,Q);}}}else{}L.style.display="block";};if(deja_view_type=="p"){F.API.callMethod("flickr.photos.getInfo",{photo_id:deja_view_id},K);F.API.callMethod("flickr.photos.getAllContexts",{photo_id:deja_view_id},K);}else{}}var tab_bumper=1;var insitu_init_page_set_description_div=function(A){if(!_ok_for_scrumjax()){return false}var B=insitu_init_generic_description_div(A,global_sets);B.getInput=function(){return'<textarea name="content" tabindex="'+tab_bumper+'1" style="font-family:arial; font-size:12px; padding:3px; margin-top:14px; width:100%; height:75px;border:1px inset #e9e9ae; background-color:#ffffd3; margin-bottom:5px;">'+this.form_content.escape_for_xml()+"</textarea>"};return true};var insitu_init_page_set_title_div=function(A){if(!_ok_for_scrumjax()){return false}var B=insitu_init_generic_title_div(A,global_sets);B.getInput=function(){return'<input name="content" value="'+this.form_content.escape_for_xml().replace('"',"&#34;")+'" style="font-size:32px; font-family:arial; padding:3px; width:100%; border:1px inset #e9e9ae; background-color:#ffffd3; margin-bottom:5px;">'};B.getExtra=function(){return"<br>"};return true};var insitu_init_page_collection_description_div=function(B,A){if(!_ok_for_scrumjax()){return false}var C=insitu_init_generic_description_div(B,global_collections);C.getInput=function(){return'<textarea name="content" tabindex="'+tab_bumper+'1" style="font-family:arial; font-size:12px; padding:3px; margin-top:14px; width:100%; height:150px;border:1px inset #e9e9ae; background-color:#ffffd3; margin-bottom:5px;">'+this.form_content.escape_for_xml()+"</textarea>"};C.after_save_func=A;return true};var insitu_init_page_collection_title_div=function(A){if(!_ok_for_scrumjax()){return false}var B=insitu_init_generic_title_div(A,global_collections);B.getInput=function(){return'<input name="content" value="'+this.form_content.escape_for_xml().replace('"',"&#34;")+'" style="font-size:22px; font-family:arial; padding:3px; width:100%; border:1px inset #e9e9ae; background-color:#ffffd3; margin-bottom:5px;">'};B.getExtra=function(){return"<br>"};return true};var insitu_init_page_photo_description_div=function(A){if(!_ok_for_scrumjax()){return false}var B=insitu_init_generic_description_div(A,global_photos);B.getInput=function(){return'<textarea tabindex="'+tab_bumper+'1" name="content" style="font-family:arial; font-size:12px; padding:3px; margin-top:0px; width:100%; height:100px; border:1px inset #e9e9ae; background-color:#ffffd3; margin-bottom:5px;">'+this.form_content.escape_for_xml()+"</textarea>"};B.getExtra=function(){return"<br>"};return true};var insitu_init_page_photo_title_div=function(A){if(!_ok_for_scrumjax()){return false}var B=insitu_init_generic_title_div(A,global_photos);B.getInput=function(){return'<input name="content" value="'+this.form_content.escape_for_xml().replace('"',"&#34;")+'" style="font-size:22px; font-weight: bold; font-family: Arial; padding:4px; width:100%; border:1px inset #e9e9ae; background-color:#ffffd3; margin-bottom:5px;">'};B.getExtra=function(){return"<br>"};return true};var insitu_init_group_blast_div=function(B,A,C){if(!_ok_for_scrumjax()){return false}var D=_ge("description_div"+B);D.title=F.output.get("insitu_click_to_edit");D.hash_id=B;D.show_some_html_is_ok=true;D.blast_date=A;D.buddy_icon=C;if(_ge("div_boing_alert_"+this.hash_id)){D.emptyText='<i style="color: rgb(136, 136, 136);">'+F.output.get("insitu_click_to_add_blast")+"</i>&nbsp;"}else{D.emptyText='<i style="color: rgb(136, 136, 136);">'+F.output.get("insitu_click_to_add_blast_spon")+"</i>&nbsp;"}D.form_content=(D.innerHTML==D.emptyText||D.innerHTML=="&nbsp;")?"":D.innerHTML;D.blast_date_format='<small id="blast_date" style="font-size: 11px;">'+A+"</small>";D.change_checker=false;D=insitu_init_editable_div(D);D.getInput=function(){return'<textarea id="ta_content_'+B+'" tabindex="'+tab_bumper+'1" name="content" style="font-family:arial; font-size:14px; padding:3px; margin-top:0px; width:100%; height:100px; border:1px inset #e9e9ae; background-color:#ffffd3; margin-bottom:5px;">'+_ge("description_simple_div"+D.hash_id).innerHTML.replace("<br>",String.fromCharCode(13))+"</textarea>"};D.getExtra=function(){return"<br>"};D.flickr_groups_getInfo_onLoad=function(I,H){var E=new Date();D.blast_date=E.flickr_minidate()+" - ";D.blast_date_format='<small id="blast_date" style="font-size: 11px;">'+D.blast_date+"</small> ";if(I){if(H.documentElement.getElementsByTagName("blast").length>0&&H.documentElement.getElementsByTagName("blast")[0].firstChild){var G=H.documentElement.getElementsByTagName("blast")[0].firstChild.nodeValue}else{var G=""}D.description=D.form_content=G}else{D.description=D.form_content=this.new_blast}if(D.form_content.length>0){_ge("description_simple_div"+D.hash_id).innerHTML=D.form_content;if(_ge("div_boing_alert_"+this.hash_id)){D.form_content='<table cellpadding="0" collspacing="0" border="0"><tr><td width="55px" valign="top"><img src="'+global_icon_url+'" id="icon_'+global_nsid+'" width="48px" height="48px" /></td><td valign="top"><strong>'+F.output.get("page_groups_view_admin_says",global_name)+"</strong><br />"+D.blast_date_format+D.form_content.trim().nl2br()+"</td></tr></table>"}else{D.form_content=D.form_content.trim().nl2br()}D.innerHTML=D.form_content;D.style.border="1px solid #e2e2e2";if(_ge("div_boing_alert_"+this.hash_id)){personmenu_process_img(_ge("icon_"+global_nsid))}}else{_ge("description_simple_div"+D.hash_id).innerHTML=D.form_content;if(_ge("div_boing_alert_"+this.hash_id)){D.form_content=F.output.get("page_groups_view_add_ann")}else{D.form_content=F.output.get("insitu_click_to_add_blast_spon")}D.innerHTML="<i>"+D.form_content+"</i>";D.style.border="1px solid #f4f4f4";D.style.color="#a3a3a3"}};D.flickr_groups_addBlast_onLoad=D.flickr_photosets_getInfo_onLoad=function(H,G){if(H){F.API.callMethod("flickr.groups.getInfo",{group_id:this.hash_id},D)}else{D.description=D.form_content=this.new_blast;if(D.form_content.length>0){_ge("description_simple_div"+D.hash_id).innerHTML=D.form_content;if(_ge("div_boing_alert_"+this.hash_id)){D.form_content='<table cellpadding="0" collspacing="0" border="0"><tr><td width="55px" valign="top"><img src="'+global_icon_url+'" id="icon_'+global_nsid+'" width="48px" height="48px" /></td><td valign="top"><strong>'+F.output.get("page_groups_view_admin_says",global_name)+"</strong><br />"+D.blast_date_format+" - "+D.form_content.trim().nl2br()+"</td></tr></table>"}else{D.form_content=D.form_content.trim().nl2br()}D.innerHTML=D.form_content;D.style.border="1px solid #e2e2e2";if(_ge("div_boing_alert_"+this.hash_id)){personmenu_process_img(_ge("icon_"+global_nsid))}var E=1}else{_ge("description_simple_div"+D.hash_id).innerHTML=D.form_content;D.form_content=F.output.get("page_groups_view_add_ann");D.innerHTML=D.form_content;D.style.border="1px solid #f4f4f4"}}};D.check_changes=function(E){if(E){this.change_checker=true;setTimeout("_ge('description_div"+this.hash_id+"').do_change_checker()",250)}else{this.change_checker=false}};D.do_change_checker=function(){if(this.change_checker&&_ge("div_boing_alert_"+this.hash_id)){if(_ge("ta_content_"+this.hash_id).value.length>500){_ge("div_boing_alert_"+this.hash_id).style.display="block";if(_ge("blast_save_button")){_ge("blast_save_button").disabled=true;Y.U.Dom.removeClass("blast_save_button","Butt");Y.U.Dom.addClass("blast_save_button","DisabledButt")}}else{_ge("div_boing_alert_"+this.hash_id).style.display="none";if(_ge("blast_save_button")){_ge("blast_save_button").disabled=false}if(_ge("blast_save_button")){_ge("blast_save_button").disabled=false;Y.U.Dom.removeClass("blast_save_button","DisabledButt");Y.U.Dom.addClass("blast_save_button","Butt")}}setTimeout("_ge('description_div"+this.hash_id+"').do_change_checker()",250)}};D.saveChanges=function(E){this.new_blast=E.content.value;this.innerHTML="<i>"+F.output.get("insitu_saving")+"</i>&nbsp;";this.endEditing();F.API.callMethod("flickr.groups.addBlast",{group_id:this.hash_id,blast:this.new_blast,user_id:global_nsid},D)};return true};var insitu_init_page_photos_user_description_div=function(B,A){A=(A||240);if(!_ok_for_scrumjax()){return false}var C=insitu_init_generic_description_div(B,global_photos);C.getInput=function(){return'<textarea name="content" tabindex="'+tab_bumper+'1" style="font-family:arial; font-size:12px; padding:3px; margin-top:0px; width:'+A+'px; height:75px;border:1px inset #e9e9ae; background-color:#ffffd3; margin-bottom:5px;">'+this.form_content.escape_for_xml()+"</textarea>"};return true};var insitu_init_page_photos_user_title_div=function(B,A){A=(A||240);if(!_ok_for_scrumjax()){return false}var C=insitu_init_generic_title_div(B,global_photos);C.getInput=function(){return'<input name="content" value="'+this.form_content.escape_for_xml().replace('"',"&#34;")+'" style="font-size:14px; font-weight:bold; font-family:arial; padding:3px; width:'+A+'px; border:1px inset #e9e9ae; background-color:#ffffd3; margin-bottom:5px;" />'};return true};var insitu_init_page_gallery_note_div=function(A){var B;var B=insitu_init_generic_description_div(A,global_photos);B.getInput=function(){return'<textarea name="content" tabindex="'+tab_bumper+'1" style="font-family:arial; font-size:12px; padding:3px; margin-top:14px; width:100%; height:75px;border:1px inset #e9e9ae; background-color:#ffffd3; margin-bottom:5px;">'+this.form_content.escape_for_xml()+"</textarea>"};return true};var insitu_init_page_gallery_description_div=function(A){var B;var B=insitu_init_generic_description_div(A,global_galleries);B.getInput=function(){return'<textarea name="content" tabindex="'+tab_bumper+'1" style="font-family:arial; font-size:12px; padding:3px; margin-top:14px; width:100%; height:75px;border:1px inset #e9e9ae; background-color:#ffffd3; margin-bottom:5px;">'+this.form_content.escape_for_xml()+"</textarea>"};return true};var insitu_init_page_gallery_title_div=function(A){var B=insitu_init_generic_title_div(A,global_galleries);B.getInput=function(){return'<input name="content" value="'+this.form_content.escape_for_xml().replace('"',"&#34;")+'" style="font-size:32px; font-family:arial; padding:3px; width:100%; border:1px inset #e9e9ae; background-color:#ffffd3; margin-bottom:5px;">'};B.getExtra=function(){return"<br>"};return true};var insitu_init_generic_description_div=function(B,A){if(!_ok_for_scrumjax()){return false}var C=_ge("description_div"+B);C.title=F.output.get("insitu_click_to_edit");C.hash_id=B;if(!A[C.hash_id]){alert(F.output.get("insitu_error_no_hash",C.hash_id));return false}C.form_content=A[C.hash_id].description;C.emptyText="<i>"+F.output.get("insitu_click_to_add_description")+"</i>&nbsp;";C.getExtra=function(){return""};C.flickr_photos_getInfo_onLoad=C.flickr_collections_getInfo_onLoad=C.flickr_photosets_getInfo_onLoad=function(H,G){if(H){if(G.documentElement.getElementsByTagName("description")&&G.documentElement.getElementsByTagName("description")[0]&&G.documentElement.getElementsByTagName("description")[0].firstChild){var D=G.documentElement.getElementsByTagName("description")[0].firstChild.nodeValue}else{var D=""}A[C.hash_id].description=C.form_content=D;var E=(A[C.hash_id].description=="")?"&nbsp;":A[C.hash_id].description.trim().nl2br();if(E!=C.innerHTML){C.innerHTML=E+"&nbsp;"}}else{C.form_content=A[C.hash_id].description;C.innerHTML=(A[C.hash_id].description=="")?"&nbsp;":A[C.hash_id].description.trim().nl2br()+"&nbsp;"}if(this.after_save_func){this.after_save_func()}};C.flickr_photos_setMeta_onLoad=C.flickr_collections_editMeta_onLoad=C.flickr_photosets_editMeta_onLoad=C.flickr_galleries_editPhoto_onLoad=C.flickr_galleries_editMeta_onLoad=function(E,D){if(E){if(_ok_for_scrumjax_xml()&&!window.global_galleries){if(A==global_sets){F.API.callMethod("flickr.photosets.getInfo",{photoset_id:this.hash_id},C)}else{if(A==global_collections){F.API.callMethod("flickr.collections.getInfo",{collection_id:this.hash_id},C)}else{if(A==global_photos){F.API.callMethod("flickr.photos.getInfo",{photo_id:this.hash_id},C)}}}}else{C.form_content=A[C.hash_id].description;C.innerHTML=(A[C.hash_id].description=="")?"&nbsp;":A[C.hash_id].description.trim().nl2br()+"&nbsp;"}}else{A[C.hash_id].description=C.form_content;C.innerHTML=(A[C.hash_id].description=="")?"&nbsp;":A[C.hash_id].description.trim().nl2br()+"&nbsp;";alert(F.output.get("insitu_description_error"))}};C.saveChanges=function(D){deja_view_uh_huh();A[this.hash_id].description=D.content.value;this.innerHTML="<i>"+F.output.get("insitu_saving")+"</i>&nbsp;";this.endEditing();if(!A[this.hash_id]){this.innerHTML=F.output.get("insitu_error_no_hash",this.hash_id);return false}if(A==global_sets){F.API.callMethod("flickr.photosets.editMeta",{photoset_id:this.hash_id,title:A[this.hash_id].title,description:A[this.hash_id].description},C)}else{if(A==global_collections){F.API.callMethod("flickr.collections.editMeta",{collection_id:this.hash_id,title:A[this.hash_id].title,description:A[this.hash_id].description},C)}else{if(A==global_photos){if(window.global_galleries){F.API.callMethod("flickr.galleries.editPhoto",{gallery_id:F.galleries.full_gallery_id,photo_id:this.hash_id,comment:A[this.hash_id].description},C)}else{F.API.callMethod("flickr.photos.setMeta",{photo_id:this.hash_id,title:A[this.hash_id].title,description:A[this.hash_id].description},C)}}else{if(A==window.global_galleries){F.API.callMethod("flickr.galleries.editMeta",{gallery_id:F.galleries.full_gallery_id,title:A[this.hash_id].title,description:A[this.hash_id].description},C)}else{alert(F.output.get("insitu_unknown_hash"))}}}}};if(window.deja_view_should_refresh){C.innerHTML="..."}return insitu_init_editable_div(C)};var insitu_init_generic_title_div=function(B,A){if(!_ok_for_scrumjax()){return false}var C=_ge("title_div"+B);C.title=F.output.get("insitu_click_to_edit");C._oldTitle=null;C.hash_id=B;if(!A[C.hash_id]){alert(F.output.get("insitu_unknown_hash"));return false}C.form_content=A[C.hash_id].title;C.emptyText="<i>"+F.output.get("insitu_click_to_add_title")+"</i>&nbsp;";C.getExtra=function(){return""};C.flickr_photos_getInfo_onLoad=C.flickr_collections_getInfo_onLoad=C.flickr_photosets_getInfo_onLoad=function(G,E){var D;if(G){if(E.documentElement.getElementsByTagName("title")[0].firstChild){var H=E.documentElement.getElementsByTagName("title")[0].firstChild.nodeValue}else{var H=""}A[C.hash_id].title=C.form_content=H;D=(A[C.hash_id].title=="")?"&nbsp;":A[C.hash_id].title.escape_for_xml()}else{C.form_content=A[C.hash_id].title;D=(A[C.hash_id].title=="")?"&nbsp;":A[C.hash_id].title.escape_for_display()}if(D!=C.innerHTML){C.innerHTML=D}document.title=document.title.replace(C._oldTitle,D)};C.flickr_photos_setMeta_onLoad=C.flickr_collections_editMeta_onLoad=C.flickr_photosets_editMeta_onLoad=C.flickr_galleries_editMeta_onLoad=function(G,E,D){if(G){if(_ok_for_scrumjax_xml()&&!window.global_galleries){if(A==global_sets){F.API.callMethod("flickr.photosets.getInfo",{photoset_id:this.hash_id},C)}else{if(A==global_collections){F.API.callMethod("flickr.collections.getInfo",{collection_id:this.hash_id},C)}else{if(A==global_photos){F.API.callMethod("flickr.photos.getInfo",{photo_id:this.hash_id},C)}}}}else{C.form_content=A[C.hash_id].title;C.innerHTML=(A[C.hash_id].title=="")?"&nbsp;":A[C.hash_id].title.escape_for_display()}}else{A[C.hash_id].title=C.form_content;C.innerHTML=(A[C.hash_id].title=="")?"&nbsp;":A[C.hash_id].title.escape_for_display();alert(F.output.get("insitu_error_title_not_saved",D))}};C.saveChanges=function(D){deja_view_uh_huh();A[this.hash_id].title=D.content.value;this._oldTitle=this.innerHTML;this.innerHTML="<i>"+F.output.get("insitu_saving")+"</i>&nbsp;";this.endEditing();if(!A[this.hash_id]){this.innerHTML=F.output.get("insitu_error_no_hash",this.hash_id);return false}if(A==global_sets){F.API.callMethod("flickr.photosets.editMeta",{photoset_id:this.hash_id,title:A[this.hash_id].title,description:A[this.hash_id].description},C)}else{if(A==global_collections){F.API.callMethod("flickr.collections.editMeta",{collection_id:this.hash_id,title:A[this.hash_id].title,description:A[this.hash_id].description},C)}else{if(A==global_photos){F.API.callMethod("flickr.photos.setMeta",{photo_id:this.hash_id,title:A[this.hash_id].title,description:A[this.hash_id].description},C)}else{if(A==window.global_galleries){F.API.callMethod("flickr.galleries.editMeta",{gallery_id:F.galleries.full_gallery_id,title:A[this.hash_id].title,description:A[this.hash_id].description},C)}else{alert(F.output.get("insitu_unknown_hash"))}}}}};if(window.deja_view_should_refresh){C.innerHTML="..."}return insitu_init_editable_div(C)};var insitu_init_editable_div=function(A){A.startEditing=function(){if(window.should_I_ignore_stuff_because_note_editing||window.should_I_ignore_stuff_because_of_button_action){return }window.should_I_ignore_stuff_because_of_editable_div_action=1;var B=_ge("photo_notes");if(B&&B.take_her_away){B.take_her_away()}this.isEditing=true;this.unhighlight();this.style.display="none";var C=this.getForm_div();C.style.display="block";var D=C.firstChild;D.content.focus();D.content.select();if(typeof (this.check_changes)=="function"){this.check_changes(true)}};A.endEditing=function(){window.should_I_ignore_stuff_because_of_editable_div_action=0;this.isEditing=false;var B=this.getForm_div();B.innerHTML="";B.style.display="none";this.style.display="block";if(typeof (this.check_changes)=="function"){this.check_changes(false);if(_ge("div_boing_alert_"+this.hash_id)){_ge("div_boing_alert_"+this.hash_id).style.display="none"}}};A.onclick=A.startEditing;A.getForm_div=function(){if(!this.form_div){this.form_div=document.createElement("div");this.parentNode.insertBefore(this.form_div,this);this.form_div.display_div=this}var C='<form onsubmit="this.parentNode.display_div.saveChanges(this); return false;" style="margin-left:'+this.style.marginLeft+'" style="margin-right:'+this.style.marginRight+'">';C+=this.getInput();if(A.show_some_html_is_ok){if(_ge("div_boing_alert_"+this.hash_id)){var B="window.open('/html.gne?tighten=1','html','status=yes,scrollbars=yes,resizable=yes,width=400,height=480')"}else{var B="window.open('/html.gne?','html','status=yes,scrollbars=yes,resizable=yes,width=400,height=480')"}if(window.do_bbml){if(_ge("div_boing_alert_"+this.hash_id)){B="F.html_info.show(this);"}else{B="F.html_info.show(this);"}}if(_ge("div_boing_alert_"+this.hash_id)){C+='<small>(<a class="Plain" onclick="'+B+';return false" href="/html.gne?tighten=1" tabindex="'+tab_bumper+'4">'+F.output.get("some_tiny_html")+"</a>.)</small>"}else{C+='<small>(<a class="Plain" onclick="'+B+';return false" href="/html.gne?tighten=0" tabindex="'+tab_bumper+'4">'+F.output.get("some_html")+"</a>.)</small>"}}C+='<br /><input id="blast_save_button" type="submit" class="Butt" value="'+F.output.get("save_up")+'" tabindex="'+tab_bumper+'2" />&nbsp;&nbsp;<span style="font-family:arial; font-size:12px;">'+F.output.get("or_up")+'</span>&nbsp;&nbsp;<input type="button" class="DeleteButt" value="'+F.output.get("cancel")+'" onclick="this.form.parentNode.display_div.endEditing();" tabindex="'+tab_bumper+'3" /></form>';C+=this.getExtra();this.form_div.innerHTML=C;tab_bumper+=10;return this.form_div};A.onmouseover=function(){if(window.should_I_ignore_stuff_because_note_editing||window.should_I_ignore_stuff_because_of_button_action){return }this.highlight()};A.onmouseout=function(){if(this.hideTimer){clearTimeout(this.hideTimer)}this.hideTimer=setTimeout('var el = document.getElementById("'+this.id+'"); if (el) el.unhighlight()',1000)};A.highlight=function(){if(this.hideTimer){clearTimeout(this.hideTimer)}A.style.backgroundColor="#ffffd3";if(this.emptyText&&(A.innerHTML=="&nbsp;"||A.innerHTML==" "||A.innerHTML.charCodeAt(0)==160)){A.style.color="#888";A.innerHTML=this.emptyText}};A.unhighlight=function(){if(this.hideTimer){clearTimeout(this.hideTimer)}if(typeof (this.check_changes)=="function"){A.style.backgroundColor="#efefef"}else{A.style.backgroundColor=""}if(this.emptyText&&A.innerHTML.toUpperCase()==this.emptyText.toUpperCase()){A.innerHTML="&nbsp;";A.style.color="#000"}};return A};F.slideshow=function(d,L,X){var V="swfdiv";var b=(d.set_id==undefined)?"":d.set_id;var P=(d.tags==undefined)?"":d.tags;var O=(d.text==undefined)?"":d.text;var C=(d.user_id==undefined)?"":d.user_id;var D=(d.favorites==undefined)?"":d.favorites;var K=(d.tag_mode==undefined)?"":d.tag_mode;var T=(d.group_id==undefined)?"":d.group_id;var G=(d.contacts==true)?"y":"";var Q=(d.frifam==true)?"y":"";var c=(d.single==true)?"y":"";var H=(d.start_id==undefined||d.start_id=="start_id")?"":d.start_id;var M=(d.start_index==undefined||d.start_index=="start_index")?"":d.start_index;var a=(d.look_for_start_id==undefined||d.look_for_start_id=="look_for_start_id")?"":d.look_for_start_id;var Z=(d.sort==undefined)?"":d.sort;var A=(d.api_method==undefined)?"":d.api_method;var I=(d.api_params_str==undefined)?"":d.api_params_str;var N=(d.method_params==undefined)?"":d.method_params;var R=(d.page_show_back_url==undefined)?"":d.page_show_back_url;var E=(d.page_show_url==undefined)?"":d.page_show_url;var J=document.getElementById(V);if(!J){return }var S="000000";var U="100%";if(L){U=L}var B="100%";if(_qs_args.noresize=="1"){B="300"}if(X){B=X}window.se_min_w=100;window.se_max_w=4000;window.se_min_h=100;var e="/apps/slideshow/show.swf.v"+global_slideShowVersionV3;var W=new SWFObject(e,"slideShowMovie",U,B,9,"#000000");W.addParam("allowFullScreen","true");W.addParam("allowScriptAccess","always");W.addParam("bgcolor","#000000");W.addVariable("lang",global_intl_lang);W.addVariable("flickr_notracking","true");W.addVariable("flickr_target","_self");W.addVariable("nsid",global_nsid);W.addVariable("textV",global_slideShowTextVersion);W.addVariable("lang",global_intl_lang);W.addVariable("ispro",global_ispro);W.addVariable("magisterLudi",global_magisterLudi);W.addVariable("auth_hash",global_auth_hash);if(b){W.addVariable("set_id",b)}if(O){W.addVariable("text",escape_utf8(O))}if(P){W.addVariable("tags",escape_utf8(P))}if(K){W.addVariable("tag_mode",escape(K))}if(C){W.addVariable("user_id",C)}if(D){W.addVariable("favorites",D)}if(T){W.addVariable("group_id",T)}if(G){W.addVariable("contacts",G)}if(Q){W.addVariable("frifam",Q)}if(c){W.addVariable("single",c)}if(H){W.addVariable("jump_to",H)}if(R){W.addVariable("page_show_back_url",R)}if(E){W.addVariable("page_show_url",E)}if(M){W.addVariable("start_index",M)}if(a){W.addVariable("look_for_start_id",a)}if(Z){W.addVariable("sort",Z)}if(se_min_h){W.addVariable("minH",se_min_h)}if(se_min_w){W.addVariable("minW",se_min_w)}if(A){W.addVariable("method",A)}if(I){W.addVariable("api_params_str","&"+I)}if(N){W.addVariable("method_params",N)}W.write(V);if(document.slideShowMovie&&typeof document.slideShowMovie.focus=="function"){document.slideShowMovie.focus()}};function calculateFlashHeight(){var A=_find_screen_height()-(Y.U.Dom.getY(_ge("swfdiv")));A=(A>se_min_h)?A:se_min_h;return A}function calculateFlashWidth(){var A=_find_screen_width();A=(A>se_min_w)?A:se_min_w;return A}function slide_makeItFit(){if(!_ge("swfdiv")){return }if(_qs_args.noresize!="1"){_ge("swfdiv").style.height=calculateFlashHeight()+"px"}_ge("swfdiv").style.width=calculateFlashWidth()+"px";var A=_find_screen_width();var B=_find_screen_height()}F.eb_add({window_onload_dom:function(){slide_makeItFit()}});F.eb_add({window_onresize:function(){slide_makeItFit()}});var JSON={copyright:"(c)2005 JSON.org",license:"http://www.crockford.com/JSON/license.html",stringify:function(i){var m=[];function O(a){m[m.length]=a;}function s(a){var e,C,J,r;switch(typeof a){case "object":if(a){if(a instanceof Array){O("[");J=m.length;for(C=0;C<a.length;C+=1){r=a[C];if(typeof r!="undefined"&&typeof r!="function"){if(J<m.length){O(",");}s(r);}}O("]");return ;}else{if(typeof a.toString!="undefined"){O("{");J=m.length;for(C in a){r=a[C];if(a.hasOwnProperty(C)&&typeof r!="undefined"&&typeof r!="function"){if(J<m.length){O(",");}s(C);O(":");s(r);}}return O("}");}}}O("null");return ;case "number":O(isFinite(a)?+a:"null");return ;case "string":J=a.length;O("\"");for(C=0;C<J;C+=1){e=a.charAt(C);if(e>=" "){if(e=="\\"||e=="\""){O("\\");}O(e);}else{switch(e){case "\b":O("\\b");break;case "\f":O("\\f");break;case "\n":O("\\n");break;case "\r":O("\\r");break;case "\t":O("\\t");break;default:e=e.charCodeAt();O("\\u00"+Math.floor(e/16).toString(16)+(e%16).toString(16));}}}O("\"");return ;case "boolean":O(String(a));return ;default:O("null");return ;}}s(i);return m.join("");},parse:function(text){var p=/^\s*(([,:{}\[\]])|"(\\.|[^\x00-\x1f"\\])*"|-?\d+(\.\d*)?([eE][+-]?\d+)?|true|false|null)\s*/,token,operator;function error(m,t){throw {name:"JSONError",message:m,text:t||operator||token};}function next(b){if(b&&b!=operator){error("Expected '"+b+"'");}if(text){var t=p.exec(text);if(t){if(t[2]){token=null;operator=t[2];}else{operator=null;try{token=eval(t[1]);}catch(e){error("Bad token",t[1]);}}text=text.substring(t[0].length);}else{error("Unrecognized token",text);}}else{token=operator=undefined;}}function val(){var k,o;switch(operator){case "{":next("{");o={};if(operator!="}"){for(;;){if(operator||typeof token!="string"){error("Missing key");}k=token;next();next(":");o[k]=val();if(operator!=","){break;}next(",");}}next("}");return o;case "[":next("[");o=[];if(operator!="]"){for(;;){o.push(val());if(operator!=","){break;}next(",");}}next("]");return o;default:if(operator!==null){error("Missing value");}k=token;next();return k;}}next();return val();}};anim_eqA=["easeInOutBounce","easeOutBounce","easeInBounce","easeInOutBack","easeOutBack","easeInBack","easeInOutElastic","easeOutElastic","easeInElastic","easeOutCirc","easeInOutCirc","easeInCirc","easeInOutExpo","easeOutExpo","easeInExpo","easeInOutSine","easeOutSine","easeInSine","easeInOutQuint","easeOutQuint","easeInQuint","easeInOutQuart","easeOutQuart","easeInQuart","easeOutCubic","easeInCubic","easeInOutQuad","easeOutQuad","easeInQuad","linearTween"];anim_count=0;anim_animate=function(A,C){var C=(C==undefined)?"anim_seq"+(anim_count++):C;var B=0;var D=C+"i";this[C]=function(){if(this[D]){clearTimeout(this[D])}if(B==A.length){this[C]=null;this[D]=null;if(!this.length){if(F.is_ie){this.removeAttribute(C);this.removeAttribute(D)}else{delete this[C];delete this[D]}}else{this[C]=null;this[D]=null}if(typeof list_properties=="function"){list_properties(this)}return }A[B].unshift(this[C]);this[D]=anim_step.apply(this,A[B]);B++;return this[D]};return this[C]()};anim_step=function(M,K,A,N,E,O){var C="anim_interv"+(anim_count++);var P=0;var K=K;var D=this;var O=O;var I=[];for(var H=6;H<arguments.length;H++){var B=arguments[H];if(D.length){var L=[];for(var G=0;G<B.e.length;G++){L.push(B.e[G]-B.b[G])}B.c=L}else{B.c=B.e-B.b}if(B.eq==""||!Math[B.eq]){B.eq="linearTween"}I.push(B)}if(I.length==0){return }var J=setInterval(function(){var V=(D.length==undefined)?[D]:D;if(P>K){return }for(var Q=0;Q<V.length;Q++){if(typeof O=="function"){var S=[];for(var R=0;R<I.length;R++){var T=I[R];if(D.length!=undefined){var U=_pi(Math[T.eq](P,T.b[Q],T.c[Q],K))}else{var U=_pi(Math[T.eq](P,T.b,T.c,K))}S.push(U)}O.apply(V[Q],S)}else{for(var R=0;R<I.length;R++){var T=I[R];if(D.length!=undefined){var U=_pi(Math[T.eq](P,T.b[Q],T.c[Q],K))}else{var U=_pi(Math[T.eq](P,T.b,T.c,K))}if(U){U+="px"}V[Q].style[T.p]=U}}}if(P==K){clearTimeout(J);M.call(D);if(typeof N=="function"){if(!E){E=[]}N.apply(D[Q],E)}}P++},A);return J};anim_do_height_to=function(B,I,A,H,K,J,C,G){if(B.length){var D=[];for(var E=0;E<B.length;E++){D.push((B[E].style.height)?_pi(B[E].style.height):B[E].offsetHeight)}if(B.length!=H.length){alert("wrong length h "+B.length+" "+H.length);return }}else{var D=(B.style.height)?_pi(B.style.height):B.offsetHeight}return anim_animate.call(B,[[I,A,J,C,G,{p:"height",b:D,e:H,eq:K}]],"anim_do_height_to")};anim_do_width_to=function(E,H,D,C,B,A,G){return anim_animate.call(E,[[H,D,A,G,null,{p:"width",b:E.offsetWidth,e:C,eq:B}]],"anim_do_width_to")};anim_do_size_to=function(E,H,C,D,B,A,G){return anim_animate.call(E,[[H,C,A,G,anim_handler_size_to,{p:"s",b:E.offsetWidth,e:D,eq:B}]],"anim_do_size_to")};anim_do_opacity_to=function(C,H,B,G,K,J,D){if(C.length){var I=[];for(var E=0;E<C.length;E++){var A=100;if(F.is_ie){if(C[E].style.filter.indexOf("alpha(opacity=")!=-1){A=C[E].style.filter.replace("alpha(opacity=","").replace(")","")}}else{if(C[E].style.opacity!=undefined&&C[E].style.opacity.length>0){A=C[E].style.opacity*100}}I.push(A)}if(C.length!=I.length){alert("wrong length of bop "+C.length+" "+I.length);return }if(C.length!=G.length){if(!G.length){opA=[];for(var E=0;E<C.length;E++){opA.push(G)}G=opA}else{alert("wrong length of op "+G);return }}}else{var I=100;if(F.is_ie){if(C.style.filter.indexOf("alpha(opacity=")!=-1){I=C.style.filter.replace("alpha(opacity=","").replace(")","")*1}}else{if(C.style.opacity!=undefined&&C.style.opacity.length>0){I=C.style.opacity*100}}}return anim_animate.call(C,[[H,B,J,D,anim_handler_opacity,{p:"val",b:I,e:G,eq:K}]],"anim_do_opacity_to")};anim_do_size_to_and_slide_to_on_center=function(B,D,A,J,G,E,I,H,C){return anim_animate.call(B,[[D,A,H,C,anim_handler_size_to_and_slide_to_on_center,{p:"s",b:B.offsetWidth,e:J,eq:I},{p:"x",b:Y.U.Dom.getX(B)+(B.offsetWidth/2),e:G,eq:I},{p:"y",b:Y.U.Dom.getY(B)+(B.offsetHeight/2),e:E,eq:I}]],"anim_do_size_to_and_slide_to_on_center")};anim_do_size_to_and_slide_to=function(B,D,A,J,G,E,I,H,C){return anim_animate.call(B,[[D,A,H,C,anim_handler_size_to_and_slide_to,{p:"s",b:B.offsetWidth,e:J,eq:I},{p:"x",b:F.get_local_X(B),e:G,eq:I},{p:"y",b:F.get_local_Y(B),e:E,eq:I}]],"anim_do_size_to_and_slide_to")};anim_do_slide_to_on_center=function(E,H,D,C,I,B,A,G){return anim_animate.call(E,[[H,D,A,G,anim_handler_center_on,{p:"x",b:Y.U.Dom.getX(E)+(E.offsetWidth/2),e:C,eq:B},{p:"y",b:Y.U.Dom.getY(E)+(E.offsetHeight/2),e:I,eq:B}]],"anim_do_slide_to_on_center")};anim_do_slide_to=function(B,E,A,J,H,L,K,C,I,G){if(B.length){if(I==undefined||I.length==undefined){var I=[];var G=[];for(var D=0;D<B.length;D++){if(B[D].style.left!=undefined){I.push(_pi(B[D].style.left))}else{I.push(Y.U.Dom.getX(B[D]))}if(B[D].style.top!=undefined){G.push(_pi(B[D].style.top))}else{G.push(Y.U.Dom.getY(B[D]))}}}if(B.length!=I.length||B.length!=G.length){alert("wrong length of sx or sy "+B.length+" "+I.length+" "+G.length);return }if(B.length!=J.length||B.length!=H.length){alert("wrong length of s or y");return }}else{I=(I!=undefined)?I:(B.style.left!=undefined)?_pi(B.style.left):Y.U.Dom.getX(B);G=(G!=undefined)?G:(B.style.top!=undefined)?_pi(B.style.top):Y.U.Dom.getY(B)}return anim_animate.call(B,[[E,A,K,C,null,{p:"left",b:I,e:J,eq:L},{p:"top",b:G,e:H,eq:L}]],"anim_do_slide_to")};anim_do_slide_relative_to=function(E,H,D,C,I,B,A,G){return anim_animate.call(E,[[H,D,A,G,null,{p:"left",b:_pi(E.style.left),e:C,eq:B},{p:"top",b:_pi(E.style.top),e:I,eq:B}]],"anim_do_slide_relative_to")};anim_do_slide_to_x=function(E,H,D,C,B,A,G){return anim_animate.call(E,[[H,D,A,G,null,{p:"left",b:F.get_local_X(E),e:C,eq:B}]],"anim_do_slide_to_x")};anim_do_scroll_to_scrollTop=function(D,H,C,G,B,A,E){return anim_animate.call(D,[[H,C,A,E,anim_handler_set_scrollTop,{p:"scrollTop",b:D.scrollTop,e:G,eq:B}]],"anim_do_scroll_to_scrollTop")};anim_do_marginTop_to=function(D,H,C,E,B,A,G){return anim_animate.call(D,[[H,C,A,G,null,{p:"marginTop",b:_pi(D.style.marginTop),e:E,eq:B}]],"anim_do_marginTop_to")};anim_do_marginLeft_to=function(D,H,C,E,B,A,G){return anim_animate.call(D,[[H,C,A,G,null,{p:"marginLeft",b:_pi(D.style.marginLeft),e:E,eq:B}]],"anim_do_marginLeft_to")};anim_do_blink_pink=function(B,A,C){return anim_animate.call(B,[[1,1,null,[],anim_handler_set_color_rgb,{p:"r",b:0,e:255,eq:"easeOutQuad"},{p:"g",b:0,e:0,eq:"easeOutQuad"},{p:"b",b:0,e:132,eq:"easeOutQuad"}],[4,50,null,[],anim_handler_set_color_rgb,{p:"r",b:255,e:0,eq:"easeOutQuad"},{p:"g",b:0,e:0,eq:"easeOutQuad"},{p:"b",b:132,e:0,eq:"easeOutQuad"}],[1,1,null,[],anim_handler_set_color_rgb,{p:"r",b:0,e:255,eq:"easeOutQuad"},{p:"g",b:0,e:0,eq:"easeOutQuad"},{p:"b",b:0,e:132,eq:"easeOutQuad"}],[4,50,A,C,anim_handler_set_color_rgb,{p:"r",b:255,e:0,eq:"easeOutQuad"},{p:"g",b:0,e:0,eq:"easeOutQuad"},{p:"b",b:132,e:0,eq:"easeOutQuad"}]],"anim_do_blink_pink")};anim_do_blink_yellow=function(B,A,C){return anim_animate.call(B,[[8,50,null,[],anim_handler_set_bgcolor_rgb,{p:"r",b:255,e:255,eq:"easeOutQuad"},{p:"g",b:226,e:255,eq:"easeOutQuad"},{p:"b",b:138,e:255,eq:"easeOutQuad"}],[8,50,null,[],anim_handler_set_bgcolor_rgb,{p:"r",b:255,e:255,eq:"easeOutQuad"},{p:"g",b:255,e:226,eq:"easeOutQuad"},{p:"b",b:255,e:138,eq:"easeOutQuad"}],],"anim_do_blink_yellow")};anim_do_color_to=function(C,I,B,A,G,J,L,E,H,M,K,D){return anim_animate.call(C,[[I,B,null,[],anim_handler_set_color_rgb,{p:"r",b:A,e:L,eq:M},{p:"g",b:G,e:E,eq:M},{p:"b",b:J,e:H,eq:M}]],"anim_do_color_to")};anim_do_bgcolor_to=function(C,I,B,A,G,J,L,E,H,M,K,D){return anim_animate.call(C,[[I,B,K,D,anim_handler_set_bgcolor_rgb,{p:"r",b:A,e:L,eq:M},{p:"g",b:G,e:E,eq:M},{p:"b",b:J,e:H,eq:M}]],"anim_do_bgcolor_to")};anim_do_pink_fade=function(B,A,C){return anim_animate.call(B,[[50,50,null,[],anim_handler_set_backgroundColor_rgb,{p:"r",b:255,e:239,eq:"easeOutQuad"},{p:"g",b:255,e:239,eq:"easeOutQuad"},{p:"b",b:255,e:239,eq:"easeOutQuad"}]],"anim_do_blink_pink")};anim_do_margin_dance_right=function(B,C,A){return anim_animate.call(B,[[C,A,null,[],null,{p:"marginRight",b:110,e:0,eq:"easeInOutQuad"},{p:"marginLeft",b:-110,e:0,eq:"easeInOutQuad"}]],"anim_do_margin_dance_right")};anim_do_margin_dance_left=function(B,C,A){return anim_animate.call(B,[[C,A,null,[],null,{p:"marginLeft",b:110,e:0,eq:"easeInOutQuad"}]],"anim_do_margin_dance_left")};anim_handler_set_color_rgb=function(C,B,A){anm_set_rgb.call(this,"color",C,B,A)};anim_handler_set_bgcolor_rgb=function(C,B,A){anm_set_rgb.call(this,"backgroundColor",C,B,A)};anim_handler_set_scrollTop=function(A){this.scrollTop=A};anim_handler_set_backgroundColor_rgb=function(C,B,A){anm_set_rgb.call(this,"backgroundColor",C,B,A)};anim_handler_center_on=function(A,B){this.style.left=_pi(A-(this.offsetWidth/2))+"px";this.style.top=_pi(B-(this.offsetHeight/2))+"px"};anim_handler_opacity=function(A){this.style.opacity=A/100;this.style.filter="alpha(opacity="+A+")"};anim_handler_size_to=function(A){this.style.width=A+"px";this.style.height=A+"px"};anim_handler_size_to_and_slide_to_on_center=function(B,A,C){this.style.left=_pi(A-(B/2))+"px";this.style.top=_pi(C-(B/2))+"px";this.style.width=B+"px";this.style.height=B+"px"};anim_handler_size_to_and_slide_to=function(B,A,C){this.style.left=_pi(A)+"px";this.style.top=_pi(C)+"px";this.style.width=B+"px";this.style.height=B+"px"};anm_set_rgb=function(D,C,B,A){this.style[D]="rgb("+C+", "+B+", "+A+")"};Math.linearTween=function(h,K,O,S){return O*h/S+K;};Math.easeInQuad=function(h,K,O,S){return O*(h/=S)*h+K;};Math.easeOutQuad=function(h,K,O,S){return -O*(h/=S)*(h-2)+K;};Math.easeInOutQuad=function(h,K,O,S){if((h/=S/2)<1){return O/2*h*h+K;}return -O/2*((--h)*(h-2)-1)+K;};Math.easeInCubic=function(h,K,O,S){return O*(h/=S)*h*h+K;};Math.easeOutCubic=function(h,K,O,S){return O*((h=h/S-1)*h*h+1)+K;};Math.easeInOutCubic=function(h,K,O,S){if((h/=S/2)<1){return O/2*h*h*h+K;}return O/2*((h-=2)*h*h+2)+K;};Math.easeInQuart=function(h,K,O,S){return O*(h/=S)*h*h*h+K;};Math.easeOutQuart=function(h,K,O,S){return -O*((h=h/S-1)*h*h*h-1)+K;};Math.easeInOutQuart=function(h,K,O,S){if((h/=S/2)<1){return O/2*h*h*h*h+K;}return -O/2*((h-=2)*h*h*h-2)+K;};Math.easeInQuint=function(h,K,O,S){return O*(h/=S)*h*h*h*h+K;};Math.easeOutQuint=function(h,K,O,S){return O*((h=h/S-1)*h*h*h*h+1)+K;};Math.easeInOutQuint=function(h,K,O,S){if((h/=S/2)<1){return O/2*h*h*h*h*h+K;}return O/2*((h-=2)*h*h*h*h+2)+K;};Math.easeInSine=function(h,K,O,S){return -O*Math.cos(h/S*(Math.PI/2))+O+K;};Math.easeOutSine=function(h,K,O,S){return O*Math.sin(h/S*(Math.PI/2))+K;};Math.easeInOutSine=function(h,K,O,S){return -O/2*(Math.cos(Math.PI*h/S)-1)+K;};Math.easeInExpo=function(h,K,O,S){return (h==0)?K:O*Math.pow(2,10*(h/S-1))+K;};Math.easeOutExpo=function(h,K,O,S){return (h==S)?K+O:O*(-Math.pow(2,-10*h/S)+1)+K;};Math.easeInOutExpo=function(h,K,O,S){if(h==0){return K;}if(h==S){return K+O;}if((h/=S/2)<1){return O/2*Math.pow(2,10*(h-1))+K;}return O/2*(-Math.pow(2,-10*--h)+2)+K;};Math.easeInCirc=function(h,K,O,S){return -O*(Math.sqrt(1-(h/=S)*h)-1)+K;};Math.easeOutCirc=function(h,K,O,S){return O*Math.sqrt(1-(h=h/S-1)*h)+K;};Math.easeInOutCirc=function(h,K,O,S){if((h/=S/2)<1){return -O/2*(Math.sqrt(1-h*h)-1)+K;}return O/2*(Math.sqrt(1-(h-=2)*h)+1)+K;};Math.easeInElastic=function(S,K,D,B,h,X){if(S==0){return K;}if((S/=B)==1){return K+D;}if(!X){X=B*0.3;}if(h<Math.abs(D)){h=D;var O=X/4;}else{var O=X/(2*Math.PI)*Math.asin(D/h);}return -(h*Math.pow(2,10*(S-=1))*Math.sin((S*B-O)*(2*Math.PI)/X))+K;};Math.easeOutElastic=function(S,K,D,B,h,X){if(S==0){return K;}if((S/=B)==1){return K+D;}if(!X){X=B*0.3;}if(h<Math.abs(D)){h=D;var O=X/4;}else{var O=X/(2*Math.PI)*Math.asin(D/h);}return h*Math.pow(2,-10*S)*Math.sin((S*B-O)*(2*Math.PI)/X)+D+K;};Math.easeInOutElastic=function(S,K,D,B,h,X){if(S==0){return K;}if((S/=B/2)==2){return K+D;}if(!X){X=B*(0.3*1.5);}if(h<Math.abs(D)){h=D;var O=X/4;}else{var O=X/(2*Math.PI)*Math.asin(D/h);}if(S<1){return -0.5*(h*Math.pow(2,10*(S-=1))*Math.sin((S*B-O)*(2*Math.PI)/X))+K;}return h*Math.pow(2,-10*(S-=1))*Math.sin((S*B-O)*(2*Math.PI)/X)*0.5+D+K;};Math.easeInBack=function(h,K,X,O,S){if(S==undefined){S=1.70158;}return X*(h/=O)*h*((S+1)*h-S)+K;};Math.easeOutBack=function(h,K,X,O,S){if(S==undefined){S=1.70158;}return X*((h=h/O-1)*h*((S+1)*h+S)+1)+K;};Math.easeInOutBack=function(h,K,X,O,S){if(S==undefined){S=1.70158;}if((h/=O/2)<1){return X/2*(h*h*(((S*=(1.525))+1)*h-S))+K;}return X/2*((h-=2)*h*(((S*=(1.525))+1)*h+S)+2)+K;};Math.easeInBounce=function(h,K,O,S){return O-Math.easeOutBounce(S-h,0,O,S)+K;};Math.easeOutBounce=function(h,K,O,S){if((h/=S)<(1/2.75)){return O*(7.5625*h*h)+K;}else{if(h<(2/2.75)){return O*(7.5625*(h-=(1.5/2.75))*h+0.75)+K;}else{if(h<(2.5/2.75)){return O*(7.5625*(h-=(2.25/2.75))*h+0.9375)+K;}else{return O*(7.5625*(h-=(2.625/2.75))*h+0.984375)+K;}}}};Math.easeInOutBounce=function(h,K,O,S){if(h<S/2){return Math.easeInBounce(h*2,0,O,S)*0.5+K;}return Math.easeOutBounce(h*2-S,0,O,S)*0.5+O*0.5+K;};F._one_photo_tab=new Object();F._one_photo_tab.tab_go_go_go=function(A){this.rsp_errs=[];if(A){this.style.cursor="default";_ge("one_photo_edit_pop").pop_activate_tab(this.id)}else{this.style.cursor=(F.is_ie)?"hand":"pointer"}};F._one_photo_tab.tab_activate=function(){this.className="one_photo_tab_active";this.style.cursor="default"};F._one_photo_tab.tab_deactivate=function(){this.className="one_photo_tab";this.style.cursor=(F.is_ie)?"hand":"pointer"};F._one_photo_tab.onclick=function(B){var A=_get_event_src(B);if(!B){B=window.event}if(A!=this){return }_ge("one_photo_edit_pop").pop_activate_tab(this.id)};F._one_photo_edit_pop=new Object();F._one_photo_edit_pop.pop_go_go_go=function(){F.decorate(this,F._eb).eb_go_go_go();this.style.position="absolute";this.style.zIndex="995";this.style.top="0";this.style.left="0";this.style.display="none";this.pop_shadow_id=F.make_shadow(this.id,994).id;this.pop_showing=0;this.pop_loading=1;this.pop_fragment_loaded=0;var A=document.createElement("DIV");A.id="one_photo_modal_blocker";A.style.position="absolute";A.style.zIndex="993";A.style.top=0;A.style.backgroundColor="#999";A.style.opacity=".5";A.style.filter="alpha(opacity=50)";A.style.display="none";document.body.appendChild(A);F.eb_add(this);return this};F._one_photo_edit_pop.pop_get_mb=function(){return _ge("one_photo_modal_blocker")};F._one_photo_edit_pop.pop_get_active_tab_id=function(){return this.pop_active_tab_id};F._one_photo_edit_pop.pop_get_mat_id_from_tab_id=function(A){return A.replace("_tab_","_mat_")};F._one_photo_edit_pop.pop_activate_tab=function(A){if(this.pop_get_active_tab_id()!=A){if(this.pop_get_active_tab_id()){this.pop_deactivate_tab(this.pop_get_active_tab_id())}_ge(A).tab_activate();var B=this.pop_get_mat_id_from_tab_id(A);_ge(B).style.display="block";this.pop_active_tab_id=A;this.pop_place();this.pop_do_focus()}};F._one_photo_edit_pop.pop_close_license_pop=function(){l_pop=_ge("one_photo_license_pop");l_pop.style.display="none";if(this.pop_license_pop_shadow_id){_ge(this.pop_license_pop_shadow_id).shadow_hide()}};F._one_photo_edit_pop.pop_license_was_switched=function(){this.pop_close_license_pop();this.pop_change_license_name()};F._one_photo_edit_pop.pop_open_license_pop=function(){l_pop=_ge("one_photo_license_pop");if(!this.pop_license_pop_shadow_id){this.pop_license_pop_shadow_id=F.make_shadow("one_photo_license_pop",2,this,l_pop).id}l_pop.style.display="block";l_pop.style.visibility="hidden";var A=_pi((this.offsetWidth-l_pop.offsetWidth)/2);var B=_pi((this.offsetHeight-l_pop.offsetHeight)/2);l_pop.style.left=A+"px";l_pop.style.top=B+"px";l_pop.style.visibility="visible";_ge(this.pop_license_pop_shadow_id).shadow_size_and_place();if(!F.is_ie){_ge(this.pop_license_pop_shadow_id).shadow_show()}};F._one_photo_edit_pop.pop_toggle_more_perms_table=function(){var B=_ge("one_photo_more_perms_table");var A=_ge("one_photo_more_perm_carrot_div");if(B.style.display!="none"){B.style.display="none";A.style.display="block"}else{B.style.display="block";A.style.display="none"}this.pop_place()};F._one_photo_edit_pop.pop_deactivate_tab=function(A){if(!_ge(A)){return }_ge(A).tab_deactivate();var B=this.pop_get_mat_id_from_tab_id(A);_ge(B).style.display="none"};F._one_photo_edit_pop.fragment_onLoad=function(E,C,D){this.innerHTML=C;this.pop_fragment_loaded=1;var B=Y.U.Dom.getElementsByClassName("one_photo_tab","div",_ge("one_photo_inner_border_div"));for(var A=0;A<B.length;A++){F.decorate(B[A],F._one_photo_tab).tab_go_go_go()}var B=Y.U.Dom.getElementsByClassName("one_photo_tab_active","div",_ge("one_photo_inner_border_div"));for(var A=0;A<B.length;A++){this.pop_active_tab_id=B[A].id;F.decorate(B[A],F._one_photo_tab).tab_go_go_go(1)}F.decorate(_ge("one_photo_more_perm_carrot_div"),F._carrot).carrot_go_go_go("down",0);F.decorate(_ge("one_photo_close_img"),F._simple_button).button_go_go_go();this.pop_stop_comming();if(this.pop_photo){this.pop_show(this.pop_photo.id,this.pop_A,this.pop_photo_slot,this.pop_what)}};F._one_photo_edit_pop.pop_done_hiding=function(){this.style.display="none";_ge(this.pop_shadow_id).shadow_hide();this.pop_photo=null;this.pop_A=null;this.pop_photo_slot=null;this.pop_what=null;this.pop_get_mb().style.display="none";this.pop_change_next_prev_text();this.pop_activate_tab("one_photo_tab_title");this.eb_broadcast("one_photo_onhide");_ge("one_photo_prev_link").style.visibility="hidden";_ge("one_photo_next_link").style.visibility="hidden";_ge("one_photo_goto_next").style.visibility=_ge("one_photo_goto_next_label").style.visibility="hidden";this.pop_clear_form();if(window.ymap){ymap._disableKeys=false}F.eb_broadcast("stewart_play_if_was_playing")};F._one_photo_edit_pop.pop_hide=function(){_ge(this.pop_shadow_id).shadow_hide();this.pop_close_license_pop();var B=this;var A=function(){B.pop_done_hiding()};anim_do_opacity_to(B,5,35,0,"easeInQuad",A);this.pop_showing=0};F._one_photo_edit_pop.pop_show_start=function(G,B,C,E,D){this.pop_were_changes_when_opened=F.changes_count;this.eb_broadcast("one_photo_onshow");this.pop_show(G,B,C,E,D)};F._one_photo_edit_pop.pop_show=function(G,B,C,E,D){F.eb_broadcast("stewart_pause");if(window.ymap){ymap._disableKeys=true}this.pop_photo=global_photos[G];this.pop_A=B;this.pop_photo_slot=C;this.pop_what=E;this.pop_place();if(!this.pop_fragment_loaded){this.pop_loading=1;this.pop_start_comming(F.output.get("loading_interface"));F.fragment_getter.get("/photo_edit_fragment.gne",{one_photo_show_belongs:one_photo_show_belongs},this,"fragment_onLoad");return }this.style.opacity="1";this.style.filter="alpha(opacity=100)";this.style.display="block";this.pop_get_mb().style.display="block";this.pop_place();_ge(this.pop_shadow_id).shadow_show();if(!D||(!this.pop_photo||this.pop_photo.description==undefined)){this.pop_loading=1;this.pop_clear_form();this.pop_start_comming(F.output.get("one_photo_edit_loading_info"));F.API.callMethod("flickr.photos.getInfo",{photo_id:G,get_contexts:one_photo_show_belongs},this);return }this.pop_loading=0;this.pop_fill_form();this.pop_change_next_prev_text();this.pop_place();_ge(this.pop_shadow_id).shadow_show();this.pop_showing=1;this.pop_do_focus()};F._one_photo_edit_pop.flickr_photos_getInfo_onLoad=function(E,D,B){if(E&&D){var A=D.documentElement.getElementsByTagName("photo")[0];var C=_upsert_photo(A);writeAPIDebug(this.pop_photo.toString());this.pop_stop_comming();this.pop_show(C.id,this.pop_A,this.pop_photo_slot,this.pop_what,1)}else{this.pop_start_comming(F.output.get("one_photo_edit_problem_loading",B.escape_for_display()),1,1);this.pop_hide()}};F._one_photo_edit_pop.pop_change_next_prev_text=function(A){var B=(this.pop_what)?"&nbsp;in "+this.pop_what:"";B="";_ge("one_photo_next_link_what").innerHTML=B;_ge("one_photo_prev_link_what").innerHTML=B;_ge("one_photo_goto_what").innerHTML=B};F._one_photo_edit_pop.window_onresize=function(){this.pop_place()};F._one_photo_edit_pop.pop_place=function(A,D){if(window.innerWidth){var E=window.innerWidth;var B=window.innerHeight;var I=window.pageXOffset;var H=window.pageYOffset}else{var E=document.body.clientWidth;var B=document.body.clientHeight;var I=document.body.scrollLeft;var H=document.body.scrollTop}var M=this;var C=function(){var O=M.offsetWidth;var N=I+_pi((E-O)/2);N=Math.max(N,1);return N};var G=function(){var N=M.offsetHeight;var O=H+_pi((B-N)/2);O=Math.min(O,90);O=Math.max(O,1);return O};var K=(typeof A=="function")?A():(typeof A=="number")?A:C();var J=(typeof D=="function")?D():(typeof D=="number")?D:G();K=Math.max(K,10);J=Math.max(J,10);this.style.left=K+"px";this.style.top=J+"px";if(0&&this.pop_fragment_loaded){this.style.width=this.offsetWidth+"px";this.style.height=this.offsetHeight+"px"}_ge(this.pop_shadow_id).shadow_size_and_place();var L=M.pop_get_mb();L.style.left=I+"px";L.style.top=H+"px";L.style.width=E+"px";L.style.height=B+"px"};F._one_photo_edit_pop.pop_start_comming=function(B,D,L,C,A,K,E,G,H,M){if(!global_comm_div){_make_comm_div("1002")}x_func=null;var J=this;y_func=function(){J.pop_place();return _pi(J.style.top)+100};var I=1;if(this.pop_fragment_loaded){this.pop_place();I={opacity:"0",filter:"alpha(opacity=0)"}}global_comm_div.start_comming(B,x_func,y_func,D,L,C,A,K,E,G,H,I,M)};F._one_photo_edit_pop.pop_stop_comming=function(){global_comm_div.stop_comming()};F._one_photo_edit_pop.pop_go_to_next=function(A){this.pop_go_to_either(1,0,A)};F._one_photo_edit_pop.pop_go_to_previous=function(A){this.pop_go_to_either(-1,0,A)};F._one_photo_edit_pop.pop_get_next_id=function(){return this.pop_go_to_either(1,1)};F._one_photo_edit_pop.pop_get_previous_id=function(){return this.pop_go_to_either(-1,1)};F._one_photo_edit_pop.pop_go_to_either=function(G,E,D){if(!E&&D){if(this.pop_has_changes()){var B=function(){_ge("one_photo_edit_pop").pop_go_to_either(G,E)};_ge("tabl").tabl_start_comming(F.output.get("unsaved_msg"),1,1,F.output.get("ok"),B,1,F.output.get("cancel"));return }}var A=null;var H=0;var C=_ge("findr");if(this.pop_A){curr_index=F.array_index_of(this.pop_A,this.pop_photo.id);H=this.pop_A[curr_index+G]}else{if(this.pop_photo_slot!=undefined&&C){A=this.pop_photo_slot+G;H=C.findr_get_photo_for_slot(A).id}else{writeDebug("unknown context")}}if(E){return H}if(!H){return }if(this.pop_loading){return }this.pop_show(H,this.pop_A,A,this.pop_what)};F._one_photo_edit_pop.pop_clear_form=function(){_ge("one_photo_title").value="";_ge("addtagbox").value="";_ge("one_photo_description").value="";_ge("one_photo_img_div").style.visibility="hidden";_ge("one_photo_date_taken_exact").value="";_ge("one_photo_time_taken_exact").value="";_ge("one_photo_date_posted_exact").value="";_ge("one_photo_time_posted_exact").value="";_ge("one_photo_geo_data_lon").value="";_ge("one_photo_geo_data_lat").value="";_ge("div_load_photo_on_map").style.display="none";_ge("one_photo_mat_belongs_list_div").innerHTML=""};F._one_photo_edit_pop.pop_fill_form=function(){if(!disable_geo){if(prefs_isset_viewgeo&&_qs_args.show_geo_pref!="true"){_ge("one_photo_tab_loc").style.display="inline"}else{_ge("one_photo_tab_loc").style.display="none"}}var l=this.pop_photo;var L=(l.media=="video")?"one_photo_v_text":"one_photo_p_text";var N=(l.media=="video")?"one_photo_p_text":"one_photo_v_text";var v=Y.U.Dom.getElementsByClassName(N);for(var s=0;s<v.length;s++){v[s].style.display="none"}var a=Y.U.Dom.getElementsByClassName(L);for(var s=0;s<a.length;s++){a[s].style.display="inline"}var V=this.pop_get_previous_id();var n=this.pop_get_next_id();_ge("one_photo_prev_link").style.visibility=(V)?"visible":"hidden";_ge("one_photo_next_link").style.visibility=(n)?"visible":"hidden";_ge("one_photo_goto_next").style.visibility=_ge("one_photo_goto_next_label").style.visibility=(n)?"visible":"hidden";this.pop_is_there_a_next=n;_ge("one_photo_title").value=l.title;var o=[];for(var s=0;s<l.tags_rawA.length;s++){var m=l.tags_rawA[s];if(m.indexOf(" ")!=-1){m='"'+m+'"'}o.push(m)}var X=o.join(" ");_ge("addtagbox").value=X;_ge("one_photo_description").value=l.description;var J='<img src="'+_get_photo_src(l,"m")+'" style=""';var e,t;if(l.media=="video"&&l.video_ready){e=l.video_width*1;t=l.video_height*1}else{if(l.o_h&&l.o_w){}}var R=240;if(e>R||t>R){var d=R/e;var S=R/t;var D=Math.min(S,d);e=e*D;t=t*D}if(e&&t){J+=' height="'+t+'" width="'+e+'"'}J+=">";if(l.media=="video"&&l.video_ready){J='<span class="photo_container pc_m" id="stewart_swf_'+l.id+'one_photo_div" >'+J+'<a href="/photos/eric/430026997/" class="pc_link" id="stewart_swf_'+l.id+'one_photo_trigger_a"><img src="/images/video_play_icon_medium.png" alt="Play Video"></a></span>'}_ge("one_photo_img_div").innerHTML=J;_ge("one_photo_img_div").style.visibility="visible";if(l.media=="video"&&l.video_ready){F.decorate(_ge("stewart_swf_"+l.id+"one_photo_div"),F._stewart_swf_div).stewart_go_go_go(e,t,{flickr_forceControlSize:"medium",onsite:"true",photo_secret:l.secret,photo_id:l.id},1)}_ge("one_photo_link").href=photos_url+l.id;var M=l.date_taken.split(" ")[0].split("-");var Z=(M[1]*1).addZeros(2);var f=(M[2]*1).addZeros(2);var u=M[0]*1;var I=Z+"/"+f+"/"+u;var b=l.date_taken.split(" ")[1];_ge("one_photo_date_taken_exact").value=I;_ge("one_photo_time_taken_exact").value=b;var k=_ge("one_photo_date_taken_approx_month");if(l.date_taken_granularity==6){k.options[0].selected=1}else{if(l.date_taken_granularity==8){k.options[1].selected=1}else{for(var s=k.options.length-1;s>-1;s--){var c=k.options[s];if(c.value*1==Z){c.selected=1;break}}}}var K=_ge("one_photo_date_taken_approx_year");for(var s=K.options.length-1;s>-1;s--){var c=K.options[s];if(c.value*1==u){c.selected=1;break}}if(l.date_taken_granularity==0){_ge("one_photo_date_taken_exact_div").style.display="block";_ge("one_photo_date_taken_approx_div").style.display="none";_ge("one_photo_date_taken_exact_switcher").style.display="none";_ge("one_photo_date_taken_approx_switcher").style.display="inline"}else{_ge("one_photo_date_taken_exact_div").style.display="none";_ge("one_photo_date_taken_approx_div").style.display="block";_ge("one_photo_date_taken_exact_switcher").style.display="inline";_ge("one_photo_date_taken_approx_switcher").style.display="none"}var q=F.convert_unix_time_stamp(l.date_upload);var O=(q.getMonth()+1).addZeros(2);var B=q.getDate().addZeros(2);var A=q.getFullYear();var P=O+"/"+B+"/"+A;var C=q.getHours().addZeros(2)+":"+q.getMinutes().addZeros(2)+":"+q.getSeconds().addZeros(2);_ge("one_photo_date_posted_exact").value=P;_ge("one_photo_time_posted_exact").value=C;var W=(_pf(l.longitude)&&_pf(l.latitude))?l.latitude:"";var E=(_pf(l.longitude)&&_pf(l.latitude))?l.longitude:"";_ge("one_photo_geo_data_lat").value=W;_ge("one_photo_geo_data_lon").value=E;if(W.length>0&&E.length>0&&_ge("tabl")&&_ge("tabl").tabl_get_active_tab_id()=="tabl_tab_map"){_ge("map_controller")._photo_to_open=_pi(l.id);_ge("div_load_photo_on_map").style.display="block"}else{_ge("div_load_photo_on_map").style.display="none"}if(_pi(l.accuracy)!=0){if(l.geo_is_family=="1"&&l.geo_is_friend=="1"){_ge("one_photo_perm_viewgeo_2").checked=1}else{if(l.geo_is_family=="1"){_ge("one_photo_perm_viewgeo_4").checked=1}else{if(l.geo_is_friend=="1"){_ge("one_photo_perm_viewgeo_3").checked=1}else{if(l.geo_is_contact=="1"){_ge("one_photo_perm_viewgeo_1").checked=1}else{if(l.geo_is_public=="1"){_ge("one_photo_perm_viewgeo_0").checked=1}else{_ge("one_photo_perm_viewgeo_5").checked=1}}}}}}else{_ge("one_photo_perm_viewgeo_"+user_default_geo).checked=1}if(global_eighteen){_ge("one_photo_safety_level_"+l.safety_level).checked=1;_ge("one_photo_content_type_"+l.content_type).checked=1;if(l.moderation_mode=="0"||l.moderation_mode=="3"){for(var s=0;s<3;s++){_ge("one_photo_safety_level_"+s).disabled=0;_ge("one_photo_content_type_"+s).disabled=0;Y.D.removeClass("one_photo_safety_level_"+s+"_label","findr_input_disabled");Y.D.removeClass("one_photo_content_type_"+s+"_label","findr_input_disabled")}_ge("one_photo_mat_filters_moderated_div").style.display="none"}else{for(var s=0;s<3;s++){_ge("one_photo_safety_level_"+s).disabled=1;_ge("one_photo_content_type_"+s).disabled=1;Y.D.addClass("one_photo_safety_level_"+s+"_label","findr_input_disabled");Y.D.addClass("one_photo_content_type_"+s+"_label","findr_input_disabled")}_ge("one_photo_mat_filters_moderated_div").style.display="block";_ge("one_photo_mat_filters_moderated_a").href="/help/contact/?cat_shortcut=review_photo&photo_id="+l.id}}var j=_ge("one_photo_license_form").one_photo_license;for(var s=0;s<j.length;s++){var g=j[s];if(g.value==l.license_id){g.checked=1;break}}this.pop_change_license_name();if(window.user_license_restricted){var G=_ge("one_photo_change_license_link_span");if(G){G.style.display="none"}}_ge("one_photo_is_public").checked=1;_ge("one_photo_is_family").checked=1;_ge("one_photo_is_friend").checked=1;if(l.is_public=="0"){_ge("one_photo_is_private").checked=1;if(l.is_friend!="1"){_ge("one_photo_is_friend").checked=0}if(l.is_family!="1"){_ge("one_photo_is_family").checked=0}}var U={"0":"4","1":"3","2":"2","3":"1"};if(!U[l.perm_comment]){l.perm_comment=3}if(!U[l.perm_addmeta]){l.perm_addmeta=3}_ge("one_photo_perm_comment_"+U[l.perm_comment]).checked=1;_ge("one_photo_perm_addmeta_"+U[l.perm_addmeta]).checked=1;_privacy_specific_change("one_photo_",1);var H=[];H.push(F.output.get("one_photo_edit_sets_title"));if(l.sets){for(var s=0;s<l.sets.length;s++){var T=global_sets[l.sets[s]];if(!T){continue}H.push(this.pop_generate_set_HTML(T))}}else{H.push(F.output.get("one_photo_edit_none"))}H.push(F.output.get("one_photo_edit_groups_title"));if(l.pools){for(var s=0;s<l.pools.length;s++){var Q=global_groups[l.pools[s]];if(!Q){continue}H.push(this.pop_generate_group_HTML(Q))}}else{H.push(F.output.get("one_photo_edit_none"))}_ge("one_photo_mat_belongs_list_div").innerHTML=H.join("");this.pop_add_form_handlers();this.pop_form_data_saved=this.pop_get_data_from_form();this.pop_disable_save_and_revert_buttons();if(this.pop_slot&&_ge("findr")){_ge("findr").findr_place_slot_in_mid(this.pop_slot)}};F._one_photo_edit_pop.pop_generate_set_HTML=function(C){var A=global_photos[C.primary_photo_id];var B='<table class="existing_set_table" cellpadding="0" cellspacing="0" border="0"><tr><td><img src="'+_get_photo_src(A)+'" width="25" height="25" alt="" title=""></td><td>'+C.title.truncate_with_ellipses(40).escape_for_display()+" (<b>"+C.count.pretty_num()+"</b>)</td></tr></table>";return B};F._one_photo_edit_pop.pop_generate_group_HTML=function(C){if(C.count!=undefined){var A=(C.count!=1)?F.output.get("one_photo_edit_plural_photos",C.count.pretty_num()):F.output.get("one_photo_edit_single_photo");if(_get_group_throttle_txt(C)){A+=' <span class="group_pipe"> | </span> '+F.output.get("one_photo_edit_limit")+" "+_get_group_throttle_txt(C)}}else{var A=F.output.get("one_photo_edit_no_longer_member")}var B='<table class="existing_group_table" cellpadding="0" cellspacing="0" border="0"><tr><td valign="top"><img src="'+C.icon_url+'" width="24" height="24" alt="" title=""></td><td><b>'+C.name.truncate_with_ellipses(40).escape_for_display()+"</b><br>"+A+"</td></tr></table>";return B};F._one_photo_edit_pop.pop_change_license_name=function(){var A="";var D=_ge("one_photo_license_form").one_photo_license;for(var B=0;B<D.length;B++){var C=D[B];if(C.checked){A=_ge("one_photo_license_label"+C.value).innerHTML;break}}_ge("one_photo_current_license_name").innerHTML=A};F._one_photo_edit_pop.pop_do_focus=function(){if(!this.pop_showing){return }if(this.pop_get_active_tab_id()=="one_photo_tab_title"){_ge("one_photo_title").focus();_ge("one_photo_title").select()}};F._one_photo_edit_pop.pop_get_data_from_form=function(){var A={};A.title=_ge("one_photo_title").value;A.description=_ge("one_photo_description").value;A.tags=_ge("addtagbox").value;A.dates=F.get_dates_from_form("one_photo_",0);A.lat=_ge("one_photo_geo_data_lat").value;A.lon=_ge("one_photo_geo_data_lon").value;var E="0";var D=_ge("one_photo_license_form").one_photo_license;for(var B=0;B<D.length;B++){if(D[B].checked){E=D[B].value;break}}A.license_id=E;A.is_private=(_ge("one_photo_is_private").checked)?1:0;A.is_public=(A.is_private)?0:1;A.is_friend=(A.is_public||_ge("one_photo_is_friend").checked)?1:0;A.is_family=(A.is_public||_ge("one_photo_is_family").checked)?1:0;A.safety_level=(_ge("one_photo_safety_level_1").checked)?1:0;A.safety_level=(_ge("one_photo_safety_level_2").checked)?2:A.safety_level;if(global_eighteen){A.content_type=(_ge("one_photo_content_type_1").checked)?1:0;A.content_type=(_ge("one_photo_content_type_2").checked)?2:A.content_type}A.geo_is_public=(_ge("one_photo_perm_viewgeo_0").checked)?1:0;A.geo_is_family=(_ge("one_photo_perm_viewgeo_2").checked||_ge("one_photo_perm_viewgeo_4").checked)?1:0;A.geo_is_friend=(_ge("one_photo_perm_viewgeo_2").checked||_ge("one_photo_perm_viewgeo_3").checked)?1:0;A.geo_is_contact=(_ge("one_photo_perm_viewgeo_1").checked)?1:0;A.perm_comment="0";if((_ge("one_photo_perm_comment_3").checked)){A.perm_comment="1"}if((_ge("one_photo_perm_comment_2").checked)){A.perm_comment="2"}if((_ge("one_photo_perm_comment_1").checked)){A.perm_comment="3"}A.perm_addmeta="0";if((_ge("one_photo_perm_addmeta_3").checked)){A.perm_addmeta="1"}if((_ge("one_photo_perm_addmeta_2").checked)){A.perm_addmeta="2"}if((_ge("one_photo_perm_addmeta_1").checked)){A.perm_addmeta="3"}var C="pop_get_data_from_form";for(B in A){C+="<br>"+B+":"+A[B]}return A};F._one_photo_edit_pop.pop_on_form_activity=function(){if(this.pop_has_changes()){F.changes_were_made(F.output.get("one_photo_edit_photo_changed"));this.pop_enable_save_and_revert_buttons()}else{if(!this.pop_were_changes_when_opened){F.changes_were_saved()}this.pop_disable_save_and_revert_buttons()}};F._one_photo_edit_pop.pop_add_form_handlers=function(){var E=function(H){_ge("one_photo_edit_pop").pop_on_form_activity()};var D=function(H){setTimeout("_ge('one_photo_edit_pop').pop_on_form_activity();",100)};_ge("one_photo_date_taken_exact_switcher").onclick=_ge("one_photo_date_taken_approx_switcher").onclick=function(H){_ge("one_photo_edit_pop").pop_toggle_date_taken();E();return false};var B=function(H){_privacy_specific_change("one_photo_");E()};var A=function(H){_ge("one_photo_edit_pop").pop_license_was_switched();E()};yui.Event.addListener(_ge("one_photo_title"),"change",E);yui.Event.addListener(_ge("one_photo_title"),"keyup",E);yui.Event.addListener(_ge("one_photo_title"),"keydown",D);yui.Event.addListener(_ge("addtagbox"),"change",E);yui.Event.addListener(_ge("addtagbox"),"keyup",E);yui.Event.addListener(_ge("addtagbox"),"keydown",D);yui.Event.addListener(_ge("one_photo_description"),"change",E);yui.Event.addListener(_ge("one_photo_description"),"keyup",E);yui.Event.addListener(_ge("one_photo_description"),"keydown",D);yui.Event.addListener(_ge("one_photo_date_taken_exact"),"change",E);yui.Event.addListener(_ge("one_photo_date_taken_exact"),"keyup",E);yui.Event.addListener(_ge("one_photo_date_taken_exact"),"keydown",D);yui.Event.addListener(_ge("one_photo_date_taken_exact"),"focus",E);yui.Event.addListener(_ge("one_photo_time_taken_exact"),"change",E);yui.Event.addListener(_ge("one_photo_time_taken_exact"),"keyup",E);yui.Event.addListener(_ge("one_photo_time_taken_exact"),"keydown",D);yui.Event.addListener(_ge("one_photo_date_taken_approx_month"),"change",E);yui.Event.addListener(_ge("one_photo_date_taken_approx_year"),"change",E);yui.Event.addListener(_ge("one_photo_date_posted_exact"),"change",E);yui.Event.addListener(_ge("one_photo_date_posted_exact"),"keyup",E);yui.Event.addListener(_ge("one_photo_date_posted_exact"),"keydown",D);yui.Event.addListener(_ge("one_photo_date_posted_exact"),"focus",E);yui.Event.addListener(_ge("one_photo_time_posted_exact"),"change",E);yui.Event.addListener(_ge("one_photo_time_posted_exact"),"keyup",E);yui.Event.addListener(_ge("one_photo_time_posted_exact"),"keydown",D);if(!disable_geo){yui.Event.addListener(_ge("one_photo_geo_data_lon"),"change",E);yui.Event.addListener(_ge("one_photo_geo_data_lon"),"keyup",E);yui.Event.addListener(_ge("one_photo_geo_data_lon"),"keydown",D);yui.Event.addListener(_ge("one_photo_geo_data_lat"),"change",E);yui.Event.addListener(_ge("one_photo_geo_data_lat"),"keyup",E);yui.Event.addListener(_ge("one_photo_geo_data_lat"),"keydown",D)}var G=_ge("one_photo_license_form").one_photo_license;for(var C=0;C<G.length;C++){yui.Event.addListener(G[C],"click",A)}if(!disable_geo){for(var C=0;C<7;C++){yui.Event.addListener(_ge("one_photo_perm_viewgeo_"+C),"click",E)}}yui.Event.addListener(_ge("one_photo_is_private"),"click",B);yui.Event.addListener(_ge("one_photo_is_public"),"click",B);yui.Event.addListener(_ge("one_photo_is_family"),"click",B);yui.Event.addListener(_ge("one_photo_is_friend"),"click",B);for(var C=1;C<5;C++){yui.Event.addListener(_ge("one_photo_perm_comment_"+C),"click",E);yui.Event.addListener(_ge("one_photo_perm_addmeta_"+C),"click",E)}if(!disable_geo){for(var C=0;C<7;C++){yui.Event.addListener(_ge("one_photo_perm_viewgeo_"+C),"change",E)}}yui.Event.addListener(_ge("one_photo_is_private"),"change",B);yui.Event.addListener(_ge("one_photo_is_public"),"change",B);yui.Event.addListener(_ge("one_photo_is_family"),"change",B);yui.Event.addListener(_ge("one_photo_is_friend"),"change",B);for(var C=1;C<5;C++){yui.Event.addListener(_ge("one_photo_perm_comment_"+C),"change",E);yui.Event.addListener(_ge("one_photo_perm_addmeta_"+C),"change",E)}if(global_eighteen){for(var C=0;C<3;C++){yui.Event.addListener(_ge("one_photo_safety_level_"+C),"change",E);yui.Event.addListener(_ge("one_photo_content_type_"+C),"change",E);yui.Event.addListener(_ge("one_photo_safety_level_"+C),"click",E);yui.Event.addListener(_ge("one_photo_content_type_"+C),"click",E)}}this.pop_add_form_handlers=function(){}};F._one_photo_edit_pop.pop_toggle_date_taken=function(){if(_ge("one_photo_date_taken_exact_div").style.display=="none"){_ge("one_photo_date_taken_exact_div").style.display="block";_ge("one_photo_date_taken_approx_div").style.display="none";_ge("one_photo_date_taken_exact_switcher").style.display="none";_ge("one_photo_date_taken_approx_switcher").style.display="inline"}else{_ge("one_photo_date_taken_exact_div").style.display="none";_ge("one_photo_date_taken_approx_div").style.display="block";_ge("one_photo_date_taken_exact_switcher").style.display="inline";_ge("one_photo_date_taken_approx_switcher").style.display="none"}};F._one_photo_edit_pop.pop_disable_save_and_revert_buttons=function(){this.pop_disable_save_button();this.pop_disable_revert_button()};F._one_photo_edit_pop.pop_enable_save_and_revert_buttons=function(){this.pop_enable_save_button();this.pop_enable_revert_button()};F._one_photo_edit_pop.pop_disable_save_button=function(){_ge("one_photo_save").disabled=true;_ge("one_photo_save").className="DisabledButt"};F._one_photo_edit_pop.pop_enable_save_button=function(){_ge("one_photo_save").disabled=false;_ge("one_photo_save").className="Butt"};F._one_photo_edit_pop.pop_disable_revert_button=function(){_ge("one_photo_revert_link").style.visibility="hidden";_ge("one_photo_revert_link").onclick=function(){this.blur();return false}};F._one_photo_edit_pop.pop_enable_revert_button=function(){_ge("one_photo_revert_link").style.visibility="visible";_ge("one_photo_revert_link").onclick=function(){this.blur();_ge("one_photo_edit_pop").pop_revert();return false}};F._one_photo_edit_pop.pop_delete_photo=function(B){if(!B){var D=F.output.get("one_photo_edit_really_delete");var A=this;var C=function(){A.pop_delete_photo(1)};this.pop_start_comming(D,1,1,F.output.get("yes_delete"),C,1,F.output.get("one_photo_edit_no"));return }this.pop_start_comming(F.output.get("one_photo_edit_deleting"));F.API.callMethod("flickr.photos.delete",{photo_id:this.pop_photo.id},this)};F._one_photo_edit_pop.flickr_photos_delete_onLoad=function(C,B,A){if(C){this.pop_done_deleting()}else{this.pop_start_comming(F.output.get("api_err_generic")+" "+A.escape_for_display(),1,1)}};F._one_photo_edit_pop.pop_done_deleting=function(){if(!this.pop_were_changes_when_opened){F.changes_were_saved()}this.pop_stop_comming();this.eb_broadcast("one_photo_on_save",this.pop_photo.id,0,1);this.pop_hide();var A=global_photos[this.pop_photo.id];global_photos[this.pop_photo.id]=null;delete global_photos[this.pop_photo.id]};F._one_photo_edit_pop.pop_save=function(){exp_rsps=0;var E=this.pop_what_changed();var B=E.now;var G="";if(E.tags){var A=F.get_tags_from_input_str(B.tags);if(A.length>global_tag_limit){G=F.output.get("too_many_tags",global_tag_limit)}}if(G!=""){G="<b>"+F.output.get("cant_save")+"</b> "+G;this.pop_start_comming(G,1,1);return }this.rsp_errs=[];this.pop_changed_dates=E.dates;if(E.dates){exp_rsps++}if(E.meta){exp_rsps++}if(E.tags){exp_rsps++}if(E.perms){exp_rsps++}if(E.geo){exp_rsps++}if(E.geoperms){exp_rsps++}if(E.license){exp_rsps++}if(E.content_type){exp_rsps++}if(E.safety_level){exp_rsps++}if(!exp_rsps){writeDebug(F.output.get("one_photo_edit_nothing_saved"));this.pop_done_saving();return }this.pop_start_comming(F.output.get("one_photo_edit_saving"));var C={exp_rsps:exp_rsps,rec_rsps:0,tabl:this};C.flickr_photos_setMeta_onLoad=C.flickr_photos_geo_setPerms_onLoad=C.flickr_photos_licenses_setLicense_onLoad=C.flickr_photos_setContentType_onLoad=C.flickr_photos_setSafetyLevel_onLoad=C.flickr_photos_setDates_onLoad=function(J,I,H){this.rec_rsps++;if(this.rec_rsps==this.exp_rsps){this.tabl.pop_done_saving(1)}};C.flickr_photos_setTags_onLoad=function(K,J,I){this.rec_rsps++;if(!K){var H=J.documentElement.getElementsByTagName("err")[0];if(H&&H.getAttribute("code")=="2"){_ge("one_photo_edit_pop").rsp_errs.push(F.output.get("tags_not_saved",global_tag_limit))}}if(this.rec_rsps==this.exp_rsps){this.tabl.pop_done_saving(1)}};C.flickr_photos_setPerms_onLoad=function(L,K,H,J){this.rec_rsps++;if(L){var I=global_photos[J.photo_id];if(!I){return }I.is_public=J.is_public;I.is_friend=J.is_friend;I.is_family=J.is_family;I.perm_comment=J.perm_comment;I.perm_addmeta=J.perm_addmeta;F.handle_changed_secret(K)}if(this.rec_rsps==this.exp_rsps){this.tabl.pop_done_saving(1)}};C.flickr_photos_geo_setLocation_onLoad=function(L,K,H,J){this.rec_rsps++;if(L){var I=global_photos[J.photo_id];if(!I){return }I.latitude=J.lat;I.longitude=J.lon;I.accuracy=J.accuracy;if(_ge("map_controller")){_ge("map_controller").search_and_open_this_photo(J.photo_id)}}if(this.rec_rsps==this.exp_rsps){this.tabl.pop_done_saving(1)}};C.flickr_photos_geo_removeLocation_onLoad=function(L,K,H,J){this.rec_rsps++;if(L){var I=global_photos[J.photo_id];if(!I){return }I.latitude="0";I.longitude="0";I.accuracy="0";if(_ge("map_controller")){_ge("map_controller").search_and_open_this_photo(J.photo_id)}}if(this.rec_rsps==this.exp_rsps){this.tabl.pop_done_saving(1)}};if(E.tags){F.API.callMethod("flickr.photos.setTags",{photo_id:this.pop_photo.id,tags:B.tags},C)}if(E.meta){F.API.callMethod("flickr.photos.setMeta",{photo_id:this.pop_photo.id,title:B.title,description:B.description},C)}if(E.content_type&&global_eighteen){F.API.callMethod("flickr.photos.setContentType",{photo_id:this.pop_photo.id,content_type:B.content_type+1},C)}if(E.safety_level&&global_eighteen){F.API.callMethod("flickr.photos.setSafetyLevel",{photo_id:this.pop_photo.id,safety_level:B.safety_level+1},C)}if(E.dates){F.API.callMethod("flickr.photos.setDates",{photo_id:this.pop_photo.id,date_posted:B.dates.date_posted,date_taken:B.dates.date_taken,date_taken_granularity:B.dates.date_taken_granularity},C)}if(E.geo){if(!B.lat&&!B.lon){F.API.callMethod("flickr.photos.geo.removeLocation",{photo_id:this.pop_photo.id},C)}else{F.API.callMethod("flickr.photos.geo.setLocation",{photo_id:this.pop_photo.id,lat:B.lat.convert_geo_value(),lon:B.lon.convert_geo_value(),accuracy:16},C)}}if(E.geoperms){F.API.callMethod("flickr.photos.geo.setPerms",{photo_id:this.pop_photo.id,is_public:B.geo_is_public,is_friend:B.geo_is_friend,is_family:B.geo_is_family,is_contact:B.geo_is_contact},C)}if(E.license){F.API.callMethod("flickr.photos.licenses.setLicense",{photo_id:this.pop_photo.id,license_id:B.license_id},C)}if(E.perms){var D={photo_id:this.pop_photo.id,is_public:B.is_public,is_friend:B.is_friend,is_family:B.is_family,perm_comment:B.perm_comment,perm_addmeta:B.perm_addmeta};F.API.callMethod("flickr.photos.setPerms",D,C)}};F._one_photo_edit_pop.pop_done_saving=function(A){if(!this.pop_were_changes_when_opened){F.changes_were_saved()}this.pop_stop_comming();if(A){this.eb_broadcast("one_photo_on_save",this.pop_photo.id,this.pop_changed_dates)}if(this.rsp_errs.length>0){var C="<b>"+F.output.get("not_all_saved")+"</b>";for(var B=0;B<this.rsp_errs.length;B++){C+="<br><br>"+this.rsp_errs[B]}this.pop_start_comming(C,1,1);return }if(_ge("one_photo_goto_next").checked&&this.pop_is_there_a_next){this.pop_go_to_next()}else{this.pop_hide()}};F._one_photo_edit_pop.pop_cancel=function(A){if(this.pop_has_changes()&&!A){var B=function(){_ge("one_photo_edit_pop").pop_cancel(1)};_ge("tabl").tabl_start_comming(F.output.get("unsaved_msg"),1,1,F.output.get("ok"),B,1,F.output.get("cancel"));return }if(!this.pop_were_changes_when_opened){F.changes_were_saved()}this.pop_hide()};F._one_photo_edit_pop.pop_revert=function(){this.pop_fill_form();if(!this.pop_were_changes_when_opened){F.changes_were_saved()}};F._one_photo_edit_pop.pop_has_changes=function(){if(this.pop_loading){return 0}var A=this.pop_what_changed();if(A.dates){return 1}if(A.meta){return 1}if(A.tags){return 1}if(A.perms){return 1}if(A.geo){return 1}if(A.geoperms){return 1}if(A.license){return 1}if(A.content_type){return 1}if(A.safety_level){return 1}return 0};F._one_photo_edit_pop.pop_what_changed=function(){var A={};A.dates=0;A.meta=0;A.tags=0;A.perms=0;A.geo=0;A.geoperms=0;A.license_id=0;A.content_type=0;A.safety_level=0;var C=this.pop_form_data_saved;var B=this.pop_get_data_from_form();A.now=B;if(B.title!=C.title){A.meta=1}else{if(B.description!=C.description){A.meta=1}}if(B.content_type!=C.content_type){A.content_type=1}if(B.safety_level!=C.safety_level){A.safety_level=1}if(B.tags!=C.tags){A.tags=1}if(B.dates.date_posted!=C.dates.date_posted){A.dates=1}else{if(B.dates.date_taken!=C.dates.date_taken){A.dates=1}else{if(B.dates.date_taken_granularity!=C.dates.date_taken_granularity){A.dates=1}}}if(!disable_geo){if(B.lat!=C.lat){A.geo=1}else{if(B.lon!=C.lon){A.geo=1}}if(B.geo_is_public!=C.geo_is_public){A.geoperms=1}else{if(B.geo_is_friend!=C.geo_is_friend){A.geoperms=1}else{if(B.geo_is_family!=C.geo_is_family){A.geoperms=1}else{if(B.geo_is_contact!=C.geo_is_contact){A.geoperms=1}}}}}if(B.license_id!=C.license_id){A.license=1}if(B.is_private!=C.is_private){A.perms=1}else{if(B.is_friend!=C.is_friend){A.perms=1}else{if(B.is_family!=C.is_family){A.perms=1}else{if(B.perm_comment!=C.perm_comment){A.perms=1}else{if(B.perm_addmeta!=C.perm_addmeta){A.perms=1}}}}}return A};var snag=2;var test_JS_callback_NAME=function(A,B){writeDebug("test_JS_callback_NAME pType:"+A+" pItem:"+B)};F.stewart_event=function(C,A,B){writeDebug("stewart_event div_id:"+C+" pType:"+A+" pItem:"+B);if(_ge(C)){_ge(C).stewart_swf_event(A,B)}};F.set_hd_cookie=function(A){if(A!=1&&A!=0){return }_set_cookie("likes_hd",A,1000)};F.get_hd_cookie=function(A){writeDebug("getting cookie"+_get_cookie("likes_hd"));return _get_cookie("likes_hd")};F.stewart_likes_hd=function(B){if(B!=1&&B!=0){return }F.set_hd_cookie(B);var A=document.location.href;A=A.replace_regx(/[\?\&]likes_hd=[01]/,"");A+=(A.indexOf("?")>-1)?"&":"?";A+="likes_hd="+B;document.location=A};F._stewart_swf_div={swf_path:(_qs_args.yep_branch)?"/apps/video/stewart_"+_qs_args.yep_branch+".swf.v"+new Date().getTime():"/apps/video/stewart.swf.v"+global_stewartVersion,swf_id:"",is_playing:false,was_playing:false,play_tim:null,stewart_swf_event:function(A,B){writeDebug("stewart_swf_event this.id:"+this.id+" pType:"+A+" pItem:"+B);var C=_ge(this.swf_id);if(A=="isPlayingChanged"){this.is_playing=(B=="true");if(this.is_playing){this.stewart_hide_loading_el()}}if(A=="showingPhotoAtStart"){this.stewart_hide_loading_el()}if(A=="platformReady"){this.stewart_swap_img_out()}},stewart_hide_loading_el:function(){if(_ge(this.loading_el_id)){_ge(this.loading_el_id).style.display="none"}},stewart_swap_img_in:function(){if(_ge(this.swf_id)){_ge(this.swf_id).style.visibility="hidden"}if(_ge(this.img_id)){_ge(this.img_id).style.display="block"}},stewart_swap_img_out:function(){if(_ge(this.swf_id)){_ge(this.swf_id).style.visibility="visible"}if(_ge(this.img_id)){_ge(this.img_id).style.display="none"}},stewart_play_after_pause:function(){var A=_ge(this.id);var B=_ge(this.swf_id);if(this.play_tim){clearTimeout(this.play_tim)}this.play_tim=setTimeout(function(){if(A.stewart_need_to_hide_video){A.stewart_swap_img_out()}if(B&&B.playVideo){A.was_playing=false;B.playVideo()}},200)},stewart_play_if_was_playing:function(){if(this.was_playing){this.stewart_play_after_pause()}else{if(this.stewart_need_to_hide_video){this.stewart_swap_img_out()}}},stewart_pause_if_need_to_hide_video:function(){if(this.stewart_need_to_hide_video){this.stewart_pause()}},stewart_pause:function(){if(this.stewart_need_to_hide_video){this.stewart_swap_img_in()}if(this.play_tim){clearTimeout(this.play_tim)}this.play_tim=null;var A=false;if(!this.is_playing){return }A=true;var B=_ge(this.swf_id);if(B&&B.getIsPlaying){A=B.getIsPlaying();if(B.pauseVideo){B.pauseVideo()}}this.was_playing=A},stewart_go_go_go:function(L,G,M,E,A){F.eb_add(this);this.loading_el_id=this.id.replace("_div","_loading_el");this.img_id=this.id.replace("_div","_img");this.swf_id=this.id.replace("_div","");this.form_id=this.id.replace("_div","_form");this.wait=E;this.stewart_need_to_hide_video=(window.opera||F.is_chrome||(!F.is_safari&&!(F.is_ff3&&F.is_mac)));this.flash_version=deconcept.SWFObjectUtil.getPlayerVersion();if(_qs_args.noflash){this.flash_version.major=0}writeDebug("Flash:"+this.flash_version.major+"."+this.flash_version.minor+"r"+this.flash_version.rev);this.w=L.toString();this.h=G.toString();this.thumb_src=A;this.init_ob=M;this.stewart_make_sure_we_have_thumb_src();this.style.position="relative";if(_ge(this.form_id)){this.stewart_add_form()}var H=this.id;if(this.wait){if(this.stewart_is_flash_good()){var B=this.id.replace("_div","_trigger_a");var D=_ge(B);if(D){D.onclick=function(){if(_ge(H)&&_ge(H).stewart_write){_ge(H).stewart_write();return false}}}var I=this.id.replace("_div","_big_trigger_a");var K=_ge(I);if(K){K.onclick=D.onclick}}}else{if(Y.U.Dom.hasClass(this,"photo_gne_video_wrapper_div")){this.style.backgroundColor="black"}if(this.stewart_is_flash_good()){var J=0;if(!window.video_has_had_focus){J=1}if(F.is_safari){J=0}var J=0;if(J){var C=document.createElement("IMG");C.id="stewart_temp_jpg";C.src=this.thumb_src;C.width=this.w;C.height=this.h;C.style.position="absolute";C.style.display="block";this.appendChild(C);var C=document.createElement("IMG");C.id="stewart_play_button";C.src=_images_root+"/video_play_icon_large.png";C.width=40;C.height=22;C.style.position="absolute";C.style.display="block";C.style.left=Math.round(this.w/2)-Math.round(C.width/2)+"px";C.style.top=Math.round(this.h/2)-Math.round(C.height/2)+"px";this.appendChild(C);window.video_play_on_focus=function(){window.video_has_had_focus=1;Y.U.Event.removeListener(window,"focus",window.video_play_on_focus);_ge(H).stewart_write()};Y.U.Event.addListener(window,"focus",window.video_play_on_focus)}else{this.stewart_write()}}else{if(_ge("photo_gne_flash_notice_div")){_ge("photo_gne_flash_notice_div").style.display="block"}}}},stewart_make_sure_we_have_thumb_src:function(){this.thumb_src=(!this.thumb_src&&global_photos&&global_photos[this.init_ob.photo_id]&&global_photos[this.init_ob.photo_id].video_thumb_src)?global_photos[this.init_ob.photo_id].video_thumb_src:this.thumb_src},stewart_is_flash_good:function(){if(this.flash_version.major*1<9){return false}if(this.flash_version.major*1==9&&this.flash_version.minor*1>0){return true}if(this.flash_version.major*1==9&&this.flash_version.rev*1>=28){return true}if(this.flash_version.major*1==10){return true}return false},stewart_write:function(E){if(this.stewart_wrote&&!E){return }var I=new SWFObject(this.swf_path,this.swf_id,this.w,this.h,9,"#000000");I.addParam("allowFullScreen","true");I.addParam("allowScriptAccess","always");I.addParam("bgcolor","#000000");I.addVariable("intl_lang",global_intl_lang);I.addVariable("div_id",this.id);I.addVariable("flickr_notracking","true");I.addVariable("flickr_target","_self");I.addVariable("flickr_h",this.h);I.addVariable("flickr_w",this.w);I.addVariable("flickr_no_logo","true");if(0&&this.init_ob.flickr_noAutoPlay!="true"&&!window.already_auto_played){writeDebug("AP PAUSE");this.init_ob.flickr_noAutoPlay="true";window.auto_play_this_id=this.id}var H=F.get_hash();if(H&&H.indexOf&&H.indexOf("comment")==0){this.init_ob.flickr_noAutoPlay="true"}for(var G in this.init_ob){if(this.init_ob[G]==undefined){continue}if(this.init_ob[G]==null){continue}I.addVariable(G,this.init_ob[G])}if(_qs_args.doSmall!="0"){I.addVariable("flickr_doSmall","true")}else{I.addVariable("flickr_doSmall","false")}if(_qs_args.flv){I.addVariable("flickr_flv",_qs_args.flv)}if(_qs_args.noLimit=="1"){I.addVariable("flickr_noLimit","true")}if(_qs_args.debugPos=="1"){I.addVariable("flickr_debugPos","true")}if(_qs_args.use_debugswf=="1"){I.addVariable("use_debugswf","true")}if(_qs_args.noBuffer=="1"){I.addVariable("flickr_noBuffer","true")}if(this.init_ob.onsite){var A=document.createElement("DIV");A.id=this.loading_el_id;A.className="loading_el";A.innerHTML=F.output.get("loading");if(Y.U.Dom.getStyle(this.parentNode,"position")!="absolute"){this.parentNode.style.position="relative"}this.parentNode.appendChild(A);if(this.parentNode.offsetWidth&&!Y.U.Dom.hasClass(this,"photo_gne_video_wrapper_div")&&!Y.U.Dom.hasClass(this,"pc_l")&&!Y.U.Dom.hasClass(this,"bbml_img")){var B=Math.round(this.parentNode.offsetWidth/2)-Math.round(A.offsetWidth/2)}else{var B=Math.round(this.w/2)-Math.round(A.offsetWidth/2)}var D=Math.round(this.h/2)-Math.round(A.offsetHeight/2);A.style.left=B+"px";A.style.top=D+"px"}if(this.wait){var C=this;setTimeout(function(){C.stewart_actually_write(I)},100)}else{this.stewart_actually_write(I)}this.stewart_wrote=1;return },stewart_actually_write:function(A){var B="";this.stewart_make_sure_we_have_thumb_src();if(this.stewart_need_to_hide_video&&this.thumb_src){B='<img style="display:none; position:absolute;" id="'+this.img_id+'" width="'+this.w+'" height="'+this.h+'" src="'+this.thumb_src+'">'}if(!A.write(this.id,B)){return }if(F.is_ie){this.stewart_swap_img_in()}if(F.is_ie){window[this.swf_id]=_ge(this.swf_id)}writeAPIDebug(this.id+" "+_ge(this.id).innerHTML)},stewart_add_form:function(){var C=this.id;_ge(this.form_id+"_submit").style.display="none";var A=function(){var D=_ge(C);clearTimeout(D.activity_func_tim);D.activity_func_tim=setTimeout(function(){_ge(C).stewart_on_form_activity()},1000)};var B=function(){_ge(C).stewart_on_form_activity()};yui.Event.addListener(_ge(this.form_id+"_show_info_box_cb"),"click",B);yui.Event.addListener(_ge(this.form_id+"_show_info_box_cb"),"change",B);yui.Event.addListener(_ge(this.form_id+"_w_input"),"change",B);yui.Event.addListener(_ge(this.form_id+"_w_input"),"keyup",A);yui.Event.addListener(_ge(this.form_id+"_w_input"),"keydown",A);yui.Event.addListener(_ge(this.form_id+"_h_input"),"change",B);yui.Event.addListener(_ge(this.form_id+"_h_input"),"keyup",A);yui.Event.addListener(_ge(this.form_id+"_h_input"),"keydown",A);if(_ge(this.form_id+"_reset_to_suggested_a")){yui.Event.addListener(_ge(this.form_id+"_reset_to_suggested_a"),"click",function(D){_ge(C).stewart_reset_to_suggested_dims();YAHOO.util.Event.preventDefault(D||window.event)})}if(_ge(this.form_id+"_reset_to_original_a")){yui.Event.addListener(_ge(this.form_id+"_reset_to_original_a"),"click",function(D){_ge(C).stewart_reset_to_original_dims();YAHOO.util.Event.preventDefault(D||window.event)})}if(_ge(this.form_id+"_textarea")){yui.Event.addListener(_ge(this.form_id+"_textarea"),"click",function(E){var D=_get_event_src(E);D.select()})}},stewart_on_form_activity:function(){clearTimeout(this.activity_func_tim);var A=_ge(this.form_id+"_w_input").value;var C=_ge(this.form_id+"_h_input").value;if(isNaN(A)){A=this.w;_ge(this.form_id+"_w_input").value=A}if(isNaN(C)){C=this.h;_ge(this.form_id+"_h_input").value=C}var B=(_ge(this.form_id+"_show_info_box_cb").checked)?"true":undefined;if(A!=this.w||C!=this.h||B!=this.init_ob.flickr_show_info_box){writeDebug("w:"+A+" this.w:"+this.w);writeDebug("h:"+C+" this.h:"+this.h);if(C!=this.h){writeDebug("h changed");A=Math.round(this.w*(C/this.h));_ge(this.form_id+"_w_input").value=A}else{if(A!=this.w){writeDebug("w changed");C=Math.round(this.h*(A/this.w));_ge(this.form_id+"_h_input").value=C}}writeDebug("w:"+A+" this.w:"+this.w);writeDebug("h:"+C+" this.h:"+this.h);writeDebug("show_info_box:"+B+" this.init_ob.flickr_show_info_box:"+this.init_ob.flickr_show_info_box);this.w=A;this.h=C;this.init_ob.flickr_show_info_box=B;this.stewart_write(1);if(_ge(this.form_id+"_textarea")){_ge(this.form_id+"_textarea").value=F.output.get("loading");this.stewart_load_markup({markup_only:1,id:this.init_ob.photo_id,w:A,h:C,show_info_box:(B=="true")?1:0})}}},stewart_load_markup:function(A){F.fragment_getter.get("/photo_embed.gne",A,this,"stewart_markup_loaded")},stewart_markup_loaded:function(C,A,B){_ge(this.form_id+"_textarea").value=A},stewart_reset_to_suggested_dims:function(){_ge(this.form_id+"_w_input").value=_ge(this.form_id+"_suggested_w").value;_ge(this.form_id+"_h_input").value=_ge(this.form_id+"_suggested_h").value;this.stewart_on_form_activity()},stewart_reset_to_original_dims:function(){_ge(this.form_id+"_w_input").value=_ge(this.form_id+"_original_w").value;_ge(this.form_id+"_h_input").value=_ge(this.form_id+"_original_h").value;this.stewart_on_form_activity()}};YAHOO.util.Event.on(window,"focus",function(){var A=new Date().getTime();window.video_has_had_focus=1});F._stewart_poller={start_polling:function(A){if(!A){return }this.p_id=A;this.poll()},poll:function(){setTimeout(function(){F.API.callMethod("flickr.photos.getInfo",{photo_id:F._stewart_poller.p_id},F._stewart_poller)},5000)},flickr_photos_getInfo_onLoad:function(E,D,B){if(E&&D){var A=D.documentElement.getElementsByTagName("photo")[0];var C=_upsert_photo(A);writeAPIDebug(_uber_toString(C));if(C.video_ready||C.video_failed){document.location=page_current_url+"?processed=1&cb="+new Date().getTime();return }}this.poll()}};if(typeof deconcept=="undefined"){var deconcept=new Object();}if(typeof deconcept.util=="undefined"){deconcept.util=new Object();}if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil=new Object();}deconcept.SWFObject=function(n,R,m,X,J,W,O,Y,o,v,z){if(!document.getElementById){return ;}this.DETECT_KEY=v?v:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params=new Object();this.variables=new Object();this.attributes=new Array();if(n){this.setAttribute("swf",n);}if(R){this.setAttribute("id",R);}if(m){this.setAttribute("width",m);}if(X){this.setAttribute("height",X);}this.setAttribute("base",(z)?z:".");if(J){this.setAttribute("version",new deconcept.PlayerVersion(J.toString().split(".")));}this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){deconcept.SWFObject.doPrepUnload=true;}if(W){this.addParam("bgcolor",W);}var N=O?O:"high";this.addParam("quality",N);this.setAttribute("useExpressInstall",false);this.setAttribute("doExpressInstall",false);var x=(Y)?Y:window.location;this.setAttribute("xiRedirectUrl",x);this.setAttribute("redirectUrl","");if(o){this.setAttribute("redirectUrl",o);}};deconcept.SWFObject.prototype={useExpressInstall:function(o){this.xiSWFPath=!o?"expressinstall.swf":o;this.setAttribute("useExpressInstall",true);},setAttribute:function(o,N){this.attributes[o]=N;},getAttribute:function(o){return this.attributes[o];},addParam:function(o,N){this.params[o]=N;},getParams:function(){return this.params;},addVariable:function(o,N){this.variables[o]=N;},getVariable:function(o){return this.variables[o];},getVariables:function(){return this.variables;},getVariablePairs:function(){var o=new Array();var N;var R=this.getVariables();for(N in R){o[o.length]=N+"="+R[N];}return o;},getSWFHTML:function(n){var v="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute("swf",this.xiSWFPath);}v="<embed type=\"application/x-shockwave-flash\" src=\""+this.getAttribute("swf")+"\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\" style=\""+this.getAttribute("style")+"\"";v+=" id=\""+this.getAttribute("id")+"\" name=\""+this.getAttribute("id")+"\" base=\""+this.getAttribute("base")+"\" ";var R=this.getParams();for(var o in R){v+=[o]+"=\""+R[o]+"\" ";}var N=this.getVariablePairs().join("&");if(N.length>0){v+="flashvars=\""+N+"\"";}v+="/>";}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute("swf",this.xiSWFPath);}v="<object id=\""+this.getAttribute("id")+"\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\" style=\""+this.getAttribute("style")+"\">";v+="<param name=\"movie\" value=\""+this.getAttribute("swf")+"\" />";v+="<param name=\"base\" value=\""+this.getAttribute("base")+"\" />";var R=this.getParams();for(var o in R){v+="<param name=\""+o+"\" value=\""+R[o]+"\" />";}var N=this.getVariablePairs().join("&");if(N.length>0){v+="<param name=\"flashvars\" value=\""+N+"\" />";}v+="</object>";}v=(typeof n!="undefined"?n:"")+v;writeAPIDebug("swfNode: "+v);return v;},write:function(o,v){if(this.getAttribute("useExpressInstall")){var N=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(N)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title);}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var R=(typeof o=="string")?document.getElementById(o):o;R.innerHTML=this.getSWFHTML(v);return true;}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"));}}return false;}};deconcept.SWFObjectUtil.getPlayerVersion=function(){var R=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var o=navigator.plugins["Shockwave Flash"];if(o&&o.description){o.description.match(/[a-zA-Z\s]([0-9]+)\.([0-9]+)\s*[rbd]([0-9]+)/);var X=[RegExp.$1,RegExp.$2,RegExp.$3];if(navigator.platform.match(/win32/i)&&!X[0]){o.description.match(/[a-zA-Z\s]([0-9]+)\.([0-9]+|([0-9]+.[0-9]+.))\s*[rbd]([0-9]+)/);X=[RegExp.$1,RegExp.$2,RegExp.$3];}R=new deconcept.PlayerVersion(X);}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var v=1;var N=3;while(v){try{N++;v=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+N);R=new deconcept.PlayerVersion([N,0,0]);}catch(n){v=null;}}}else{try{var v=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(n){try{var v=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");R=new deconcept.PlayerVersion([6,0,21]);v.AllowScriptAccess="always";}catch(n){if(R.major==6){return R;}}try{v=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(n){}}if(v!=null){R=new deconcept.PlayerVersion(v.GetVariable("$version").split(" ")[1].split(","));}}}return R;};deconcept.PlayerVersion=function(o){this.major=o[0]!=null?parseInt(o[0]):0;this.minor=o[1]!=null?parseInt(o[1]):0;this.rev=o[2]!=null?parseInt(o[2]):0;};deconcept.PlayerVersion.prototype.versionIsValid=function(o){if(this.major<o.major){return false;}if(this.major>o.major){return true;}if(this.minor<o.minor){return false;}if(this.minor>o.minor){return true;}if(this.rev<o.rev){return false;}return true;};deconcept.util={getRequestParameter:function(v){var R=document.location.search||document.location.hash;if(v==null){return R;}if(R){var N=R.substring(1).split("&");for(var o=0;o<N.length;o++){if(N[o].substring(0,N[o].indexOf("="))==v){return N[o].substring((N[o].indexOf("=")+1));}}}return "";}};deconcept.SWFObjectUtil.cleanupSWFs=function(){var R=document.getElementsByTagName("OBJECT");for(var N=R.length-1;N>=0;N--){R[N].style.display="none";for(var o in R[N]){if(typeof R[N][o]=="function"){R[N][o]=function(){};}}}};if(deconcept.SWFObject.doPrepUnload){if(!deconcept.unloadSet){deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs);};window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload);deconcept.unloadSet=true;}}if(!document.getElementById&&document.all){document.getElementById=function(o){return document.all[o];};}var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;function SWFMacMouseWheel(o){this.so=o;var N=navigator.appVersion.toLowerCase().indexOf("mac")!=-1;if(N){this.init();}}SWFMacMouseWheel.prototype={init:function(){SWFMacMouseWheel.instance=this;if(window.addEventListener){window.addEventListener("DOMMouseScroll",SWFMacMouseWheel.instance.wheel,false);}window.onmousewheel=document.onmousewheel=SWFMacMouseWheel.instance.wheel;},handle:function(o){document[this.so.getAttribute("id")].externalMouseEvent(o);},wheel:function(o){var N=0;if(o.wheelDelta){N=o.wheelDelta/120;if(window.opera){N=-N;}}else{if(o.detail){N=-o.detail/3;}}if(/AppleWebKit/.test(navigator.userAgent)){N/=3;}if(N){SWFMacMouseWheel.instance.handle(N);}if(o.preventDefault){o.preventDefault();}o.returnValue=false;}};var icon_ccbgdiv=null;var icon_ccdiv=null;var icon_doneit=null;var icon_isPopped=false;var icon_scrollTim=null;var icon_popup_w=300;var icon_popup_h=330;var icon_buddyIcon=null;var user_data=null;var icon_progress_w=136;var icon_progress_h=49;function icon_windowClose(){clearTimeout(icon_scrollTim);Y.U.Event.removeListener(window,"resize",icon_positionWindow);Y.U.Event.removeListener(window,"scroll",icon_positionWindowOnScroll);icon_ccdiv.style.display="none";icon_ccbgdiv.style.display="none";icon_isPopped=false;if(!F.is_safari&&!((F.is_ff2||F.is_ff3)&&F.is_mac)){F.eb_broadcast("stewart_play_if_was_playing")}}function icon_windowOpenFromHover(A){user_data=_ge("person_hover").hover_persons[A];if(!user_data){alert(F.output.get("personmenu_buddyicon")+" '"+A+"'");return }var B=1;return icon_windowOpen()}function icon_windowOpenFromLink(A){var B={};B.flickr_people_getInfo_onLoad=function(E,D,C){user_data=new BuddyData(D);icon_windowOpen()};F.API.callMethod("flickr.people.getInfo",{user_id:A},B)}function icon_windowOpen(){var C=user_data.nsid;var B=user_data.is_contact;var E=user_data.name;var A=user_data.is_friend;var G=user_data.is_family;var D=user_data.icon_url;if(B){if(A&&G){_ge("contactChangerText1").innerHTML=F.output.get("personmenu_contactChangerText1_ff",E);if(user_data.gender=="M"){_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_ff_m",E)}if(user_data.gender=="F"){_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_ff_f",E)}if(user_data.gender!="M"&&user_data.gender!="F"){_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_ff_o",E)}}else{if(A){_ge("contactChangerText1").innerHTML=F.output.get("personmenu_contactChangerText1_fri",E);if(user_data.gender=="M"){_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_fri_m",E)}if(user_data.gender=="F"){_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_fri_f",E)}if(user_data.gender!="M"&&user_data.gender!="F"){_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_fri_o",E)}}else{if(G){_ge("contactChangerText1").innerHTML=F.output.get("personmenu_contactChangerText1_fam",E);if(user_data.gender=="M"){_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_fam_m",E)}if(user_data.gender=="F"){_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_fam_f",E)}if(user_data.gender!="M"&&user_data.gender!="F"){_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_fam_o",E)}}else{_ge("contactChangerText1").innerHTML=F.output.get("personmenu_contactChangerText1_con",E);_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_con_o",E)}}}_ge("contactChangerText3").innerHTML=F.output.get("personmenu_contactChangerText3",C,E)}else{_ge("contactChangerText1").innerHTML=F.output.get("personmenu_contactChangerText1_notcon",E);_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_notcom",E);_ge("contactChangerText3").innerHTML=F.output.get("personmenu_contactChangerText3_notcon")}_ge("contactChangerIcon").src=D;_ge("contactChangerCheckFriend").checked=A;_ge("contactChangerCheckFamily").checked=G;_ge("person_hover").hover_go_away();icon_ccdiv.style.display="block";icon_ccbgdiv.style.display="block";icon_isPopped=true;icon_positionWindow();Y.U.Event.addListener(window,"resize",icon_positionWindow);Y.U.Event.addListener(window,"scroll",icon_positionWindowOnScroll);if(!F.is_safari&&!((F.is_ff2||F.is_ff3)&&F.is_mac)){F.eb_broadcast("stewart_pause")}return false}function icon_positionWindowOnScroll(A){if(icon_doneit==false){return }icon_doneit=false;clearTimeout(icon_scrollTim);icon_scrollTim=setTimeout("icon_positionWindowOnScroll(true)",50);if(A){icon_doneit=true;icon_positionWindow()}}function icon_positionWindow(){if(!icon_isPopped){return }if(window.innerWidth){var C=window.innerWidth;var B=window.innerHeight;var A=window.pageXOffset;var D=window.pageYOffset}else{var C=document.body.clientWidth;var B=document.body.clientHeight;var A=document.body.scrollLeft;var D=document.body.scrollTop}icon_ccdiv.style.left=(A+((C-icon_popup_w)/2))+"px";icon_ccdiv.style.top=(D+((B-icon_popup_h)/2))+"px";icon_ccbgdiv.style.left=A;icon_ccbgdiv.style.top=D}function icon_windowCloseDone(){icon_ccdiv.style.display="none";var B=user_data.nsid;var A=_ge("contactChangerCheckFriend").checked;var E=_ge("contactChangerCheckFamily").checked;var C=A==user_data.is_friend;var D=E==user_data.is_family;if(C&&D&&user_data.is_contact){icon_windowClose();return }icon_showProgress(F.output.get("personmenu_working"));var G={};G.flickr_contacts_edit_onLoad=function(M,L,J,K){if(M){if(user_data){user_data.is_contact=true;user_data.is_friend=A;user_data.is_family=E}_ge("person_hover").hover_persons[K.user_id]=null;icon_updateContactTxt();icon_showProgress(F.output.get("personmenu_success"));window.setTimeout("icon_hideProgress(); icon_windowClose();",300)}else{var H;if(L&&L.documentElement){var I=L.documentElement.getElementsByTagName("err")[0];if(I){H=I.getAttribute("code")}}if(H=="3"){icon_showProgress(F.output.get("personmenu_success"));window.setTimeout("icon_hideProgress(); icon_windowClose();",500)}else{if(H=="4"){icon_showDialog(F.output.get("too_many_contacts",user_data.name,global_contact_limit))}else{icon_showProgress(F.output.get("personmenu_failure"));window.setTimeout("icon_hideProgress(); icon_windowClose();",500)}}}};G.flickr_contacts_add_onLoad=G.flickr_contacts_edit_onLoad;if(user_data.is_contact){F.API.callMethod("flickr.contacts.edit",{user_id:user_data.nsid,friend:A?1:0,family:E?1:0},G)}else{F.API.callMethod("flickr.contacts.add",{user_id:user_data.nsid,friend:A?1:0,family:E?1:0},G)}}function icon_updateContactTxt(){var A=_ge("span_user_contact_txt"+user_data.nsid);if(A){if(user_data.is_contact){var J='<a href="/relationship.gne?id='+user_data.nsid+'" onclick="icon_windowOpenFromLink(\''+user_data.nsid+"'); return false\">"+F.output.get("personmenu_change")+"</a>?";if(user_data.is_friend&&user_data.is_family){if(user_data.gender=="M"){A.innerHTML=F.output.get("personmenu_updatecontact_ff_m",J)}if(user_data.gender=="F"){A.innerHTML=F.output.get("personmenu_updatecontact_ff_f",J)}if(user_data.gender!="M"&&user_data.gender!="F"){A.innerHTML=F.output.get("personmenu_updatecontact_ff_o",J)}}else{if(user_data.is_friend){if(user_data.gender=="M"){A.innerHTML=F.output.get("personmenu_updatecontact_fri_m",J)}if(user_data.gender=="F"){A.innerHTML=F.output.get("personmenu_updatecontact_fri_f",J)}if(user_data.gender!="M"&&user_data.gender!="F"){A.innerHTML=F.output.get("personmenu_updatecontact_fri_o",J)}}else{if(user_data.is_family){if(user_data.gender=="M"){A.innerHTML=F.output.get("personmenu_updatecontact_fam_m",J)}if(user_data.gender=="F"){A.innerHTML=F.output.get("personmenu_updatecontact_fam_f",J)}if(user_data.gender!="M"&&user_data.gender!="F"){A.innerHTML=F.output.get("personmenu_updatecontact_fam_o",J)}}else{if(user_data.gender=="M"){A.innerHTML=F.output.get("personmenu_updatecontact_con_m",J)}if(user_data.gender=="F"){A.innerHTML=F.output.get("personmenu_updatecontact_con_f",J)}if(user_data.gender!="M"&&user_data.gender!="F"){A.innerHTML=F.output.get("personmenu_updatecontact_con_o",J)}}}}}else{if(user_data.gender=="M"){A.innerHTML='<a href="/relationship.gne?id='+user_data.nsid+'" onclick="icon_windowOpenFromLink(\''+user_data.nsid+"'); return false\">"+F.output.get("personmenu_updatecontact_notcon_m")+"</a>?"}if(user_data.gender=="F"){A.innerHTML='<a href="/relationship.gne?id='+user_data.nsid+'" onclick="icon_windowOpenFromLink(\''+user_data.nsid+"'); return false\">"+F.output.get("personmenu_updatecontact_notcon_f")+"</a>?"}if(user_data.gender!="M"&&user_data.gender!="F"){A.innerHTML='<a href="/relationship.gne?id='+user_data.nsid+'" onclick="icon_windowOpenFromLink(\''+user_data.nsid+"'); return false\">"+F.output.get("personmenu_updatecontact_notcon_o")+"</a>?"}}}var C=_ge("uber_contact_status_"+user_data.nsid);if(C){Y.D.removeClass(C,"contact-list-nothingyet");if(user_data.is_contact){if(user_data.is_friend&&user_data.is_family){C.innerHTML=F.output.get("uber_contact_list_friend_and_family")+(YAHOO.env.ua.ie?"&nbsp;":"")}else{if(user_data.is_friend){C.innerHTML=F.output.get("uber_contact_list_friend")+(YAHOO.env.ua.ie?"&nbsp;":"")}else{if(user_data.is_family){C.innerHTML=F.output.get("uber_contact_list_family")+(YAHOO.env.ua.ie?"&nbsp;":"")}else{C.innerHTML=F.output.get("uber_contact_list_contact")+(YAHOO.env.ua.ie?"&nbsp;":"")}}}}else{C.innerHTML='<em style="color: #f15050">'+F.output.get("uber_contact_list_removed")+"</em>"+(YAHOO.env.ua.ie?"&nbsp;":"")}var D=_ge("uber_contact_status_edit_"+user_data.nsid);if(D){D.style.display="";D.id=""}}var B=_ge("photo_navi_contact_span_"+user_data.nsid);if(B){var G=user_data.name.truncate_with_ellipses(15).escape_for_display();var H="/people/"+user_data.nsid+"/relationship/";if(user_data.is_contact){var E;if(user_data.is_friend&&user_data.is_family){E=F.output.get("rel_link_friend_and_family",G)}else{if(user_data.is_friend){E=F.output.get("rel_link_friend",G)}else{if(user_data.is_family){E=F.output.get("rel_link_family",G)}else{E=F.output.get("rel_link_contact",G)}}}E+=' <span class="edit_relationship">(<a href="'+H+'" onclick="icon_windowOpenFromLink(\''+user_data.nsid+"');return false\">"+F.output.get("corrections_edit")+"</a>)</span>";B.innerHTML=E}else{B.innerHTML='<a href="'+H+'" onclick="icon_windowOpenFromLink(\''+user_data.nsid+"');return false\">"+F.output.get("rel_link_add",G)+"</a>"}}if(global_users&&global_users[user_data.nsid]){var I=global_users[user_data.nsid];I.friend=(user_data.is_friend)?"1":"0";I.family=(user_data.is_family)?"1":"0";if(!user_data.is_contact){I.removed="1"}}}function icon_removeContact(A){icon_ccdiv.style.display="none";icon_showProgress(F.output.get("personmenu_working"));var B={};B.flickr_contacts_remove_onLoad=function(G,E,C,D){if(G){user_data.is_contact=false;_ge("person_hover").hover_persons[D.user_id]=null;icon_updateContactTxt();icon_showProgress(F.output.get("personmenu_success"));window.setTimeout("icon_hideProgress(); icon_windowClose();",500)}else{icon_showProgress(F.output.get("personmenu_failure"));window.setTimeout("icon_hideProgress(); icon_windowClose();",500)}};F.API.callMethod("flickr.contacts.remove",{user_id:user_data.nsid},B)}function icon_showProgress(A){if(!global_comm_div){_make_comm_div("20002")}global_comm_div.start_comming(A)}function icon_showDialog(B){if(!global_comm_div){_make_comm_div("20002")}var A=function(){icon_hideProgress();icon_windowClose()};global_comm_div.start_comming(B,null,null,1,1,null,A)}function icon_hideProgress(){global_comm_div.stop_comming()}function iframeify(C){if(F.is_ie){var A="<iframe style='position: absolute; left: 0px; top: 0px; width: 100%; height: 100%; z-index: -1; filter:Alpha(Opacity=\"0\");' >";var B=document.createElement(A);C.appendChild(B);return B}return null}function personmenu_process_img(A){_ge("person_hover").hover_add_img(A);A.onmouseover=_hitch(_ge("person_hover"),"icon_mouseover");A.onmouseout=_hitch(_ge("person_hover"),"icon_mouseout")}function personmenu_init(K,C){if(!C){setTimeout(function(){personmenu_init(K,1)},50);return }if(K){F.decorate(_ge("person_hover"),F._person_hover).hover_go_go_go()}var G=function(L){if(Y.U.Dom.hasClass(L,"xBuddyIcon")){return false}if(Y.U.Dom.hasClass(L,"xBuddyIconH")){return false}if(Y.U.Dom.hasClass(L,"xBuddyIconX")){return false}if(Y.U.Dom.hasClass(L,"person_hover_img")){return false}var N=L.src.split("#");var M=N[1];if(M){L.nsid=M;return true}return false};var H=[];var E=document.getElementsByTagName("IMG");var J=/.*#real=/;for(var D=0;D<E.length;D++){var B=E[D];var A=B.src;if(A.indexOf("#real=")!=-1){B.src=A.replace_regx(J,"")}if(K&&G(B)){H.push(B);setTimeout(function(){personmenu_process_img(H.pop())},1*D)}}if(!K){return }icon_ccbgdiv=_ge("contactChangerBackground");var I=35;icon_ccbgdiv.style.backgroundColor="#000";icon_ccbgdiv.style.opacity=I/100;icon_ccbgdiv.style.MozOpacity=I/100;icon_ccbgdiv.style.filter="alpha(opacity="+I+")";icon_ccdiv=_ge("contactChangerPopup");iframeify(icon_ccbgdiv)}F._person_hover=new Object();F._person_hover.hover_go_go_go=function(){this.hover_persons={};this.hover_showing=0;this.hover_menu_showing=0;this.hover_show_timer=null;this.hover_hide_timer=null;this.hover_anim_timer=null;this.hover_over=0;this.hover_curr_img=null;F.decorate(_ge("personmenu_button_bar"),F._personmenu_button_bar).bar_go_go_go();if(F.is_ie){_ge("person_hover_inner").style.width="79px";_ge("person_hover_inner").style.height="58px"}this.onmouseover=_hitch(this,"hover_mouseover");this.onmouseout=_hitch(this,"hover_mouseout")};F._person_hover.hover_add_img=function(A){var C="hover_img"+A.nsid;if(_ge(C)){return }var B=document.createElement("IMG");B.id=C;B.nsid=A.nsid;B.src=A.src;B.className="person_hover_img";_ge("person_hover_link").appendChild(B)};F._person_hover.hover_mouseover=function(A){clearTimeout(this.hover_hide_timer);this.hover_over=1};F._person_hover.hover_mouseout=function(A){this.hover_over=0;if(this.hover_menu_showing){return }this.hover_hide_timer=setTimeout(function(){var B=_ge("person_hover");if(!B.hover_over){B.hover_hide()}},500)};F._person_hover.icon_mouseover=function(B){if(this.hover_menu_showing){return }clearTimeout(this.hover_hide_timer);this.hover_icon=_get_event_src(B);if(this.hover_showing){this.hover_place_and_show()}if(this.hover_curr_img&&this.hover_curr_img.nsid!=this.hover_icon.nsid){this.hover_curr_img.style.display="none";this.hover_curr_img.style.visibility="hidden"}this.hover_curr_img=_ge("hover_img"+this.hover_icon.nsid);this.hover_curr_img.style.display="block";this.hover_curr_img.style.visibility="visible";_ge("person_hover_link").href=(this.hover_icon.parentNode.href)?this.hover_icon.parentNode.href:"/photos/"+this.hover_icon.nsid+"/";if(!this.hover_showing){var A=this.hover_icon;this.hover_show_timer=setTimeout(function(){var C=_ge("person_hover");if(A==C.hover_icon){C.hover_place_and_show()}},100)}};F._person_hover.hover_go_away=function(){this.hover_menu_showing=0;clearTimeout(this.hover_show_timer);clearTimeout(this.hover_hide_timer);clearTimeout(this.hover_anim_timer);this.hover_over=0;this.hover_hide_menu();this.hover_hide()};F._person_hover.icon_mouseout=function(A){if(this.hover_showing){return }clearTimeout(this.hover_show_timer)};F._person_hover.hover_hide=function(){this.hover_showing=0;this.style.display="none";Y.U.Event.removeListener(window,"resize",this.window_resize);Y.U.Event.removeListener(window,"scroll",this.window_scroll)};F._person_hover.window_mousedown=function(C,A){var B=_get_event_src(C);while(B){if(B.id=="person_hover"||B.id=="personmenu_down_button"){return }B=B.parentNode}A.hover_go_away()};F._person_hover.window_resize=function(B,A){A.hover_place()};F._person_hover.window_scroll=function(B,A){A.hover_place()};F._person_hover.hover_place_and_show=function(){this.hover_place();this.hover_show_hover()};F._person_hover.hover_show_hover=function(){this.hover_showing=1;this.style.display="block";Y.U.Event.addListener(window,"resize",this.window_resize,this);Y.U.Event.addListener(window,"scroll",this.window_scroll,this)};F._person_hover.hover_place=function(){var A=Y.U.Dom.getX(this.hover_icon);var B=Y.U.Dom.getY(this.hover_icon);A-=_pi((48-this.hover_icon.width)/2);B-=_pi((48-this.hover_icon.height)/2);this.style.left=(A-6)+"px";this.style.top=(B-5)+"px"};F._person_hover.hover_toggle_menu=function(){if(this.hover_menu_showing){this.hover_hide_menu()}else{this.hover_show_menu()}};F._person_hover.hover_add_contact=function(){icon_windowOpenFromHover(this.hover_icon.nsid)};F._person_hover.hover_hide_menu=function(){this.hover_menu_showing=0;_ge("person_hover_shadow").className="shadowLight";_ge("personmenu_down_button").button_hide_menu();_ge("personmenu_down_button").button_set_img_srcs_and_change("personmenu_down");Y.U.Event.removeListener(window,"mousedown",this.window_mousedown)};F._person_hover.hover_actually_show_menu=function(){clearTimeout(this.hover_anim_timer);_ge("personmenu_down_button").button_show_menu();_ge("person_hover_pulser_img").style.display="none";_ge("person_hover_link").style.display="block";F.scroll_this_el_into_view("personmenu_down_menu")};F._person_hover.hover_show_menu=function(G){this.hover_menu_showing=1;_ge("person_hover_shadow").className="shadowDark";var A=_ge("personmenu_down_button");A.button_hide_menu();A.button_set_img_srcs_and_change("personmenu_up");if(this.hover_icon.nsid==global_nsid){Y.U.Event.addListener(document.body,"mousedown",this.window_mousedown,this);_ge("person_menu_other_div").style.display="none";_ge("person_menu_you_div").style.display="block";_ge("personmenu_relationship_p").innerHTML=F.output.get("personmenu_hiyou");_ge("personmenu_relationship_p").style.display="block";this.hover_actually_show_menu()}else{_ge("person_menu_you_div").style.display="none";_ge("person_menu_other_div").style.display="block";var B=this.hover_persons[this.hover_icon.nsid];if(B){Y.U.Event.addListener(document.body,"mousedown",this.window_mousedown,this);var D=B.getRelationshipHTML();if(D){_ge("personmenu_relationship_p").innerHTML=D;_ge("personmenu_contact_link").style.display="none";_ge("personmenu_relationship_p").style.display="block"}else{D=F.output.get("personmenu_add_as_contact",B.name);_ge("personmenu_contact_link").innerHTML=D;_ge("personmenu_contact_link").href="/relationship.gne?id="+B.nsid;_ge("personmenu_relationship_p").style.display="none";_ge("personmenu_contact_link").style.display="block";if(typeof _is_beehive!="undefined"&&_is_beehive==true){var H=_ge("personmenu_contact_link");var E=H.parentNode.getElementsByTagName("div")[0];var I="menu_item_line_above";if(E&&YAHOO.util.Dom.hasClass(E,I)){YAHOO.util.Dom.removeClass(E,I)}H.style.display="none"}}if(B.has_collections){if(_ge("personmenu_collections_link")){_ge("personmenu_collections_link").style.display="block"}}else{if(_ge("personmenu_collections_link")){_ge("personmenu_collections_link").style.display="none"}}_ge("personmenu_photos_link").href=B.getphotos_url();_ge("personmenu_profile_link").href=B.getprofile_url();_ge("personmenu_sets_link").href=B.getphotos_url()+"sets/";if(_ge("personmenu_collections_link")){_ge("personmenu_collections_link").href=B.getphotos_url()+"collections/"}_ge("personmenu_tags_link").href=B.getTagsUrl();_ge("personmenu_archives_link").href=B.getArchivesUrl();if(_ge("personmenu_map_link")){_ge("personmenu_map_link").href=B.getMapUrl()}_ge("personmenu_faves_link").href=B.getFavoritesUrl();_ge("personmenu_contacts_link").href=B.getContactsUrl();if(_ge("personmenu_photosof_link")){_ge("personmenu_photosof_link").href=B.getPhotosOfUrl()}_ge("personmenu_mail_link").href=B.getSendMailUrl();var C=(B.is_blocked)?F.output.get("personmenu_unblock"):F.output.get("personmenu_block");_ge("personmenu_block_link").innerHTML=C;_ge("personmenu_block_link").href="/ignore.gne?id="+B.nsid;this.hover_actually_show_menu()}else{if(!G){this.hover_anim_timer=setTimeout(function(){_ge("person_hover_link").style.display="none";_ge("person_hover_pulser_img").style.display="block"},1000);F.API.callMethod("flickr.people.getInfo",{user_id:this.hover_icon.nsid},this,null,null,null,0,0)}}}};F._person_hover.flickr_people_getInfo_onLoad=function(D,C,B){var A=C.documentElement.getElementsByTagName("person")[0].getAttribute("nsid");this.hover_persons[A]=new BuddyData(C);if(this.hover_menu_showing){this.hover_show_menu(1)}};function BuddyData(C){var A=C.documentElement;var D=A;var E=A.getElementsByTagName("person").item(0);this.nsid=E.getAttribute("nsid");this.is_contact=E.getAttribute("contact")==="1";this.is_friend=E.getAttribute("friend")==="1";this.is_family=E.getAttribute("family")==="1";this.is_rev_contact=E.getAttribute("revcontact")==="1";this.is_rev_friend=E.getAttribute("revfriend")==="1";this.is_rev_family=E.getAttribute("revfamily")==="1";this.is_blocked=E.getAttribute("ignored")==="1";this.has_collections=E.getAttribute("hascollections")&&E.getAttribute("hascollections")==="1";this.forum_blocked=E.getAttribute("forum_blocked")&&E.getAttribute("forum_blocked")==="1";this.gender=E.getAttribute("gender");this.name=this.nsid;try{this.name=A.getElementsByTagName("username").item(0).firstChild.nodeValue.escape_for_display()}catch(H){}this.photos_url="/photos/"+this.nsid+"/";this.profile_url="/people/"+this.nsid+"/";try{this.photos_url=A.getElementsByTagName("photosurl").item(0).firstChild.nodeValue}catch(H){}try{this.profile_url=A.getElementsByTagName("profileurl").item(0).firstChild.nodeValue}catch(H){}var I=E.getAttribute("iconserver");var G=Math.ceil(I/1000);if(I&&I!="0"){var B=_photo_root.replace("http://farm","http://farm"+G);this.icon_url=B+I+"/buddyicons/"+this.nsid+".jpg"}else{this.icon_url=_images_root+"/buddyicon.jpg"}}BuddyData.prototype={isMe:function(){if(global_nsid){return this.nsid==global_nsid}else{return false}},getYourRecentActivityUrl:function(){return"/recent_activity.gne"},getYourFlickrMailUrl:function(){return"/mail/"},getYourAccountUrl:function(){return"/account/"},getYourBuddyIconEditUrl:function(){return"/iconbuilder/"},getphotos_url:function(){return this.photos_url},getprofile_url:function(){return this.profile_url},getTagsUrl:function(){return this.photos_url+"tags/"},getArchivesUrl:function(){return this.photos_url+"archives/"},getMapUrl:function(){return this.photos_url+"map/"},getFavoritesUrl:function(){return this.photos_url+"favorites/"},getContactsUrl:function(){return this.profile_url+"contacts/"},getPhotosOfUrl:function(){return this.profile_url+"photosof/"},getSendMailUrl:function(){return"/mail/write/?to="+this.nsid},getRelationshipHTML:function(){var A='<a href="/relationship.gne?id='+this.nsid+'" onclick="return icon_windowOpenFromHover(\''+this.nsid+"');\">"+F.output.get("personmenu_change")+"</a>";switch(true){case this.is_blocked:return F.output.get("personmenu_are_blocking",this.name);case this.is_friend&&this.is_family:return F.output.get("personmenu_is_ff",this.name,A);case this.is_friend:return F.output.get("personmenu_is_fri",this.name,A);case this.is_family:return F.output.get("personmenu_is_fam",this.name,A);case this.is_contact:return F.output.get("personmenu_is_con",this.name,A);default:return null}},getReverseRelationshipHTML:function(){switch(true){case this.is_rev_friend&&this.isRefFamily:return F.output.get("personmenu_as_ff",this.name);case this.is_rev_friend:return F.output.get("personmenu_as_fri",this.name);case this.isRefFamily:return F.output.get("personmenu_as_fam",this.name);case this.is_rev_contact:return F.output.get("personmenu_as_con",this.name);default:return null}}};F._personmenu_button_bar={bar_go_go_go:function(){F.decorate(_ge("personmenu_down_button"),F._personmenu_button).button_go_go_go()}};F._personmenu_button={_decotype:F._simple_button,button_always_swap_img:0,button_img_root:"personmenu_down_",button_img_ext:"gif",button_go_go_go:function(){F.preload_images(_images_root+"/personmenu_down_default.gif",_images_root+"/personmenu_down_hover.gif",_images_root+"/personmenu_down_selected.gif");var D=this.button_get_menu();this.iframe=iframeify(D);var A=D.getElementsByTagName("A");for(var B=0;B<A.length;B++){var C=A[B];Y.U.Event.addListener(C,"click",function(){if(_ge("person_hover").hover_menu_showing){_ge("person_hover").hover_go_away()}})}F._personmenu_button._decotype.button_go_go_go.apply(this)},button_get_menu:function(){return _ge("personmenu_down_menu")},button_hide_menu:function(){this.button_get_menu().style.display="none"},button_show_menu:function(){var B=this.button_get_menu();B.style.visibility="hidden";B.style.display="block";var A=F.get_local_X(this);var C=F.get_local_Y(this);if(A+B.offsetWidth>_find_screen_width()){A=_find_screen_width()-B.offsetWidth}C+=(this.height);B.style.top=(C)+"px";B.style.left=(A)+"px";if(this.iframe){this.iframe.style.width=B.offsetWidth+"px";this.iframe.style.height=B.offsetHeight+"px"}B.style.visibility="visible"}};