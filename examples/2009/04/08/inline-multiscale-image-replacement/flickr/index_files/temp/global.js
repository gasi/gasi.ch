var snaggit=3;var undefined;var YMAPPID="flickrMappr";if(!Function.prototype.call){Function.prototype.call=function(A,B){A.base=this;A.base(B)}}if(!Function.prototype.apply){Function.prototype.apply=function(oScope,args){var sarg=[];var rtrn,call;if(!oScope){oScope=window}if(!args){args=[]}for(var i=0;i<args.length;i++){sarg[i]="args["+i+"]"}call="oScope.__applyTemp__("+sarg.join(",")+");";oScope.__applyTemp__=this;rtrn=eval(call);oScope.__applyTemp__=null;return rtrn}}Date.prototype.customFormat=function(I){var N=((YYYY=this.getFullYear())+"").substr(2,2);var L=this.getMonth()+1;var S=(L)<10?"0"+L:L;var T=F.output.date_strs.monthsA[L-1];var C=F.output.date_strs.months_abbA[L-1];var R=this.getDate();var X=R<10?"0"+R:R;var J=F.output.date_strs.days_abbA[L-1];var O=F.output.date_strs.daysA[L-1];var B=R%10;var H="";if(global_intl_lang=="en-us"){H=(R>=10&&R<=20)?"th":(B==1)?"st":(B==2)?"nd":(B==3)?"rd":"th"}if(global_intl_lang=="fr-fr"){if(R==1){H="er"}}if(global_intl_lang=="pt-br"){if(R==1){H="&#186;"}}if(global_intl_lang=="de-de"){if(R==1){H="."}}I=I.replace("#YYYY#",YYYY);I=I.replace("#YY#",N);I=I.replace("#MMMM#",T);I=I.replace("#MMM#",C);I=I.replace("#MM#",S);I=I.replace("#M#",L);I=I.replace("#DDDD#",O);I=I.replace("#DDD#",J);I=I.replace("#DD#",X);I=I.replace("#D#",R);I=I.replace("#th#",H);var U=decodeURIComponent("%EB%85%84");var c=decodeURIComponent("%EC%9B%94");var A=decodeURIComponent("%EC%9D%BC");I=I.replace("#KY#",U);I=I.replace("#KM#",c);I=I.replace("#KD#",A);var e=decodeURIComponent("%E5%B9%B4");var E=decodeURIComponent("%E6%9C%88");var K=decodeURIComponent("%E6%97%A5");I=I.replace("#CY#",e);I=I.replace("#CM#",E);I=I.replace("#CD#",K);var Z=this.getHours();var b=Z;if(b==0){b=24}if(b>12){b-=12}var G=(b<10)?"0"+b:b;var Q=(Z<12)?"am":"pm";var V=this.getMinutes();var a=(V<10)?"0"+V:V;var P=this.getSeconds();var W=(P<10)?"0"+P:P;I=I.replace("#hhh#",Z);I=I.replace("#hh#",G);I=I.replace("#h#",b);I=I.replace("#mm#",a);I=I.replace("#m#",V);I=I.replace("#ss#",W);I=I.replace("#s#",P);I=I.replace("#ampm#",Q);return I};Date.prototype.flickr_date=function(){var A="#D##th# #MMMM#, #YYYY#";if(global_intl_lang=="ko-kr"){A="#YYYY##KY# #MMMM##KM# #D##KD#"}if(global_intl_lang=="zh-hk"){A="#YYYY##CY##M##CM##D##CD#"}return this.customFormat(A)};Date.prototype.flickr_date_and_time=function(){var A="#hhh#:#mm# #D##th# #MMMM#, #YYYY#";if(global_intl_lang=="ko-kr"){A="#YYYY##KY# #MMMM##KM# #D##KD# #hhh#:#mm#"}if(global_intl_lang=="zh-hk"){A="#YYYY##CY##M##CM##D##CD# #hhh#:#mm#"}return this.customFormat(A)};Date.prototype.flickr_minidate=function(){var A="#D# #MMM# #YY#";if(global_intl_lang=="ko-kr"){A="#YY##KY# #M##KM# #D##KD#"}if(global_intl_lang=="zh-hk"){A="#YY##CY##M##CM##D##CD#"}return this.customFormat(A)};var global_today=new Date();var global_tm=global_today.getMonth()+1;var global_td=global_today.getDate();var global_ty=global_today.getFullYear();var global_days_in_months=[31,0,31,30,31,30,31,31,30,31,30,31];if(!Array.prototype.push){Array.prototype.push=function(){var C=0,A=this.length,B=arguments;for(C;C<B.length;C++){this[A+C]=B[C]}return this.length}}if(!Array.prototype.pop){Array.prototype.pop=function(){var A=this[this.length-1];this.length--;return A}}if(!Array.prototype.shift){Array.prototype.shift=function(){var B=this[0];for(var A=0;A<this.length-1;A++){this[A]=this[A+1]}this.length--;return B}}if(!Array.prototype.unshift){Array.prototype.unshift=function(){this.reverse();for(var A=arguments.length-1;A>=0;A--){this[this.length]=arguments[A]}this.reverse();return this.length}}if(!Array.prototype.splice){function array_splice(C,B){if(arguments.length==0){return C}if(typeof C!="number"){C=0}if(C<0){C=Math.max(0,this.length+C)}if(C>this.length){if(arguments.length>2){C=this.length}else{return[]}}if(arguments.length<2){B=this.length-C}B=(typeof B=="number")?Math.max(0,B):0;removeArray=this.slice(C,C+B);endArray=this.slice(C+B);this.length=C;for(var A=2;A<arguments.length;A++){this[this.length]=arguments[A]}for(var A=0;A<endArray.length;A++){this[this.length]=endArray[A]}return removeArray}Array.prototype.splice=array_splice}var _numeric_sort_func=function(B,A){return(B-A)};var _alpha_sort_func=function(C,B){var A=String(C).toLowerCase();var D=String(B).toLowerCase();return(A>D)?1:((A<D)?-1:0)};Number.prototype.addZeros=function(A){if(this.toString().length>=A){return this}return(new Array(A).join("0")+this).substr((new Array(A).join("0")+this).length-A)};Number.prototype.pretty_num=function(){var I=F.output.dec_sep;var B=F.output.thou_sep;var G=this.toString();var H=G.split(".");var E=H[0];var C=(H[1])?I+H[1]:"";if(E.length<4){return G}var A="";for(var D=E.length-1;D>-1;D--){if(D<E.length-1&&(E.length-1-D)%3==0){A=B+A}A=E.charAt(D)+A}return A+C};Number.prototype.truncate_geo_value=function(){var A=this.toString();sA=A.split(".");if(sA.length<2){return this}d=sA[1];if(d.length<7){return this}d=d.substring(0,6);return(sA[0]+"."+d)*1};Number.prototype.convert_geo_value=function(){return this.truncate_geo_value()};String.prototype.truncate_geo_value=function(){return _pf(this).truncate_geo_value()};String.prototype.convert_geo_value=function(){var E=this.toString().toLowerCase();var B=new RegExp("^(geo:lat=(\\+|\\-)?((\\d+\\.\\d+)|\\d+))");var K=new RegExp("^(geo:(long|lon)=(\\+|\\-)?((\\d+\\.\\d+)|\\d+))");var G=new RegExp("[a-z:=]","g");var M=new RegExp("[ ;]","g");var H=new RegExp(",+","g");if(E.match(B)){var L=E.replace(G,"").replace(M,",").replace(H,",")}if(E.match(K)){var L=E.replace(G,"").replace(M,",").replace(H,",")}if(typeof (L)=="undefined"){var D=null;var J=null;E=E.replace(String.fromCharCode(8220),'"').replace(String.fromCharCode(8221),'"').replace(String.fromCharCode(8216),"'").replace(String.fromCharCode(8217),"'").replace(String.fromCharCode(176),"*");var A=null;var C=null;if(E.indexOf("n")>0){D=true;A=E.indexOf("n")}if(E.indexOf("s")>0){D=false;A=E.indexOf("s")}if(E.indexOf("e")>0){J=true;C=E.indexOf("e")}if(E.indexOf("w")>0){J=false;C=E.indexOf("w")}if(E.indexOf("*")>0&&E.indexOf("'")>0&&E.indexOf('"')>0){var E=E.replace(new RegExp("[nsew'\"*]"),",").replace(new RegExp(",+")," ").replace(new RegExp(" +")," ");var I=E.split(" ");if(I.length>=4){var L=_pi(I[0]);if(L>=0){L+=(I[1]/60)+(I[2]/6000)}else{L-=((I[1]/60)+(I[2]/6000))}}}if(E.indexOf("*")>0&&E.indexOf("'")>0){var E=E.replace(new RegExp("[nsew'\"*]"),",").replace(new RegExp(",+")," ").replace(new RegExp(" +")," ");var I=E.split(" ");if(I.length>=3){var L=_pi(I[0]);if(L>=0){L+=(I[1]/60)}else{L-=(I[1]/60)}}}if(typeof (I)=="undefined"){var E=E.replace(new RegExp("[nsew'\"*]"),",").replace(new RegExp(",+")," ").replace(new RegExp(" +")," ");var I=E.split(" ");if(I.length>=2){var L=_pf(I[0])}}if(D==true){L=Math.abs(L)}if(D==false){L=-1*Math.abs(L)}if(J==true){L=Math.abs(L)}if(J==false){L=-1*Math.abs(L)}}if(typeof (L)=="undefined"){return _pf(this).truncate_geo_value()}else{return _pf(L).truncate_geo_value()}};String.prototype.pretty_num=function(){return _pf(this).pretty_num()};String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.nl2br=function(){return this.split("\n").join("<br>\n")};String.prototype.replace_regx=String.prototype.replace;String.prototype.replace=function(B,A){return this.split(B).join(A)};String.prototype.escape_for_xml=function(){return this.replace("&","&amp;").replace('"',"&quot;").replace("<","&lt;").replace(">","&gt;")};String.prototype.unescape_from_xml=function(){return this.replace("&quot;",'"').replace("&lt;","<").replace("&gt;",">").replace("&amp;","&")};String.prototype.escape_for_display=function(){return this.replace("<","&lt;")};String.prototype.escape_for_display_and_wrap=function(){return this.replace("<","<wbr>&lt;")};String.prototype.truncate_with_ellipses=function(B){var A=this;if(A.length>B-3){A=A.substr(0,B-3).trim()+"&hellip;"}return A};String.prototype.truncate=function(B){var A=this;if(A.length>B){A=A.substr(0,B)}return A};var global_photos={};var global_sets={};var global_collections={};var global_groups={};var global_users={};if(global_nsid){global_users[global_nsid]={id:global_nsid,name:global_name,icon_url:global_icon_url,expire:global_expire,dbid:global_dbid}}var _get_collection_src=function(I,C,H){var G="";if(!I){return G}if(!I.server||!I.secret){G="/images/collection_default_l.gif"}else{var D=Math.ceil(I.server/1000);var H=(H)?H:_photo_root;var A=I.id.split("-");var E=I.server+"/cols/"+A[1]+"_"+I.secret+"_l.jpg";var B=H.replace("http://farm","http://farm"+D);G=B+E;if(p.src_cb){G+="?"+p.src_cb}}if(C=="s"){G=G.replace("_l.jpg","_s.jpg")}return G};var _get_photo_src=function(C,B,G){var E="";if(!C||!C.src){return E}if(!B){B="s"}var D=C.src;if(B!="s"){D=D.replace("_s","_"+B)}D=D.replace("_500.jpg",".jpg");var G=(G)?G:_photo_root;var A=G.replace("http://farm","http://farm"+C.farm);E=A+D;if(C.src_cb){E+="?"+C.src_cb}return E};var _construct_user_icon_url=function(E,B){if(E&&E!="0"){var D=Math.ceil(E/1000);var A=_photo_root.replace("http://farm","http://farm"+D);var C=A+E+"/buddyicons/"+B+".jpg"}else{var C=_images_root+"/buddyicon.jpg"}writeDebug(C);return C};var _upsert_user=function(N){var J=N.getAttribute("nsid");var U=N.getAttribute("username");var T=N.getAttribute("realname");var B=N.getAttribute("iconserver");var Q=N.getAttribute("expire");var P=N.getAttribute("dbid");var M=N.getAttribute("email");var O=N.getAttribute("hide_email");var L=N.getAttribute("friend");var R=N.getAttribute("family");var C=N.getAttribute("ispro");var S=N.getAttribute("path_alias");var A=N.getAttribute("location");var K=N.getElementsByTagName("username");if(K&&K[0]){var I=K[0];var U=(I.firstChild)?I.firstChild.nodeValue:""}var D=N.getElementsByTagName("realname");if(D&&D[0]){var G=D[0];var T=(G.firstChild)?G.firstChild.nodeValue:""}var E=_construct_user_icon_url(B,J);var H=global_users[J];if(!H){H=global_users[J]={id:J,name:U,realname:T,email:M,icon_url:E,hide_email:O,friend:L,family:R,ispro:C,path_alias:S,location:A}}else{H.id=J;H.name=U;H.realname=T;H.email=M;H.icon_url=E;H.hide_email=H.hide_email;H.friend=L;H.family=R;H.ispro=C;H.path_alias=S;H.location=A}if(Q){H.expire=Q}if(P){H.dbid=P}return H};var _get_group_throttle_txt=function(A){var B="";if(A){if(A.throttle_mode=="disabled"){B=F.output.get("pool_uploads_disabled")}else{if(A.throttle_count){B=F.output.get("pool_uploads_throttled_"+A.throttle_mode,A.throttle_count.pretty_num())}else{B=""}}}return B};var _upsert_group=function(E){var I=E.getAttribute("nsid");if(!I){I=E.getAttribute("id")}var C=E.getAttribute("name");if(!C){C=E.getAttribute("title")}var H=E.getAttribute("iconserver");if(H&&H!="0"){var G=Math.ceil(H/1000);var A=_photo_root.replace("http://farm","http://farm"+G);var B=A+H+"/buddyicons/"+I+".jpg"}else{var B=_images_root+"/buddyicon.jpg"}var D=global_groups[I];if(!D){D=global_groups[I]={id:I,name:C,icon_url:B}}else{D.id=I;D.name=C;D.icon_url=B}return D};var _upsert_photo_new=function(E){if(!E){return }var C={};if(typeof E.getElementsByTagName!="function"){C.id=E.id;C.server=E.server;C.secret=E.secret;C.title=E.title;C.date_taken=E.datetaken;C.date_taken_granularity=E.datetakengranularity;C.date_upload=E.dateupload;C.latitude=E.latitude;C.longitude=E.longitude;C.accuracy=E.accuracy;C.owner_nsid=E.owner;C.owner_name=E.ownername;C.owner_iconserver=E.iconserver;C.is_public=E.ispublic;C.is_friend=E.isfriend;C.is_family=E.isfamily;C.geo_is_public=E.geoperms.ispublic}else{C.id=E.getAttribute("id");C.server=E.getAttribute("server");C.secret=E.getAttribute("secret");var M=E.getElementsByTagName("title");if(M&&M[0]){var Q=M[0];C.title=(Q.firstChild)?Q.firstChild.nodeValue:"";var K=E.getElementsByTagName("description")[0];C.description=(K.firstChild)?K.firstChild.nodeValue:"";C.license_id=E.getAttribute("license");C.is_favorite=E.getAttribute("isfavorite");var H=E.getElementsByTagName("visibility")[0];C.is_public=H.getAttribute("ispublic");C.is_friend=H.getAttribute("isfriend");C.is_family=H.getAttribute("isfamily");C.safety_level=H.getAttribute("safety_level");C.content_type=H.getAttribute("content_type");C.is_hidden=H.getAttribute("hidden");C.moderation_mode=H.getAttribute("moderation_mode");var G=E.getElementsByTagName("dates")[0];C.date_taken=G.getAttribute("taken");C.date_taken_granularity=G.getAttribute("takengranularity");C.date_upload=G.getAttribute("posted");C.date_update=G.getAttribute("lastupdate");var D=E.getElementsByTagName("owner")[0];C.owner_nsid=D.getAttribute("nsid");C.owner_name=D.getAttribute("username");C.owner_iconserver=null;var P=E.getElementsByTagName("geoperms");if(P&&P[0]){C.geo_is_public=P[0].getAttribute("ispublic");C.geo_is_friend=P[0].getAttribute("isfriend");C.geo_is_family=P[0].getAttribute("isfamily");C.geo_is_contact=P[0].getAttribute("iscontact")}var J=E.getElementsByTagName("location");if(J&&J[0]){C.latitude=J[0].getAttribute("latitude");C.longitude=J[0].getAttribute("longitude");C.accuracy=J[0].getAttribute("accuracy")}var R=E.getElementsByTagName("permissions");if(R&&R[0]){C.perm_comment=R[0].getAttribute("permcomment");C.perm_addmeta=R[0].getAttribute("permaddmeta")}var R=E.getElementsByTagName("permissions");if(R&&R[0]){C.perm_comment=R[0].getAttribute("permcomment");C.perm_addmeta=R[0].getAttribute("permaddmeta")}var N=E.getElementsByTagName("tag");if(N){_rebuild_tags(C,N)}var L=E.getElementsByTagName("set");if(L&&L.length){C.sets=[];for(var I=0;I<L.length;I++){C.sets.push(L[I].getAttribute("id"))}}var O=E.getElementsByTagName("pool");if(O&&O.length){C.pools=[];for(var I=0;I<O.length;I++){C.pools.push(O[I].getAttribute("id"));if(!global_groups[O[I].getAttribute("id")]){_upsert_group(O[I])}}}}else{C.title=E.getAttribute("title");C.date_taken=E.getAttribute("datetaken");C.date_taken_granularity=E.getAttribute("datetakengranularity");C.date_upload=E.getAttribute("dateupload");C.latitude=E.getAttribute("latitude");C.longitude=E.getAttribute("longitude");C.accuracy=E.getAttribute("accuracy");C.owner_nsid=E.getAttribute("owner");C.owner_name=E.getAttribute("ownername");C.owner_iconserver=E.getAttribute("iconserver");C.is_public=E.getAttribute("ispublic");C.is_friend=E.getAttribute("isfriend");C.is_family=E.getAttribute("isfamily")}}var B=global_photos[C.id];if(!B){B=global_photos[C.id]={}}C.farm=Math.ceil(C.server/1000);C.src=C.server+"/"+C.id+"_"+C.secret+"_s.jpg";delete C.secret;for(var A in C){if(A=="description"){B[A]=C[A];continue}if(C[A]!=""&&C[A]!=undefined){B[A]=C[A]}}B.toString=function(){return _uber_toString(this,null,null,"g_p["+this.id+"].")};return B};var _upsert_photo=function(c){var l=c.getAttribute("id");var AG=c.getAttribute("secret");var k=c.getAttribute("server");var S=Math.ceil(k/1000);var W=k+"/"+l+"_"+AG+"_s.jpg";var s=c.getAttribute("media");var U=c.getElementsByTagName("title");if(U&&U[0]){var AD=U[0];var f=(AD.firstChild)?AD.firstChild.nodeValue:"";var AI=c.getElementsByTagName("description")[0];var T=(AI.firstChild)?AI.firstChild.nodeValue:"";var e=c.getAttribute("license");var m=c.getAttribute("isfavorite");var K=c.getElementsByTagName("visibility")[0];var N=K.getAttribute("ispublic");var y=K.getAttribute("isfriend");var L=K.getAttribute("isfamily");var H=K.getAttribute("safety_level");var J=K.getAttribute("content_type");var Q=K.getAttribute("hidden");var AE=K.getAttribute("moderation_mode");var r=c.getElementsByTagName("geoperms");if(r&&r[0]){var AJ=r[0].getAttribute("ispublic");var n=r[0].getAttribute("isfriend");var AF=r[0].getAttribute("isfamily");var q=r[0].getAttribute("iscontact")}var V=c.getElementsByTagName("dates")[0];var C=V.getAttribute("taken");var Z=V.getAttribute("takengranularity");var z=V.getAttribute("posted");var B=V.getAttribute("lastupdate");var G=c.getElementsByTagName("owner")[0];var AH=G.getAttribute("nsid");var o=G.getAttribute("username");var D=null;var w=c.getElementsByTagName("location");if(w&&w[0]){var P=w[0].getAttribute("latitude");var t=w[0].getAttribute("longitude");var AC=w[0].getAttribute("accuracy")}var I=c.getElementsByTagName("permissions");if(I&&I[0]){var g=I[0].getAttribute("permcomment");var h=I[0].getAttribute("permaddmeta")}var I=c.getElementsByTagName("permissions");if(I&&I[0]){var g=I[0].getAttribute("permcomment");var h=I[0].getAttribute("permaddmeta")}var a=c.getElementsByTagName("tag");var X=c.getElementsByTagName("set");var b=c.getElementsByTagName("pool");var x=c.getElementsByTagName("video");if(x&&x[0]){var v=x[0].getAttribute("failed");var R=x[0].getAttribute("ready");var j=x[0].getAttribute("duration");var M=x[0].getAttribute("width");var O=x[0].getAttribute("height")}}else{var f=c.getAttribute("title");var C=c.getAttribute("datetaken");var Z=c.getAttribute("datetakengranularity");var z=c.getAttribute("dateupload");var P=c.getAttribute("latitude");var t=c.getAttribute("longitude");var AC=c.getAttribute("accuracy");var AH=c.getAttribute("owner");var o=c.getAttribute("ownername");var D=c.getAttribute("iconserver");var N=c.getAttribute("ispublic");var y=c.getAttribute("isfriend");var L=c.getAttribute("isfamily");var AB=c.getAttribute("o_width");var E=c.getAttribute("o_height");var s=c.getAttribute("media");var A=c.getAttribute("forsale")}var u=global_photos[l];if(!u){u=global_photos[l]={id:l,title:f,src:W}}else{u.id=l;u.title=f;u.src=W}u.secret=AG;u.server=k;u.farm=S;u.toString=function(AK,AO){var AK=(AK)?AK:this;var AO=(AO)?AO:1;var AN="";var AM="";for(var AL=0;AL<AO;AL++){AM+="\t"}if(AO==1){AN+="global_photos["+u.id+"] = {\n"}for(pr in AK){if(typeof AK[pr]=="function"){continue}AN+=AM+pr;if(typeof AK[pr]=="object"){if(AK[pr].length!=undefined){AN+=" = [\n";AN+=u.toString(AK[pr],AO+1);AN+=AM+"]\n"}else{AN+=" = {\n";AN+=u.toString(AK[pr],AO+1);AN+=AM+"}\n"}}else{if(typeof AK[pr]=="function"){AN+=": function\n"}else{if(typeof AK[pr]=="string"){AN+=': "'+AK[pr]+'"\n'}else{AN+=": "+AK[pr]+"\n"}}}}if(AO==1){AN+="}\n"}return AN};if(a){_rebuild_tags_for_photos(l,a)}if(e&&e!=""){u.license_id=e}if(e&&e!=""){u.is_favorite=m}if(C&&C!=""){u.date_taken=C}if(Z!=undefined&&Z!=""){u.date_taken_granularity=Z}if(z&&z!=""){u.date_upload=z}if(B&&B!=""){u.date_update=B}if(P!=undefined&&P!=""){u.latitude=P}if(t!=undefined&&t!=""){u.longitude=t}if(AC!=undefined&&AC!=""){u.accuracy=AC}if(T!=undefined){u.description=T}if(N!=undefined){u.is_public=N}if(y!=undefined){u.is_friend=y}if(L!=undefined){u.is_family=L}if(E!=undefined&&!isNaN(E)){u.o_h=E*1}if(AB!=undefined&&!isNaN(AB)){u.o_w=AB*1}if(s&&s!=""){u.media=s}if(A!=undefined){u.forsale=A}if(v!=undefined){u.video_failed=(v==1)?1:0}if(R!=undefined){u.video_ready=(R==1)?1:0}if(j!=undefined){u.video_duration=j}if(M!=undefined){u.video_width=M}if(O!=undefined){u.video_height=O}if(H!=undefined){u.safety_level=H}if(J!=undefined){u.content_type=J}if(Q!=undefined){u.is_hidden=Q}if(AE!=undefined){u.moderation_mode=AE}if(AJ!=undefined){u.geo_is_public=AJ}if(n!=undefined){u.geo_is_friend=n}if(AF!=undefined){u.geo_is_family=AF}if(q!=undefined){u.geo_is_contact=q}if(g!=undefined){u.perm_comment=g}if(h!=undefined){u.perm_addmeta=h}if(AH!=undefined){u.owner_nsid=AH}if(o!=undefined){u.owner_name=o}if(D!=undefined){u.owner_iconserver=D}if(X&&X.length){u.sets=[];for(var AA=0;AA<X.length;AA++){u.sets.push(X[AA].getAttribute("id"))}}if(b&&b.length){u.pools=[];for(var AA=0;AA<b.length;AA++){u.pools.push(b[AA].getAttribute("id"));if(!global_groups[b[AA].getAttribute("id")]){_upsert_group(b[AA])}}}return u};var _upsert_set=function(G){var C=G.getAttribute("id");var H=G.getAttribute("primary");var J=G.getAttribute("server");var A=Math.ceil(J/1000);var I=G.getAttribute("secret");var D=G.getAttribute("id");var E=G.getAttribute("photos");var Q=G.getAttribute("videos");var L=G.getElementsByTagName("photo");if(H&&H!=""){var B=global_photos[H];if(!B){B=global_photos[H]={};B.id=H}if(J&&J!=""&&I&&I!=""){B.src=J+"/"+B.id+"_"+I+"_s.jpg";B.farm=A}}var M=G.getElementsByTagName("title");if(M&&M[0]&&M[0].firstChild){var O=M[0].firstChild.nodeValue}else{var O=G.getAttribute("title")}var N=G.getElementsByTagName("description");if(N&&N[0]){if(N[0].firstChild){var P=N[0].firstChild.nodeValue}else{var P=""}}var R=global_sets[C];if(!R){R=global_sets[C]={id:C,primary_photo_id:H,photo_idsA:[]}}else{R.id=C;R.primary_photo_id=H}if(D&&D!=""){R.owner=D}if(O&&O!=""){R.title=O}if(P!=undefined){R.description=P}var L=G.getElementsByTagName("photo");if(L&&L.length){R.count=L.length;if(!G.getAttribute("page")||G.getAttribute("page")==1){R.photo_idsA=[]}for(var K=0;K<L.length;K++){var B=_upsert_photo(L[K]);R.photo_idsA.push(B.id)}}else{if(E!=""){R.count=_pi(E)}if(Q!=""){R.count=R.count+_pi(Q)}}return R};var global_reg_photo_print_ids=[1,2,3];var global_dig_photo_print_ids=[29,30,31];var global_huge_photo_print_ids=[18];var global_square_photo_print_ids=[23];var global_wallet_photo_print_ids=[32];var writeDebug=function(){};var writeAPIDebug=function(){};var writeTimerDebug=function(){};var writeFormDebug=function(){};var writeObjectDebug=function(){};var timer=function(){};timer.prototype.add=function(){};timer.prototype.add_child=function(){};timer.prototype.clear=function(){};timer.prototype.get_text=function(){};timer.prototype.dump=function(){};var _page_timer=new timer("page","start");var _ge=function(A){return document.getElementById(A)};var _pi=function(A){return parseInt(A,10)};var _pf=function(A){return parseFloat(A)};var F={id:"F",is_windows:(navigator.appVersion.toLowerCase().indexOf("mac")==-1&&navigator.appVersion.toLowerCase().indexOf("nix")==-1&&navigator.appVersion.toLowerCase().indexOf("nux")==-1),changes_count:0,_ebA:[],_decoratedO:{},is_chrome:(navigator.userAgent.indexOf("Chrome/")>-1)?1:0,is_safari:(navigator.userAgent.indexOf("Safari")>-1)?1:0,is_safari2:(navigator.userAgent.match(/applewebkit\/4/i)?1:0),is_ie:(document.all&&!window.opera)?1:0,is_ff2:(navigator.userAgent.indexOf("Firefox/2")>-1)?1:0,is_ff3:(navigator.userAgent.indexOf("Firefox/3")>-1)?1:0,is_opera:(navigator.userAgent.match(/opera/i)?1:0),is_mac:(navigator.appVersion.toLowerCase().indexOf("mac")>0)?1:0,output:{format_strs:{}}};F.border_radius=(F.is_ff3||F.is_chrome||(F.is_safari&&!F.is_safari2));F.handle_changed_secret=function(E){var C=E.documentElement.getElementsByTagName("photoid");for(var B=0;B<C.length;B++){var G=C[B].firstChild.nodeValue;var D=global_photos[G];if(!D){continue}var A=C[B].getAttribute("secret");D.secret=A;D.src=D.server+"/"+D.id+"_"+A+"_s.jpg"}};F.preload_images_defer=true;F.preloaded_queue=[];F.preload_images=function(){var B=0;for(var A=0;A<arguments.length;A++){if(arguments[A]){B++;F.preloaded_queue.push(arguments[A])}else{}}if(!F.preload_images_defer){F._preload_images_now()}};F._preload_images_now=function(){if(!F.preloaded){F.preloaded=[]}for(var A=0;A<F.preloaded_queue.length;A++){F.preloaded.push(document.createElement("img"));F.preloaded[F.preloaded.length-1].src=F.preloaded_queue[A]}F.preloaded_queue=[]};F._preload_images_ready=function(){F.preload_images_defer=false;F._preload_images_now()};F.get_month_index=function(B){var A=B.substr(0,3).toUpperCase();for(var C=0;C<F.output.date_strs.months_abbA.length;C++){if(A==F.output.date_strs.months_abbA[C]){return C}}return -1};F.make_unix_time_stamp=function(H,G,B,A,D,E){var C=new Date(H,G-1,B,A,D,E);return C.getTime()/1000};F.convert_unix_time_stamp=function(B,D){var C=new Date(B*1000);if(D){var A=new Date(C.getTime()+(C.getTimezoneOffset()*60*1000));return A}else{return C}};F.convert_unix_time_stamp_into_MYSQLDateTime=function(A){var B=new Date((A*1000));return this.make_MYSQLDateTime_stamp(B.getFullYear(),(B.getMonth()+1).addZeros(2),B.getDate().addZeros(2),B.getHours().addZeros(2),B.getMinutes().addZeros(2),B.getSeconds().addZeros(2))};F.convert_date_into_unix_time_stamp=function(A){return Math.floor(A.getTime()/1000)};F.convert_date_into_MYSQLDateTime=function(A){var B=A;return this.make_MYSQLDateTime_stamp(B.getFullYear(),(B.getMonth()+1).addZeros(2),B.getDate().addZeros(2),B.getHours().addZeros(2),B.getMinutes().addZeros(2),B.getSeconds().addZeros(2))};F.make_MYSQLDateTime_stamp=function(H,G,C,B,D,E){var A="";if(H!=undefined){A+=H}else{return A}if(G!=undefined){A+="-"+G}else{return A}if(C!=undefined){A+="-"+C}else{return A}if(B!=undefined){A+=" "+B}else{return A}if(D!=undefined){A+=":"+D}else{return A}if(E!=undefined){A+=":"+E}else{return A}return A};F.convert_MYSQLDateTime_into_unix_time_stamp=function(B){var A=this.convert_MYSQLDateTime(B);return Math.floor(A.getTime()/1000)};F.convert_MYSQLDateTime=function(A){var B=A.split(" ");var C=B[0].split("-");var D=B[1].split(":");if(!D[0]||isNaN(D[0])){D[0]="00"}if(!D[1]||isNaN(D[1])){D[1]="00"}if(!D[2]||isNaN(D[2])){D[2]="00"}return new Date(C[0],(C[1]*1)-1,C[2],D[0],D[1],D[2])};F.set_hash=function(D){var B=document.location.href.split("#");var C=B[0];var E=F.get_hash();if(D){document.location=C+"#"+D}else{if(E){document.location=C+"#"}else{}}};F.get_hash=function(){var B=document.location.href.split("#");return B[1]||""};F.scroll_this_el_into_view=function(M,A,N,E,D,B){var C=(typeof M=="object")?M:_ge(M);if(!C){return }if(!A){A=document.body}if(A==document.body){A=document.body;var H=_find_screen_height();var L=Y.U.Dom.getY(C)}else{var H=A.offsetHeight;var L=Y.U.Dom.getY(C)-Y.U.Dom.getY(A)+A.scrollTop}var G=L+C.offsetHeight+5+(D?D:0);var K=H+A.scrollTop;var J=G-K;var I=Math.min(A.scrollTop+J,L);if((B||J>0)&&I!=A.scrollTop){anim_do_scroll_to_scrollTop(A,10,35,I,"easeInOutQuad",N,E);return 1}if(N&&E){N.apply(null,E)}return 0};F.stop_event_propagation=function(A){if(!A){A=window.event}Y.U.Event.stopPropagation(A)};F.fit_text_in_block=function(O,G,L,H,E){writeDebug("fit_text_in_block start");var J=new Date();H=(H)?H:"";E=(E)?E:"";var P=O;var B=G.style.display;var Q=G.style.visibility;G.style.visibility="hidden";G.style.display="block";G.innerHTML=H+P+E;writeDebug("BEFORE: h:"+G.offsetHeight+" max:"+L+" "+P);var K=0;if(G.offsetHeight>L&&P.length>1){K++;G.innerHTML=H+"m"+E;var N=G.offsetHeight;G.innerHTML=H+P+E;var C=(G.offsetHeight/N);var D=Math.floor(L/N);writeDebug("lh "+N+" lc "+C+" alc "+D);var M=G.offsetHeight-L;var A=Math.max(1,C-3)/D;writeDebug("DURING: diff:"+M+" times:"+A);P=P.truncate_with_ellipses(_pi(P.length/(A)));G.innerHTML=H+P+E;writeDebug("lop a bunch: h:"+G.offsetHeight+" max:"+L+" "+P)}if(G.offsetHeight>L&&P.length>1){do{K++;P=P.truncate_with_ellipses(P.length-2);G.innerHTML=H+P+E}while(G.offsetHeight>L&&P.length>1)}writeAPIDebug("AFTER: c:"+K+" h:"+G.offsetHeight+" max:"+L+" "+P);G.style.visibility=Q;G.style.display=B;var I=new Date();writeDebug("fit_text_in_block Step 1 = "+(I-J)+"ms")};F.get_tags_from_input_str=function(I){I=I.trim();if(I==""){return[]}var G=[];if(I.indexOf(",")!=-1){var D=I.split(",");for(var E=0;E<D.length;E++){var A=D[E].trim();A=A.replace('"',"");if(A!==""){G.push(A)}}}else{var D=I.split('"');for(var E=0;E<D.length;E++){var H=D[E].trim();if(E%2==0){var C=H.split(" ");for(var B=0;B<C.length;B++){if(C[B]!=""){G.push(C[B])}}}else{if(H!=""){G.push(H)}}}}return G};F.array_copy=function(B){var D=[];for(var C=0;C<B.length;C++){D[C]=B[C]}return D};F.array_copy_except=function(B,D){var E=[];for(var C=0;C<B.length;C++){if(D==undefined||B[C]!=D){E.push(B[C])}}return E};F.array_index_of=function(B,D){if(!B){if(F.array_index_of.caller==null){writeDebug("F.array_index_of was called from the top!")}else{writeDebug("F.array_index_of caller was "+F.array_index_of.caller)}}for(var C=0;C<B.length;C++){if(B[C]==D){return C}}return -1};F.get_dates_from_form=function(L,I){var M;var B;var E;var H=_ge(L+"date_posted_exact");var K=_ge(L+"time_posted_exact");if(H){var D=H.value.split("/");M=F.convert_MYSQLDateTime_into_unix_time_stamp(D[2]+"-"+D[0]+"-"+D[1]+" "+K.value);if(I>0){M=M+I}}if(_ge(L+"date_taken_exact_div").style.display=="none"){var O=_ge(L+"date_taken_approx_month");var N=_ge(L+"date_taken_approx_year");B=N.options[N.selectedIndex].value;if(O.options[O.selectedIndex].value=="circa"){E="8";B+="-01-01"}else{if(O.options[O.selectedIndex].value!=0){E="4";B+="-"+O.options[O.selectedIndex].value+"-01"}else{E="6";B+="-01-01"}}B+=" 00:00:00"}else{var A=_ge(L+"date_taken_exact");var C=_ge(L+"time_taken_exact");var J=A.value.split("/");E="0";B=J[2]+"-"+J[0]+"-"+J[1]+" "+C.value;if(I>0){var G=F.convert_MYSQLDateTime_into_unix_time_stamp(B);G=G+I;B=F.convert_unix_time_stamp_into_MYSQLDateTime(G)}}return{date_posted:M,date_taken:B,date_taken_granularity:E}};F.remove_el=function(B,C,D){if(!B){if(F.remove_el.caller==null){writeDebug("F.remove_el was called from the top!")}else{writeDebug("F.remove_el caller was "+F.remove_el.caller)}return }if(D){F.drag_unreg(B)}for(var A=F._ebA.length-1;A>=0;A--){F._ebA[A].eb_remove(B)}C=(C)?C:B.parentNode;C.removeChild(B)};F.drag_unreg=function(C){if(C.fumb_target){C.fumb_target.unreg()}if(C.fumb_drag){C.fumb_drag.unreg()}if(C.tree_coll_target){C.tree_coll_target.unreg()}if(C.tree_coll_drag){C.tree_coll_drag.unreg()}if(C.tree_set_target){C.tree_set_target.unreg()}if(C.tree_set_drag){C.tree_set_drag.unreg()}if(C.set_photo_drag){C.set_photo_drag.unreg()}if(C.set_photo_target){C.set_photo_target.unreg()}if(C.set_div_drag){C.set_div_drag.unreg()}if(C.set_div_target){C.set_div_target.unreg()}if(C.dot_drag){C.dot_drag.unreg()}if(C.dot_target){C.dot_target.unreg()}if(C.pinwin_thumb_drag){C.pinwin_thumb_drag.unreg()}if(C.pinwin_thumb_target){C.pinwin_thumb_target.unreg()}if(C.batch_photo_drag){C.batch_photo_drag.unreg()}if(C.batch_photo_target){C.batch_photo_target.unreg()}if(C.group_photo_drag){C.group_photo_drag.unreg()}if(C.group_photo_target){C.group_photo_target.unreg()}for(var A=C.childNodes.length-1;A>=0;A--){var B=C.childNodes[A];F.drag_unreg(B)}};F.decorate=function(C,E,A,B){if(!E){return }if(!C){return }if(!C.id&&!A){writeDebug("decorated els must have ids!");return }if(B){writeAPIDebug("F.decorate called, passed obj:");writeAPIDebug(_uber_toString(E))}if(typeof E._decotype=="object"){F.decorate(C,E._decotype)}for(p in E){if(p=="_decotype"){continue}try{C[p]=E[p]}catch(D){break}}if(C.id){if(this._decoratedO[C.id]){}else{this._decoratedO[C.id]=[]}this._decoratedO[C.id].push(C)}return C};F.changes_were_made=function(){this.changes_count=1};F.changes_were_saved=function(){this.changes_count=0};F.make_one_photo_edit_pop=function(){var A=document.createElement("div");A.id="one_photo_edit_pop";document.body.appendChild(A);F.decorate(A,F._one_photo_edit_pop).pop_go_go_go();return A};F.make_batch_edit_pop=function(B,A){var C=document.createElement("div");C.id="batch_edit_pop";document.body.appendChild(C);F.decorate(C,F._batch_edit_pop).pop_go_go_go(B,A);return C};F.make_shadow=function(C,G,D,B){var A=(D)?D:document.body;var E=document.createElement("div");E.id=C+"_shadow";if(B&&B.parentNode==D){A.insertBefore(E,B)}else{A.appendChild(E)}F.decorate(E,F._shadow).shadow_go_go_go(C,G,A);return E};_uber_toString=function(A,G,K,B){var A=(A)?A:window;var G=(G)?G:1;var K=(K)?K:20;var B=(B)?B:(A.id)?A.id+".":(A.api_key)?"params.":"root.";var J=[];var I="";for(var D=0;D<G;D++){I+="\t"}if(G==1){_uber_toString._handled_Os_and_As=[A];J.push("{\n")}for(pr in A){try{var H=typeof A[pr];if(typeof A[pr]=="object"){H="object";if(A[pr]==null){H="null"}else{if(A[pr].length!=undefined){H="array ("+A[pr].length+")"}}}if(A[pr]==_uber_toString){continue}if(typeof A=="object"&&A!=null&&A.length!=undefined&&typeof A[pr]=="function"){continue}J.push(I+B+pr+":"+H);if(H=="null"){J.push(": null\n")}else{if(typeof A[pr]=="object"){if(A[pr].length!=undefined){J.push(" : [");var C="]\n"}else{J.push(" : {");var C="}\n"}if(F.array_index_of(_uber_toString._handled_Os_and_As,A[pr])>-1){J.push("already been iterated over")}else{if(G>K){J.push(G+" is too deep ("+K+" is max)")}else{if(pr=="F"){J.push("F (Flickr) is not iterated over")}else{if(pr=="_decoratedO"){J.push("_decoratedO is not iterated over")}else{if(pr=="_ebA"){J.push("_ebA is not iterated over")}else{if(pr=="_eb_listeners"){J.push("_eb_listeners is not iterated over")}else{if(pr=="childNodes"){J.push("childNodes is not iterated over")}else{if(pr=="previousSibling"){J.push("previousSibling is not iterated over")}else{if(pr=="nextSibling"){J.push("nextSibling is not iterated over")}else{if(pr=="firstChild"){J.push("firstChild is not iterated over")}else{if(pr=="lastChild"){J.push("lastChild is not iterated over")}else{if(pr=="parentNode"){J.push("parentNode is not iterated over")}else{if(pr=="offsetParent"){J.push("offsetParent is not iterated over")}else{if(pr=="stvyle"){J.push("style is not iterated over")}else{if(pr=="attributes"){J.push("attributes is not iterated over")}else{if(pr=="ownerDocument"){J.push("ownerDocument is not iterated over")}else{_uber_toString._handled_Os_and_As.push(A[pr]);J.push("\n"+_uber_toString(A[pr],G+1,K,B+pr+".")+I)}}}}}}}}}}}}}}}}J.push(C)}else{if(typeof A[pr]=="function"){J.push(" "+A[pr].toString().split("\n")[0].replace("function ","").replace(" {","")+"\n")}else{if(typeof A[pr]=="string"){if(pr=="innerHTML"){J.push(': "'+pr+'"\n')}else{if(pr=="textContent"){J.push(': "'+pr+'"\n')}else{J.push(': "'+A[pr].replace('"','\\"')+'"\n')}}}else{J.push(": "+A[pr]+"\n")}}}}}catch(E){writeDebug("OI! "+E.message);J.push(I+B+pr+": BARF OUT "+E.message+"\n");continue}}if(G==1){J.push("}\n")}return J.join("")};var _ok_for_swf=function(){if(actualVersion<6){return false}return true};var _ok_for_scrumjax_xml=function(){if(global_fakeOperaXMLHttpRequestSupport){return false}return _ok_for_scrumjax()};var _ok_for_scrumjax=function(){if(!window.XMLHttpRequest){return false}if(navigator.appVersion.toLowerCase().indexOf("mac")>0&&navigator.userAgent.indexOf("MSIE")>0&&navigator.userAgent.indexOf("Opera")==-1){return false}return true};var _disable_select=function(){document.onselectstart=new Function("return false")};var _enable_select=function(){document.onselectstart=new Function("return true")};var _limit_textarea=function(B,A){if(B.value.length>A){B.value=B.value.substring(0,A)}};var _el_is_in_a_link=function(A){var B=A;while(B){if(B.href){return 1}B=B.parentNode}return 0};var _get_event_src=function(A){if(A&&A.target){return A.target}if(A&&A.srcElement){return A.srcElement}if(window.event){return window.event.srcElement}return null};var _get_event_keycode=function(A){if(A){return A.keyCode}if(window.event){return window.event.keyCode}return null};var _keys={TAB:9,ENTER:13,RIGHTARROW:39,DOWNARROW:40,UPARROW:38,BACKSPACE:8,CTRL:17,ESCAPE:27};var _hitch=function(B,A){return function(){return B[A].apply(B,arguments)}};myPos={getPos:function(A){return[this.getX(A),this.getY(A)]},getY:function(A){return Y.U.Dom.getY(A)},getX:function(A){return Y.U.Dom.getX(A)}};var _find_screen_height=function(){if(window.innerHeight){return window.innerHeight}else{if(document.documentElement.clientHeight){return document.documentElement.clientHeight}else{if(document.body.clientHeight){return document.body.clientHeight}}}};var _find_screen_width=function(){if(window.innerWidth){return window.innerWidth}else{if(document.documentElement.clientWidth){return document.documentElement.clientWidth}else{if(document.body.clientWidth){return document.body.clientWidth}}}};var _hyperlink=function(C,L,A,J){if(!A){A=" "}if(J==undefined){J="<br />"}if(!L){L=""}L=L.replace(" ",A);if(C.indexOf("http://")>-1){var E=C.split("\n");for(var H=0;H<E.length;H++){var D=E[H].split(" ");for(var K=0;K<D.length;K++){var M="";if(D[K].substr(0,1)=="("){D[K]=D[K].replace("(","");M="("}if(D[K].substr(0,7)=="http://"){var B=D[K];var I="";if(B.substr(B.length-1,1)==")"){B=B.substr(0,B.length-1);I=")"}var G="";if(B.substr(B.length-1,1)=="."){B=B.substr(0,B.length-1);G="."}D[K]=('<a href="'+B+'" onclick="'+L+'">'+B+"</a>"+I+G).replace(" ",A)}D[K]=M+D[K]}E[H]=D.join(" ")}C=E.join(J+"\n")}return C};var global_js_tip_count=0;F.get_tip_html=function(D,E,A,C){if(D.length==0){return""}A=(A==undefined)?"Tip":A;var B='<span style="display: none;" id="'+E+'">'+D+"</span>";if(!C){B+='<span class="'+A+'">[<a href="#" onclick="this.blur(); show_tooltip(this, \''+E+"', "+D.length+'); return false;">?</a>]</span>'}return B};F.handle_mouse_tip_mouseover=function(A){this.tip_mouse_is_over=1;show_tooltip(this,this.tip_id,0,"","ToolTipSmall")};F.handle_mouse_tip_mouseout=function(A){this.tip_mouse_is_over=0;hide_tooltip()};F.change_mouse_tip_txt=function(A,D){var C="mouse_tip_div_"+A.id;var E=_ge(C);if(E&&D){var B=F.get_tip_html(D,A.tip_id,"tip_mouse",1);E.innerHTML=B;if(A.tip_mouse_is_over){hide_tooltip();show_tooltip(A,A.tip_id,0,"","ToolTipSmall")}}};F.remove_mouse_tip=function(A){if(!A){return }if(A.tip_id){if(_ge("mouse_tip_div_"+A.id)){F.remove_el(_ge("mouse_tip_div_"+A.id))}}Y.U.Event.removeListener(A,"mouseover",F.handle_mouse_tip_mouseover);Y.U.Event.removeListener(A,"mouseout",F.handle_mouse_tip_mouseout)};F.make_new_mouse_tip=function(A,D){var E=A.title;if(!E){E="no title found on el";return }A.title="";A.alt="";var C="mouse_tip_div_"+A.id;var G=_ge(C);if(!G){global_js_tip_count++;A.tip_id="js_tooltip_"+global_js_tip_count;A.tip_placement=D;var B=F.get_tip_html(E,A.tip_id,"tip_mouse",1);var G=document.createElement("DIV");G.id=C;G.innerHTML=B;document.body.insertBefore(G,document.body.childNodes[0]);G.tip_id=A.tip_id}Y.U.Event.addListener(A,"mouseover",F.handle_mouse_tip_mouseover);Y.U.Event.addListener(A,"mouseout",F.handle_mouse_tip_mouseout)};var _set_cookie=function(C,E,H,D){var A="";if(H){var B=new Date();B.setTime(B.getTime()+(H*24*60*60*1000));A="; expires="+B.toUTCString()}D=D||".flickr.com";var G=C+"="+escape(E)+A+"; path=/; domain="+D;document.cookie=G;writeDebug("cookie set: "+G)};var _get_cookie=function(B){var D=B+"=";var A=document.cookie.split(";");for(var C=0;C<A.length;C++){var E=A[C];while(E.charAt(0)==" "){E=E.substring(1,E.length)}if(E.indexOf(D)==0){if(B!="js_dbg"){writeDebug(E)}return unescape(E.substring(D.length,E.length))}}return null};var _delete_cookie=function(A){_set_cookie(A,"",-1)};var _rebuild_tags_for_photos=function(C,K){if(global_photos[C]==undefined){return }global_photos[C].tagsA=[];global_photos[C].tags_rawA=[];global_photos[C].tags_idA=[];global_photos[C].tags_nameA=[];global_photos[C].tags_isOwnerA=[];global_photos[C].tags_canDeleteA=[];for(var J=0;J<K.length;J++){var D=K[J];var L=D.firstChild.nodeValue;var I=D.getAttribute("raw");var E=D.getAttribute("id");var H=(D.getAttribute("author_name")!=null)?D.getAttribute("author_name"):"";var G=(D.getAttribute("author")!=null)?D.getAttribute("author"):"";var B=(global_photos[C].isOwner||global_nsid==G)?true:false;var A=(global_nsid==G)?true:false;global_photos[C].tagsA.push(L);global_photos[C].tags_rawA.push(I);global_photos[C].tags_idA.push(E);global_photos[C].tags_nameA.push(H);global_photos[C].tags_isOwnerA.push(A);global_photos[C].tags_canDeleteA.push(B)}};var global_single_shadow_div;var _make_single_shadow=function(G,B,C,A,E){if(G==undefined){G=document.createElement("div");G.style.position="absolute";G.style.top="0px";G.style.left="0px";document.body.appendChild(G)}window.global_single_shadow_height_plus=(B==undefined)?(12-24):B;window.global_single_shadow_width_plus=(C==undefined)?(12-24):C;window.global_single_shadow_x_plus=(A==undefined)?(-3):A;window.global_single_shadow_y_plus=(E==undefined)?(-3):E;if(navigator.userAgent.match(/msie 6/i)){var D='<table class="shadow_table" cellpadding="0" cellspacing="0" border="0" style="padding:0px;"><tr><td width="11"><img class="trans_png" width="11" height="11" src="'+_images_root+'/tc_white_shadow_tl.png"></td><td id="shadow_width_controller"><img class="trans_png" width="100%" height="11" src="'+_images_root+'/tc_white_shadow_t.png"></td><td width="11"><img class="trans_png" width="11" height="11" src="'+_images_root+'/tc_white_shadow_tr.png"></td></tr><tr><td height="30" id="shadow_height_controller"><img class="trans_png" width="11" height="100%" src="'+_images_root+'/tc_white_shadow_l.png"></td><td></td><td><img class="trans_png" width="11" height="100%" src="'+_images_root+'/tc_white_shadow_r.png"></td></tr><tr><td><img class="trans_png" width="11" height="11" src="'+_images_root+'/tc_white_shadow_bl.png"></td><td><img id="shadow_width_controller2" class="trans_png" width="100%" height="11" src="'+_images_root+'/tc_white_shadow_b.png"></td><td><img class="trans_png" width="11" height="11" src="'+_images_root+'/tc_white_shadow_br.png"></td></tr></table>'}else{var D='<table class="shadow_table" cellpadding="0" cellspacing="0" border="0" style="padding:0px;"><tr><td width="11"><img width="11" height="11" src="'+_images_root+'/spaceout.gif" class="shadow_sprite shadow_tl"></td><td id="shadow_width_controller"><img width="100%" height="11" src="'+_images_root+'/spaceout.gif" class="shadow_sprite shadow_t"></td><td width="11"><img width="11" height="11" src="'+_images_root+'/spaceout.gif" class="shadow_sprite shadow_tr"></td></tr><tr><td height="30" id="shadow_height_controller"><img width="11" height="100%" src="'+_images_root+'/spaceout.gif" class="shadow_sprite shadow_l"></td><td></td><td><img width="11" height="100%" src="'+_images_root+'/spaceout.gif" class="shadow_sprite shadow_r"></td></tr><tr><td><img width="11" height="11" src="'+_images_root+'/spaceout.gif" class="shadow_sprite shadow_bl"></td><td><img id="shadow_width_controller2" width="100%" height="11" src="'+_images_root+'/spaceout.gif" class="shadow_sprite shadow_b"></td><td><img width="11" height="11" src="'+_images_root+'/spaceout.gif" class="shadow_sprite shadow_br"></td></tr></table>'}G.innerHTML=D;G.style.zIndex="999";G.style.display="none";G.id="shadow_div";window._set_single_shadow_x=function(H){G.style.marginLeft=(H+global_single_shadow_x_plus)+"px"};window._set_single_shadow_y=function(H){G.style.marginTop=(H+global_single_shadow_y_plus)+"px"};window._set_single_shadow_height=function(I){var H=_ge("shadow_height_controller");if(!H){return }var J=((I.offsetHeight)+global_single_shadow_height_plus);if(J<0){J=0}H.style.height=J+"px"};window._set_single_shadow_width=function(J){var I=_ge("shadow_width_controller");var H=_ge("shadow_width_controller2");if(!I){return }var K=((J.offsetWidth)+global_single_shadow_width_plus);if(K<0){K=0}I.style.width=H.style.width=K+"px"};window.global_single_shadow_div=G};F.modal_blocker={show:function(){var A=_ge("global_modal_blocker");if(!A){A=document.createElement("DIV");A.id="global_modal_blocker";A.style.zIndex=10009;A.style.position="absolute";A.style.backgroundColor="#999";A.style.opacity=".7";A.style.filter="alpha(opacity=70)";A.style.width="100%";A.style.height="100%";document.body.appendChild(A)}this.place();Y.U.Event.addListener(window,"resize",F.modal_blocker.place,this,true);Y.U.Event.addListener(window,"scroll",F.modal_blocker.place_after_scroll,this,true);A.style.display="block"},place_after_scroll:function(){if(this.place_tim){clearTimeout(this.place_tim)}var A=this;this.place_tim=setTimeout(function(){A.place()},100)},place:function(){var C=_ge("global_modal_blocker");if(!C){return }if(window.innerWidth){var A=window.pageXOffset;var B=window.pageYOffset}else{var A=document.body.scrollLeft;var B=document.body.scrollTop}C.style.top=B+"px";C.style.left=A+"px"},hide:function(){Y.U.Event.removeListener(window,"resize",F.modal_blocker.place);Y.U.Event.removeListener(window,"scroll",F.modal_blocker.place_after_scroll);var A=_ge("global_modal_blocker");if(!A){return }A.style.display="none"}};var global_comm_div;var _make_comm_div=function(C){var B=_ge("comm_div");if(!B){B=document.createElement("DIV");B.id="comm_div";B.style.left=0;B.style.top=0;document.body.appendChild(B);B.modal_blocker=document.createElement("DIV");B.modal_blocker.id="modal_blocker";B.modal_blocker.style.position="absolute";B.modal_blocker.style.top=0;B.modal_blocker.default_style={};B.modal_blocker.style.backgroundColor=B.modal_blocker.default_style.backgroundColor="#999";B.modal_blocker.style.opacity=B.modal_blocker.default_style.opacity=".5";B.modal_blocker.style.filter=B.modal_blocker.default_style.filter="alpha(opacity=50)";document.body.appendChild(B.modal_blocker)}var A="";if(!F.border_radius){A=A+'<table id="comm_table" cellpadding="0" cellspacing="0" border="0" style="width:200px; padding:0px;"><tr><td width="3"><img width="3" height="3" src="'+_images_root+'/tc_white_tl.gif"></td><td class="td_white"></td><td class="td_white"></td><td width="3"><img width="3" height="3" src="'+_images_root+'/tc_white_tr.gif"></td></tr><tr><td class="td_white"></td><td class="td_white" style="padding:3px 0px 0px 0px" width="1" valign="top"><img id="comm_pulser_img" src="'+_images_root+'/pulser2.gif" width="32" height="15" border="0"></td><td class="td_white" style="padding:3px; font-size:12px;" id="comm_td"><div id="comm_msg_div"></div><div id="comm_form_div" style="display:none;"></div><div id="comm_progress_bar_div_wrapper" style="display:none; border:1px solid black; margin-top:10px;"><div id="comm_progress_bar_div_inner" style="width:300px; height:15px"><div id="comm_progress_bar_div" style="height:100%; width:0%; background-color:#FF0084"></div></div></div></td><td class="td_white"></td></tr><tr id="comm_button_tr"><td class="td_white"></td><td class="td_white"></td><td class="td_white" style="padding:3px"><form><nobr><input id="comm_button_ok" type="button" class="Butt" value="OK" onclick="this.onclick_func();" style="margin:5px 5px 0 0;"><input id="comm_button_cancel" type="button" class="CancelButt" value="'+F.output.get("cancel")+'" onclick="this.onclick_func();" style="margin:5px 5px 0 0;"></nobr></form></td><td class="td_white"></td></tr><tr><td><img width="3" height="3" src="'+_images_root+'/tc_white_bl.gif"></td><td class="td_white"></td><td class="td_white"></td><td><img width="3" height="3" src="'+_images_root+'/tc_white_br.gif"></td></tr></table>'}else{A=A+'<table id="comm_table" cellpadding="0" cellspacing="0" border="0" style="width:200px;padding:0px;background:#fff;-moz-border-radius:3px;-khtml-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;padding:3px"><tr><td class="td_white"></td><td class="td_white" style="padding:3px 0px 0px 0px" width="1" valign="top"><img id="comm_pulser_img" src="'+_images_root+'/pulser2.gif" width="32" height="15" border="0"></td><td class="td_white" style="padding:3px; font-size:12px;" id="comm_td"><div id="comm_msg_div"></div><div id="comm_form_div" style="display:none;"></div><div id="comm_progress_bar_div_wrapper" style="display:none; border:1px solid black; margin-top:10px;"><div id="comm_progress_bar_div_inner" style="width:300px; height:15px"><div id="comm_progress_bar_div" style="height:100%; width:0%; background-color:#FF0084"></div></div></div></td><td class="td_white"></td></tr><tr id="comm_button_tr"><td class="td_white"></td><td class="td_white"></td><td class="td_white" style="padding:3px"><form><nobr><input id="comm_button_ok" type="button" class="Butt" value="OK" onclick="this.onclick_func();" style="margin:5px 5px 0 0;"><input id="comm_button_cancel" type="button" class="CancelButt" value="'+F.output.get("cancel")+'" onclick="this.onclick_func();" style="margin:5px 5px 0 0;"></nobr></form></td><td class="td_white"></td></tr></table>'}B.innerHTML=A;B.button_tr=_ge("comm_button_tr");B.pulser_img=_ge("comm_pulser_img");B.button_ok=_ge("comm_button_ok");B.button_cancel=_ge("comm_button_cancel");B.button_ok.onclick_func=function(){B.stop_comming();this.blur();if(typeof this.onclick_plus=="function"){this.onclick_plus()}if(typeof this.onclick_do=="function"){this.onclick_do()}};B.button_cancel.onclick_func=function(){B.stop_comming();this.blur();if(typeof this.onclick_plus=="function"){this.onclick_plus()}if(typeof this.onclick_do=="function"){this.onclick_do()}};B.table=_ge("comm_table");B.comm_msg_div=_ge("comm_msg_div");B.comm_form_div=_ge("comm_form_div");B.comm_progress_bar_div_wrapper=_ge("comm_progress_bar_div_wrapper");B.style.zIndex=C;B.style.display="none";if(B.modal_blocker){B.modal_blocker.style.zIndex=998;B.modal_blocker.style.display="none"}B.stop_comming=function(){if(this.modal_blocker){B.modal_blocker.style.zIndex=998;this.modal_blocker.style.display="none"}this.style.display="none";global_single_shadow_div.style.display="none";B.comm_form_div.style.display="none";B.comm_progress_bar_div_wrapper.style.display="none";_ge("comm_progress_bar_div").style.width=0;this.comming=0};B.change_comming_msg=function(I,G,D,H){if(!I){return }this.comm_msg_div.innerHTML=I;var E=Math.ceil(G*_ge("comm_progress_bar_div_inner").offsetWidth);anim_do_width_to(_ge("comm_progress_bar_div"),8,30,E,"linearTween",D,H);_set_single_shadow_height(this.table);_set_single_shadow_width(this.table)};B.get_rid_of_form=function(){if(!B.comm_form_div.childNodes[0]){return }var D=B.comm_form_div.childNodes[0];D.style.display="none";if(D.old_parentNode){D.old_parentNode.appendChild(F.prepare_for_insertion(D))}else{F.remove_el(D,B.comm_form_div)}B.comm_form_div.style.display="none"};B.start_comming=function(H,K,b,U,D,J,Z,N,O,V,E,a,G,T){var W=(H!="NOTHING AT ALL");var R=(!H)?F.output.get("global_working"):H;this.comm_msg_div.innerHTML=R;B.comm_form_div.style.display="none";if(E){B.get_rid_of_form();B.comm_form_div.style.display="block";E.style.display="block";if(E.old_parentNode!=B.comm_form_div){E.old_parentNode=E.parentNode}B.comm_form_div.appendChild(F.prepare_for_insertion(E))}B.comm_progress_bar_div_wrapper.style.display="none";if(G){B.comm_progress_bar_div_wrapper.style.display="block"}this.pulser_img.style.display=(U)?"none":"inline";if(D||N){this.button_tr.style.display=(F.is_ie)?"block":"table-row";this.button_ok.value=(J)?J.toUpperCase():F.output.get("ok");this.button_tr.style.display=(F.is_ie)?"block":"table-row";this.button_ok.onclick_do=(typeof Z=="function")?Z:null;this.button_ok.style.visibility=(D)?"visible":"hidden";this.button_ok.style.display=(D)?"inline":"none";this.button_cancel.value=(O)?O.toUpperCase():F.output.get("cancel");this.button_cancel.onclick_do=(typeof V=="function")?V:null;this.button_cancel.style.visibility=(N)?"visible":"hidden";this.button_tr.style.display=(F.is_ie)?"block":"table-row";_ge("comm_table").style.width=(typeof T!="undefined"&&T?T+"px":"312px")}else{this.button_tr.style.display="none";_ge("comm_table").style.width=(typeof T!="undefined"&&T?T+"px":"200px")}if(W){this.style.visibility="visible";global_single_shadow_div.style.visibility="visible"}else{this.style.visibility="hidden";global_single_shadow_div.style.visibility="hidden"}this.style.display="block";if(a&&this.modal_blocker){this.modal_blocker.style.display="block";this.modal_blocker.style.backgroundColor=(a.backgroundColor)?a.backgroundColor:B.modal_blocker.default_style.backgroundColor;this.modal_blocker.style.opacity=(a.opacity)?a.opacity:B.modal_blocker.default_style.opacity;this.modal_blocker.style.filter=(a.filter)?a.filter:B.modal_blocker.default_style.filter}if(window.innerWidth){var c=window.innerWidth;var I=window.innerHeight;var M=window.pageXOffset;var L=window.pageYOffset}else{var c=document.body.clientWidth;var I=document.body.clientHeight;var M=document.body.scrollLeft;var L=document.body.scrollTop}var S=function(){var e=M+_pi((c-_pi(global_comm_div.table.offsetWidth))/2);return e};var X=function(){var e=L+_pi((I-global_comm_div.table.offsetHeight)/2);return e};var Q=(typeof K=="function")?K():(typeof K=="number")?K:S();var P=(typeof b=="function")?b():(typeof b=="number")?b:X();this.style.marginLeft=Q+"px";this.style.marginTop=P+"px";if(a&&this.modal_blocker){if(a.loc_style){this.modal_blocker.style.top=a.loc_style.top+"px";this.modal_blocker.style.left=a.loc_style.left+"px";this.modal_blocker.style.width=a.loc_style.width+"px";this.modal_blocker.style.height=a.loc_style.height+"px"}else{this.modal_blocker.style.top=L+"px";this.modal_blocker.style.left=M+"px";this.modal_blocker.style.width="100%";this.modal_blocker.style.height="100%"}}_set_single_shadow_x(Q);_set_single_shadow_y(P);_set_single_shadow_height(this.table);_set_single_shadow_width(this.table);global_single_shadow_div.style.display="block";if(W&&D&&navigator.userAgent.indexOf("KHTML")==-1){this.button_ok.focus()}this.comming=1};window.global_comm_div=B;if(!global_single_shadow_div){_make_single_shadow(_ge("shadow_div"))}return global_comm_div};F._window_onload_dom=function(){if(F.onload_dom_timer){clearInterval(F.onload_dom_timer)}F._window_onload_dom=function(){};F.eb_broadcast("window_onload_dom")};F._window_onload=function(A){if(F._window_onload_dom){F._window_onload_dom()}F.eb_broadcast("window_onload",A)};F._window_onresize=function(){F.eb_broadcast("window_onresize")};window.onbeforeunload=function(){F.eb_broadcast("window_onbeforeunload",F.changes_count);var A=(window.page_onbeforeunload_msg)?window.page_onbeforeunload_msg:F.output.get("global_unsaved");if(F.changes_count){return A}};F._window_onblur=function(){window.blurred=1};F._window_onfocus=function(){window.blurred=0};F._window_onunload=function(){F.eb_broadcast("window_unload");for(var B=F._ebA.length-1;B>=0;B--){var A=F._ebA[B];A.eb_remove_all()}F._ebA=[];F._decoratedO={}};function _change_privacy(B){var A=_ge("is_private_"+B).checked;_ge("is_friend_"+B).disabled=!A;_ge("is_family_"+B).disabled=!A}function _get_qs_args(D){var C={};var H;var A=(D)?D.split("?")[D.split("?").length-1]:location.search.substring(1);H=A.split("&");for(var E=0;E<H.length;E++){var I=H[E].indexOf("=");if(I!=-1){var B=H[E].substring(0,I);var G=H[E].substring(I+1);C[B]=unescape(G)}}return C}var _qs_args=_get_qs_args();var promos_show=function(B){var E=_ge(B);var C=_ge(B+"_promo_div");var A=_ge(B+"_removed_div");if(!C){return }var D=B.replace("promo_","promos_hide_");var G={};G[D]=0;C.flickr_prefs_setPrefs_onLoad=function(){};F.API.callMethod("flickr.prefs.setPrefs",G,C);C.style.visibility="visible";A.style.display="none";E.style.backgroundColor=""};var promos_remove=function(B){var E=_ge(B);var C=_ge(B+"_promo_div");var A=_ge(B+"_removed_div");if(!C){return }var D=B.replace("promo_","promos_hide_");var G={};G[D]=1;C.flickr_prefs_setPrefs_onLoad=function(){};F.API.callMethod("flickr.prefs.setPrefs",G,C);C.style.visibility="hidden";A.style.display="block";E.style.backgroundColor="#efefef"};function _privacy_specific_change(D,G){D=(D)?D:"";var C=_ge(D+"is_private").checked;var B=_ge(D+"is_friend").checked;var A=_ge(D+"is_family").checked;var E=!C;_ge(D+"is_friend").disabled=!C;_ge(D+"is_family").disabled=!C;_ge(D+"is_friend_label").style.color=C?"black":"silver";_ge(D+"is_family_label").style.color=C?"black":"silver";if(C){if(B||A){_privacy_check_boxes(D+"perm_comment",false,false,true,true);_privacy_check_boxes(D+"perm_addmeta",false,false,true,true)}else{_privacy_check_boxes(D+"perm_comment",false,true,true,true);_privacy_check_boxes(D+"perm_addmeta",false,true,true,true)}}else{_privacy_check_boxes(D+"perm_comment",false,false,false,false);_privacy_check_boxes(D+"perm_addmeta",false,false,false,false)}if(!G&&(previous_public!=E||previous_friend!=B||previous_family!=A)){_privacy_try_and_check(D+"perm_comment",1);_privacy_try_and_check(D+"perm_addmeta",2);previous_public=E;previous_friend=B;previous_family=A}}function _privacy_default_change(){var C=_ge("is_private").checked;var B=_ge("is_friend").checked;var A=_ge("is_family").checked;var D=!C;_ge("is_friend").disabled=!C;_ge("is_family").disabled=!C;_ge("is_friend_label").style.color=C?"black":"silver";_ge("is_family_label").style.color=C?"black":"silver";_ge("perm_addmeta_disclaim").style.display=C?"block":"none";_ge("perm_comment_disclaim").style.display=C?"block":"none";if(C){if(B||A){_privacy_check_boxes("perm_comment",false,false,false,false);_privacy_check_boxes("perm_addmeta",false,false,false,false)}else{_privacy_check_boxes("perm_comment",false,false,false,false);_privacy_check_boxes("perm_addmeta",false,false,false,false)}}else{_privacy_check_boxes("perm_comment",false,false,false,false);_privacy_check_boxes("perm_addmeta",false,false,false,false)}}function _privacy_check_boxes(D,C,B,H,G){_ge(D+"_4").disabled=C;_ge(D+"_3").disabled=B;_ge(D+"_2").disabled=H;_ge(D+"_1").disabled=G;_ge(D+"_4_label").style.color=C?"silver":"black";_ge(D+"_3_label").style.color=B?"silver":"black";_ge(D+"_2_label").style.color=H?"silver":"black";_ge(D+"_1_label").style.color=G?"silver":"black";var A=false;for(var E=4;E>=1;E--){if(_ge(D+"_"+E).checked&&!_ge(D+"_"+E).disabled){return }}for(var E=1;E<=4;E++){if(!_ge(D+"_"+E).disabled){_ge(D+"_"+E).checked=true;return }}}function _privacy_try_and_check(A,C){for(var B=C;B<=4;B++){if(!_ge(A+"_"+B).disabled){_ge(A+"_"+B).checked=true;return }}}function _privacy_show_more(){_ge("morerow").style.display="none";_ge("lessrow").style.display=(F.is_ie)?"block":"table-row";_ge("detailrow").style.display=(F.is_ie)?"block":"table-row"}function _privacy_show_less(){_ge("morerow").style.display=(F.is_ie)?"block":"table-row";_ge("lessrow").style.display="none";_ge("detailrow").style.display="none"}F.one_photo_edit_start=function(B){var A=_ge("one_photo_edit_pop");if(!A){A=F.make_one_photo_edit_pop()}A.pop_show_start(B)};F.hide_featured_model=function(){var B=_ge("cfad");var A=0;anim_do_height_to(B,15,30,A,"easeOutQuad",function(){_ge("cfad_hide_link_p").style.display="none";_ge("cfad_show_link_p").style.display="block";B.style.display="none";F.API.callMethod("flickr.prefs.setPrefs",{promos_hide_featured_model:1},{flickr_prefs_setPrefs_onLoad:function(){}})},[])};F.show_featured_model=function(){var B=_ge("cfad_iframe");var C=_ge("cfad");if(F.is_ie||F.is_safari){C.style.height="1px";C.style.display="block";_ge("cfad_hide_link_p").style.display="block";_ge("cfad_show_link_p").style.display="none"}else{C.style.height="0px";C.style.display="block"}if(B.src=="javascript:void(0)"&&B.getAttribute("use_src")&&B.getAttribute("use_src")!=""){if(!F.is_ie&&!F.is_safari){_ge("cfad_hide_link_p").style.display="block";_ge("cfad_show_link_p").style.display="none";B.onload=function(){F.show_featured_model()}}B.src=B.getAttribute("use_src");if(!F.is_ie&&!F.is_safari){return }}var A=B.height;anim_do_height_to(C,15,30,A,"easeOutQuad",function(){F.API.callMethod("flickr.prefs.setPrefs",{promos_hide_featured_model:0},{flickr_prefs_setPrefs_onLoad:function(){}})},[])};F._photo_vanisher={remove_photo:function(B,A,C){if(this.already_removing==undefined){this.already_removing=false}F.eb_broadcast("stewart_pause");if(this.already_removing){return }if(window.confirm(F.output.get("global_sure"))){if(_ge("sv_title_"+B)&&_ge("sv_body_"+B)){this.already_removing=true;this.vanish_photo(B)}else{location.href=A+"?delete="+B+"&"+C;this.already_removing=false}}else{F.eb_broadcast("stewart_play_if_was_playing")}},vanish_photo:function(A){after_fade=function(){_ge("sv_title_"+A).style.display="none";_ge("sv_body_"+A).style.display="none";var B=_ge("stewart_swf"+A+"_div");if(B){B.parentNode.removeChild(B)}F.eb_broadcast("stewart_play_if_was_playing")};anim_do_opacity_to(_ge("sv_title_"+A),50,20,0,"easeOutQuad",after_fade);anim_do_opacity_to(_ge("sv_body_"+A),50,20,0,"easeOutQuad",after_fade);F._photo_vanisher.api_remove_photo(A)},api_remove_photo:function(A){var B={flickr_photos_delete_onLoad:function(H,G,D,E){if(!H){alert(F.output.get("global_sorry"));F._photo_vanisher.un_vanish_photo(E.photo_id)}}};var C=new Object();C.photo_id=A;F.API.callMethod("flickr.photos.delete",C,B,null,null,0);this.already_removing=false},un_vanish_photo:function(A){if(_ge("sv_title_"+A)&&_ge("sv_title_"+A)){_ge("sv_title_"+A).style.display="block";_ge("sv_body_"+A).style.display="block";anim_do_opacity_to(_ge("sv_title_"+A),50,20,100,"easeInQuad");anim_do_opacity_to(_ge("sv_body_"+A),50,20,100,"easeInQuad")}this.already_removing=false}};F.possess=function(A){if(window.global_intl_lang&&global_intl_lang!="en-us"){return A}if(A.substr(A.length-1,1).toLowerCase()=="s"){return A+"'"}else{return A+"'s"}};var how_many_are_this_size=function(A,G){var E=0;var B=0;for(var D in print_photos){B++;var C=print_photos[D];E+=(Math.max(C.o_w,C.o_h)>=Math.max(A,G)&&Math.min(C.o_w,C.o_h)>=Math.min(A,G))}if(E==0){txt=" "+F.output.get("setprint_no_photos_large_enough")}else{if(E==B){txt=" "+F.output.get("setprint_all_photos_large_enough")}else{txt=" "+F.output.get("setprint_x_of_y_large_enough",E,B)}}return txt};